<div id='Interpolation_Polynomial_Cardinalities'>
</head>


<body>
<div class="head">
<h1>Theory Bounded_Degree_Polynomials</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Bounded Degree Polynomials</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>This section contains a definition for the set of polynomials with a degree bound and
</span><span>establishes its cardinality.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Bounded_Degree_Polynomials</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><span class="quoted"><span>"</span><a href="../../HOL/HOL-Algebra/Polynomial_Divisibility.html"><span>HOL-Algebra.Polynomial_Divisibility</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>ring</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.coeff_in_carrier|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.coeff_in_carrier|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.coeff_in_carrier|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.coeff_in_carrier|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.coeff_in_carrier|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.coeff_in_carrier|thm"><span class="entity_def" id="offset_267..283">coeff_in_carrier</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>p</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>coeff</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>poly_coeff_in_carrier</span><span> </span><span>carrier_is_subring</span><span>  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>univ_poly_carrier</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Degree_Polynomials.bounded_degree_polynomials_def|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.bounded_degree_polynomials_def|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.bounded_degree_polynomials_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Bounded_Degree_Polynomials.bounded_degree_polynomials|const"><span>bounded_degree_polynomials</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bounded_degree_polynomials</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>F</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>F</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span>degree</span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[]</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Note: The definition for </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials|const"><span>bounded_degree_polynomials</span></a><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> includes the zero polynomial
</span><span>in </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials|const"><span>bounded_degree_polynomials</span></a><span> </span><span class="free"><span>F</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>. The reason for this adjustment is that, contrary to
</span><span>definition in HOL Algebra, most authors set the degree of the zero polynomial to 
</span><span>$-\infty$~\cite[\textsection 7.2.2]{shoup2009computational}. That
</span><span>definition make some identities, such as $\mathrm{deg}(f g) = \mathrm{deg}\, f + \mathrm{deg}\, g$
</span><span>for polynomials $f$ and $g$ unconditionally true.
</span><span>In particular, it prevents an unnecessary corner case in the statement of the results established 
</span><span>in this entry.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Degree_Polynomials.bounded_degree_polynomials_length|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.bounded_degree_polynomials_length|thm"><span>bounded_degree_polynomials_length</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials|const"><span>bounded_degree_polynomials</span></a><span> </span><span class="free"><span>F</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>F</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span>length</span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials_def|fact"><span>bounded_degree_polynomials_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>Collect_cong</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Suc_pred</span><span> </span><span>length_greater_0_conv</span><span> </span><span>less_Suc_eq_0_disj</span><span> </span><span>less_Suc_eq_le</span><span> </span><span>linorder_not_le</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1464..1469">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>ring</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.fin_degree_bounded|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.fin_degree_bounded|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.fin_degree_bounded|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.fin_degree_bounded|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.fin_degree_bounded|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.fin_degree_bounded|thm"><span>fin_degree_bounded</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials|const"><span>bounded_degree_polynomials</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials|const"><span>bounded_degree_polynomials</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>p</span></span><span class="main"><span>.</span></span><span> </span><span>set</span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span>length</span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>subsetI</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials_length|fact"><span>bounded_degree_polynomials_length</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_1464..1469"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>polynomial_incl</span><span> </span><span>univ_poly_carrier</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>finite_subset</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_1464..1469"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span>finite_lists_length_le</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>ring</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.non_empty_bounded_degree_polynomials|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.non_empty_bounded_degree_polynomials|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.non_empty_bounded_degree_polynomials|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.non_empty_bounded_degree_polynomials|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.non_empty_bounded_degree_polynomials|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.non_empty_bounded_degree_polynomials|thm"><span>non_empty_bounded_degree_polynomials</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials|const"><span>bounded_degree_polynomials</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>ð¬</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials|const"><span>bounded_degree_polynomials</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials_def|fact"><span>bounded_degree_polynomials_def</span></a><span> </span><span>univ_poly_zero</span><span> </span><span>univ_poly_zero_closed</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2187..2192">lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Degree_Polynomials.in_image_by_witness|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.in_image_by_witness|thm"><span>in_image_by_witness</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_2187..2192"><span>assms</span></a><span> </span><span>image_eqI</span><span> </span><span>subsetI</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2318..2323">lemma</span></span></span><span> </span><span class="entity_def" id="Bounded_Degree_Polynomials.card_mostly_constant_maps|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.card_mostly_constant_maps|thm"><span>card_mostly_constant_maps</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span>range</span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¶</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="var"><span>?A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="var"><span>?B</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_2469..2475">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>f</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="var"><span>?A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>f</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span>  </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>E</sub></span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>arg_cong</span><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> f</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>order_antisym</span><span class="main"><span>)</span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span> TODO Split </span><span>*</span><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.in_image_by_witness|fact"><span>in_image_by_witness</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> g</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span>Î»</span></span></span><span class="bound"><span class="bound"><span>f</span></span></span><span class="main"><span class="main"><span>.</span></span></span><span> </span><span>restrict</span><span> </span><span class="bound"><span class="bound"><span>f</span></span></span><span> </span><span class="main"><span class="main"><span>{</span></span></span><span class="main"><span class="main"><span>0</span></span></span><span class="main"><span class="main"><span>..&lt;</span></span></span><span class="free"><span class="free"><span>n</span></span></span><span class="main"><span class="main"><span>}</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>conjI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>range_subsetD</span><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ext</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>restrict_def</span><span> </span><span>Pi_def</span><span> </span><span>PiE_def</span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_2469..2475"><span>f_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>image_subsetI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_2469..2475"><span>f_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>conjI</span><span class="main"><span>)</span></span><span> 
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Int_iff</span><span> </span><span>PiE</span><span> </span><span>PiE_def</span><span> </span><span>atLeastLessThan_iff</span><span> </span><span>image_Collect_subsetI</span><span> </span><span>less_eq_nat.simps</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>image_subsetI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_2318..2323"><span>assms</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span>n</span></span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>E</sub></span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>card_image</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>inj_onI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>ext</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_2469..2475"><span>f_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>PiE_arb</span><span> </span><span>atLeastLessThan_iff</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>card_PiE</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.build_poly_def|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.build_poly_def|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.build_poly_def|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.build_poly_def|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.build_poly_def|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.build_poly_def|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.build_poly_def_raw|axiom"><span>definition</span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>ring</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.build_poly.cong|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.build_poly.cong|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.build_poly|const"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.build_poly|const"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.build_poly|const"><span class="entity_def" id="offset_3337..3347">build_poly</span></span></span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>build_poly</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>normalize</span><span> </span><span class="main"><span>(</span></span><span>rev</span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>0</span></span><span class="main"><span>..&lt;</span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3408..3413">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>ring</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.poly_degree_bound_from_coeff|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.poly_degree_bound_from_coeff|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.poly_degree_bound_from_coeff|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.poly_degree_bound_from_coeff|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.poly_degree_bound_from_coeff|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.poly_degree_bound_from_coeff|thm"><span class="entity_def" id="offset_3424..3452">poly_degree_bound_from_coeff</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>coeff</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ccontr</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_3603..3604">a</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>Â¬</span></span><span class="main"><span>(</span></span><span>degree</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â</span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span>b</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span>lead_coeff</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>ð¬</span></span><span>â</span><span class="free"><span>R</span></span><span>â</span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_3408..3413"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>polynomial_def</span><span> </span><span>univ_poly_carrier</span><span> </span><span>univ_poly_zero</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>coeff</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span>degree</span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>ð¬</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_3603..3604"><span>a</span></a><span> </span><span>lead_coeff_simp</span><span> </span><span>univ_poly_zero</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_3603..3604"><span>a</span></a><span> </span><span>not_le</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>False</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_3408..3413"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>          

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3947..3952">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>ring</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.poly_degree_bound_from_coeff_1|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.poly_degree_bound_from_coeff_1|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.poly_degree_bound_from_coeff_1|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.poly_degree_bound_from_coeff_1|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.poly_degree_bound_from_coeff_1|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.poly_degree_bound_from_coeff_1|thm"><span class="entity_def" id="offset_3963..3993">poly_degree_bound_from_coeff_1</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>coeff</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials|const"><span>bounded_degree_polynomials</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_3424..3452"><span>poly_degree_bound_from_coeff</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_3947..3952"><span>assms</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials_def|fact"><span>bounded_degree_polynomials_def</span></a><span> </span><span>univ_poly_zero</span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_3947..3952"><span>assms</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4232..4237">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>ring</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> 
    </span><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.build_poly_poly|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.build_poly_poly|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.build_poly_poly|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.build_poly_poly|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.build_poly_poly|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.build_poly_poly|thm"><span class="entity_def" id="offset_4301..4316">build_poly_poly</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_3337..3347"><span>build_poly</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.build_poly_coeff|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.build_poly_coeff|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.build_poly_coeff|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.build_poly_coeff|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.build_poly_coeff|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.build_poly_coeff|thm"><span class="entity_def" id="offset_4367..4383">build_poly_coeff</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span>coeff</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_3337..3347"><span>build_poly</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>ð¬</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.build_poly_degree|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.build_poly_degree|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.build_poly_degree|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.build_poly_degree|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.build_poly_degree|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.build_poly_degree|thm"><span>build_poly_degree</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_3337..3347"><span>build_poly</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="entity_def" id="offset_4521..4522">a</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_3337..3347"><span>build_poly</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_4232..4237"><span>build_poly_def</span></a><span> </span><span>univ_poly_carrier</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>normalize_gives_polynomial</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_4232..4237"><span>assms</span></a><span> </span><span>atLeastLessThan_iff</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="entity_def" id="offset_4732..4733">b</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span>coeff</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_3337..3347"><span>build_poly</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>ð¬</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>coeff</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_3337..3347"><span>build_poly</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>ð¬</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_4232..4237"><span>build_poly_def</span></a><span> </span><span>normalize_coeff</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>coeff_nth</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>rev_nth</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_4232..4237"><span>build_poly_def</span></a><span> </span><span>normalize_coeff</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>coeff_length</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_3337..3347"><span>build_poly</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_3337..3347"><span>build_poly</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_3424..3452"><span>poly_degree_bound_from_coeff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_4521..4522"><span>a</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_4732..4733"><span>b</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_3337..3347"><span>build_poly</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_4232..4237"><span>build_poly_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>diff_Suc_1</span><span> </span><span>diff_is_0_eq</span><span> </span><span>less_Suc_eq_le</span><span> </span><span>list.size</span><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>univ_poly_zero</span><span> </span><span>zero_diff</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5475..5480">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>ring</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.length_build_poly|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.length_build_poly|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.length_build_poly|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.length_build_poly|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.length_build_poly|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.length_build_poly|thm"><span class="entity_def" id="offset_5491..5508">length_build_poly</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span>length</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_3337..3347"><span>build_poly</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_5475..5480"><span>build_poly_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>length_map</span><span> </span><span>normalize_length_le</span><span> </span><span>length_rev</span><span> </span><span>length_upt</span><span> </span><span>less_imp_diff_less</span><span> </span><span>linorder_not_less</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The following establishes the total number of polynomials with a degree less than $n$.
</span><span>Unlike the results in the following sections, it is already possible to establish this property for 
</span><span>polynomials with coefficients in a ring.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>ring</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.bounded_degree_polynomials_card|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.bounded_degree_polynomials_card|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.bounded_degree_polynomials_card|fact"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.R.bounded_degree_polynomials_card|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.INTEG.P.bounded_degree_polynomials_card|thm"><span class="entity_def" id="Bounded_Degree_Polynomials.ring.bounded_degree_polynomials_card|thm"><span>bounded_degree_polynomials_card</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials|const"><span>bounded_degree_polynomials</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>^</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_6047..6048">a</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span>coeff</span><span> </span><span class="main"><span>`</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials|const"><span>bounded_degree_polynomials</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span>range</span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>k</span></span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>image_subsetI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials_def|fact"><span>bounded_degree_polynomials_def</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>conjI</span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>coeff_length</span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_267..283"><span>coeff_in_carrier</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_6280..6281">b</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span>range</span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>k</span></span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>coeff</span><span> </span><span class="main"><span>`</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials|const"><span>bounded_degree_polynomials</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.in_image_by_witness|fact"><span>in_image_by_witness</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> g</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span>Î»</span></span></span><span class="bound"><span class="bound"><span>x</span></span></span><span class="main"><span class="main"><span>.</span></span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_3337..3347"><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_3337..3347"><span>build_poly</span></a></a><span> </span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="free"><span class="free"><span>n</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>conjI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_3963..3993"><span>poly_degree_bound_from_coeff_1</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_4301..4316"><span>build_poly_poly</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>blast</span></span><span class="main"><span>)</span></span><span> 
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>coeff_length</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_5491..5508"><span>length_build_poly</span></a><span> </span><span>order_trans</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ext</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_4367..4383"><span>build_poly_coeff</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>blast</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials|const"><span>bounded_degree_polynomials</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span>coeff</span><span> </span><span class="main"><span>`</span></span><span>  </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials|const"><span>bounded_degree_polynomials</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>card_image</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>inj_on_subset</span><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> A</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span>carrier</span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>poly_ring</span><span> </span><span class="free"><span class="free"><span>R</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>inj_onI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>coeff_iff_polynomial_cond</span><span> </span><span>univ_poly_carrier</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials_def|fact"><span>bounded_degree_polynomials_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span>range</span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>k</span></span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>arg_cong</span><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> f</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>order_antisym</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_6047..6048"><span>a</span></a><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#offset_6280..6281"><span>b</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.card_mostly_constant_maps|fact"><span>card_mostly_constant_maps</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Interpolation_Polynomial_Cardinalities'>ead>


<body>
<div class="head">
<h1>Theory Lagrange_Interpolation</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Lagrange Interpolation</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>This section introduces the function </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>interpolate</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>, which constructs the Lagrange
</span><span>interpolation polynomials for a given set of points, followed by a theorem of its correctness.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Lagrange_Interpolation</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><span class="quoted"><span>"</span><a href="../../HOL/HOL-Algebra/Polynomial_Divisibility.html"><span>HOL-Algebra.Polynomial_Divisibility</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>A finite product in a domain is $0$ if and only if at least one factor is. This could be added
</span><span>to </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>theory</span></span><span> "</span><a href="../../HOL/HOL-Algebra/FiniteProduct.html"><span>HOL-Algebra.FiniteProduct</span></a><span>"</span><span class="antiquote"><span>}</span></span></span><span> or </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>theory</span></span><span> "</span><a href="../../HOL/HOL-Algebra/Ring.html"><span>HOL-Algebra.Ring</span></a><span>"</span><span class="antiquote"><span>}</span></span></span><span>.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_489..494">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>domain</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Lagrange_Interpolation.domain.finprod_zero_iff|fact"><span class="entity_def" id="Lagrange_Interpolation.domain.finprod_zero_iff|thm"><span class="entity_def" id="offset_507..523">finprod_zero_iff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finprod</span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span> </span><span class="main"><span>â·</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_489..494"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>finite_induct</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>empty</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_737..743">insert</span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_756..757">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>F</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_737..743"><span>insert</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_808..809">b</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span>finprod</span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>F</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>finprod_closed</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_756..757"><span>a</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_876..877">c</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_737..743"><span>insert</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_925..926">d</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>F</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_756..757"><span>a</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>comm_monoid.finprod_insert</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span>comm_monoid_axioms</span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_737..743"><span>insert</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_737..743"><span>insert</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_756..757"><span>a</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_876..877"><span>c</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>  
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>integral_iff</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_876..877"><span>c</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_808..809"><span>b</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_737..743"><span>insert</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_925..926"><span>d</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1181..1186">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>ring</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Lagrange_Interpolation.INTEG.R.poly_of_const_in_carrier|fact"><span class="entity_def" id="Lagrange_Interpolation.INTEG.P.poly_of_const_in_carrier|fact"><span class="entity_def" id="Lagrange_Interpolation.ring.poly_of_const_in_carrier|fact"><span class="entity_def" id="Lagrange_Interpolation.INTEG.R.poly_of_const_in_carrier|thm"><span class="entity_def" id="Lagrange_Interpolation.INTEG.P.poly_of_const_in_carrier|thm"><span class="entity_def" id="Lagrange_Interpolation.ring.poly_of_const_in_carrier|thm"><span class="entity_def" id="offset_1197..1221">poly_of_const_in_carrier</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>poly_of_const</span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1181..1186"><span>poly_of_const_def</span></a><span> </span><span>univ_poly_zero_closed</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1181..1186"><span>poly_of_const_def</span></a><span> </span><span>univ_poly_carrier</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span>polynomial_def</span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1181..1186"><span>assms</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1467..1472">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>ring</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Lagrange_Interpolation.INTEG.R.eval_poly_of_const|fact"><span class="entity_def" id="Lagrange_Interpolation.INTEG.P.eval_poly_of_const|fact"><span class="entity_def" id="Lagrange_Interpolation.ring.eval_poly_of_const|fact"><span class="entity_def" id="Lagrange_Interpolation.INTEG.R.eval_poly_of_const|thm"><span class="entity_def" id="Lagrange_Interpolation.INTEG.P.eval_poly_of_const|thm"><span class="entity_def" id="Lagrange_Interpolation.ring.eval_poly_of_const|thm"><span class="entity_def" id="offset_1483..1501">eval_poly_of_const</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>eval</span><span> </span><span class="main"><span>(</span></span><span>poly_of_const</span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1467..1472"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1467..1472"><span>poly_of_const_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1615..1620">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>domain</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Lagrange_Interpolation.domain.poly_mult_degree_le|fact"><span class="entity_def" id="Lagrange_Interpolation.domain.poly_mult_degree_le|thm"><span class="entity_def" id="offset_1633..1652">poly_mult_degree_le</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_1841..1842">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>polynomial</span></span><span>â</span><span class="free"><span>R</span></span><span>â </span><span class="main"><span>(</span></span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1615..1620"><span>assms</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>univ_poly_carrier</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_1927..1928">b</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>polynomial</span></span><span>â</span><span class="free"><span>R</span></span><span>â </span><span class="main"><span>(</span></span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1615..1620"><span>assms</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>univ_poly_carrier</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_2013..2014">c</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>subring</span><span> </span><span class="main"><span>(</span></span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>carrier_is_subring</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="main"><span>(</span></span><span>ring.poly_mult</span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[]</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[]</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span>degree</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>degree</span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1841..1842"><span>a</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1927..1928"><span>b</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_2013..2014"><span>c</span></a><span> </span><span>poly_mult_degree_eq</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[]</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[]</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span>degree</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>degree</span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>univ_poly_mult</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1615..1620"><span>assms</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>add_mono_thms_linordered_semiring</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>zero_le</span><span class="main"><span>)</span></span><span>   
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2436..2441">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>domain</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Lagrange_Interpolation.domain.poly_add_degree_le|fact"><span class="entity_def" id="Lagrange_Interpolation.domain.poly_add_degree_le|thm"><span class="entity_def" id="offset_2454..2472">poly_add_degree_le</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_2436..2441"><span>assms</span></a><span> </span><span>poly_add_degree</span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>dual_order.trans</span><span> </span><span>max.bounded_iff</span><span> </span><span>univ_poly_add</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_2436..2441"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>linarith</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2811..2816">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>domain</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Lagrange_Interpolation.domain.poly_sub_degree_le|fact"><span class="entity_def" id="Lagrange_Interpolation.domain.poly_sub_degree_le|thm"><span class="entity_def" id="offset_2829..2847">poly_sub_degree_le</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3007..3016">interpret</span></span></span><span> x</span><span class="main"><span>:</span></span><span>cring</span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>carrier_is_subring</span><span> </span><span>domain.univ_poly_is_cring</span><span> </span><span>domain_axioms</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>a_minus_def</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_2454..2472"><span>poly_add_degree_le</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_2811..2816"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_2811..2816"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_3007..3016"><span>x.a_inv_closed</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_2811..2816"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>univ_poly_a_inv_degree</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span>carrier_is_subring</span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_2811..2816"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_2811..2816"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3369..3374">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>domain</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Lagrange_Interpolation.domain.poly_sum_degree_le|fact"><span class="entity_def" id="Lagrange_Interpolation.domain.poly_sum_degree_le|thm"><span class="entity_def" id="offset_3387..3405">poly_sum_degree_le</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>degree</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="main"><span>(</span></span><span>finsum</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_3369..3374"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span>finite_induct</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_3626..3631">empty</span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> x</span><span class="main"><span>:</span></span><span>cring</span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>carrier_is_subring</span><span> </span><span>domain.univ_poly_is_cring</span><span> </span><span>domain_axioms</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_3626..3631"><span>empty</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>univ_poly_zero</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_3811..3817">insert</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_3825..3834">interpret</span></span></span><span> x</span><span class="main"><span>:</span></span><span>cring</span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>carrier_is_subring</span><span> </span><span>domain.univ_poly_is_cring</span><span> </span><span>domain_axioms</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_3942..3943">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span>finsum</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_2454..2472"><span>poly_add_degree_le</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_3811..3817"><span>insert</span></a><span>  </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_3825..3834"><span>x.finsum_closed</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_3825..3834"><span>x.finsum_insert</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_3811..3817"><span>insert</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_3811..3817"><span>insert</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_3811..3817"><span>insert</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_3942..3943"><span>a</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Lagrange_Interpolation.INTEG.R.lagrange_basis_polynomial_aux_def|fact"><span class="entity_def" id="Lagrange_Interpolation.INTEG.P.lagrange_basis_polynomial_aux_def|fact"><span class="entity_def" id="Lagrange_Interpolation.ring.lagrange_basis_polynomial_aux_def|fact"><span class="entity_def" id="Lagrange_Interpolation.INTEG.R.lagrange_basis_polynomial_aux_def|thm"><span class="entity_def" id="Lagrange_Interpolation.INTEG.P.lagrange_basis_polynomial_aux_def|thm"><span class="entity_def" id="Lagrange_Interpolation.ring.lagrange_basis_polynomial_aux_def|thm"><span class="entity_def" id="Lagrange_Interpolation.ring.lagrange_basis_polynomial_aux_def_raw|axiom"><span>definition</span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>ring</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="Lagrange_Interpolation.ring.lagrange_basis_polynomial_aux.cong|fact"><span class="entity_def" id="Lagrange_Interpolation.ring.lagrange_basis_polynomial_aux.cong|thm"><span class="entity_def" id="Lagrange_Interpolation.INTEG.R.lagrange_basis_polynomial_aux|const"><span class="entity_def" id="Lagrange_Interpolation.INTEG.P.lagrange_basis_polynomial_aux|const"><span class="entity_def" id="Lagrange_Interpolation.ring.lagrange_basis_polynomial_aux|const"><span class="entity_def" id="offset_4206..4235">lagrange_basis_polynomial_aux</span></span></span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>lagrange_basis_polynomial_aux</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> 
    </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>X</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="main"><span>(</span></span><span>poly_of_const</span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4346..4351">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>domain</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Lagrange_Interpolation.domain.lagrange_aux_eval|fact"><span class="entity_def" id="Lagrange_Interpolation.domain.lagrange_aux_eval|thm"><span class="entity_def" id="offset_4364..4381">lagrange_aux_eval</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>eval</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_4206..4235"><span>lagrange_basis_polynomial_aux</span></a><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>S</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4537..4546">interpret</span></span></span><span> x</span><span class="main"><span>:</span></span><span>ring_hom_cring</span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>p</span></span><span class="main"><span>.</span></span><span> </span><span>eval</span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>eval_cring_hom</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span>carrier_is_subring</span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_4346..4351"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4668..4669">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="keyword1"><span>X</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span>poly_of_const</span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1197..1221"><span>poly_of_const_in_carrier</span></a><span> </span><span>carrier_is_subring</span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_4346..4351"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>cring.cring_simprules</span><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> 
        </span><span>domain_def</span><span> </span><span>subsetD</span><span> </span><span>univ_poly_is_domain</span><span> </span><span>var_closed</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4905..4906">b</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>eval</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>X</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span>poly_of_const</span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_4537..4546"><span>x.hom_sub</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>var_closed</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span>carrier_is_subring</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1197..1221"><span>poly_of_const_in_carrier</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>subsetD</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_4346..4351"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>eval_var</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_4346..4351"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1483..1501"><span>eval_poly_of_const</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> </span><span>subsetD</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_4346..4351"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5243..5244">c</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span>a_minus</span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_4346..4351"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_4346..4351"><span>lagrange_basis_polynomial_aux_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_4537..4546"><span>x.hom_finprod</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>Pi_I</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>erule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_4668..4669"><span>a</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>finprod_cong'</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_5243..5244"><span>c</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_4905..4906"><span>b</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5497..5502">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>domain</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Lagrange_Interpolation.domain.lagrange_aux_poly|fact"><span class="entity_def" id="Lagrange_Interpolation.domain.lagrange_aux_poly|thm"><span class="entity_def" id="offset_5515..5532">lagrange_aux_poly</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_4206..4235"><span>lagrange_basis_polynomial_aux</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5662..5663">a</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span>subring</span><span> </span><span class="main"><span>(</span></span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>carrier_is_subring</span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_5497..5502"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5742..5743">b</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="keyword1"><span>X</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span>poly_of_const</span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1197..1221"><span>poly_of_const_in_carrier</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_5662..5663"><span>a</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_5497..5502"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>cring.cring_simprules</span><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>domain_def</span><span> </span><span>subsetD</span><span>
        </span><span>univ_poly_is_domain</span><span> </span><span>var_closed</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5957..5966">interpret</span></span></span><span> x</span><span class="main"><span>:</span></span><span>cring</span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>carrier_is_subring</span><span> </span><span>domain.univ_poly_is_cring</span><span> </span><span>domain_axioms</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_5497..5502"><span>lagrange_basis_polynomial_aux_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_5957..5966"><span>x.finprod_closed</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>Pi_I</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_5742..5743"><span>b</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6210..6215">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>domain</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Lagrange_Interpolation.domain.lagrange_aux_degree|fact"><span class="entity_def" id="Lagrange_Interpolation.domain.lagrange_aux_degree|thm"><span class="entity_def" id="offset_6228..6247">lagrange_aux_degree</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_4206..4235"><span>lagrange_basis_polynomial_aux</span></a><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_6210..6215"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>S</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>finite_induct</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_6414..6419">empty</span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> x</span><span class="main"><span>:</span></span><span>cring</span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>carrier_is_subring</span><span> </span><span>domain.univ_poly_is_cring</span><span> </span><span>domain_axioms</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_6414..6419"><span>empty</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_6210..6215"><span>lagrange_basis_polynomial_aux_def</span></a><span> </span><span>univ_poly_one</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_6632..6638">insert</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6646..6655">interpret</span></span></span><span> x</span><span class="main"><span>:</span></span><span>cring</span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>carrier_is_subring</span><span> </span><span>domain.univ_poly_is_cring</span><span> </span><span>domain_axioms</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_6763..6764">a</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span>subring</span><span> </span><span class="main"><span>(</span></span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>carrier_is_subring</span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_6210..6215"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_6843..6844">b</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="keyword1"><span>X</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span>poly_of_const</span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1197..1221"><span>poly_of_const_in_carrier</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_6763..6764"><span>a</span></a><span> </span><span>cring.cring_simprules</span><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>domain_def</span><span> </span><span>subsetD</span><span>
        </span><span>univ_poly_is_domain</span><span> </span><span>var_closed</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7061..7062">c</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>F</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_6632..6638"><span>insert</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7108..7109">d</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_6632..6638"><span>insert</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7155..7156">e</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>X</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span>poly_of_const</span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_2829..2847"><span>poly_sub_degree_le</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>var_closed</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_6763..6764"><span>a</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>var_def</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_7108..7109"><span>d</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1197..1221"><span>poly_of_const_in_carrier</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_6210..6215"><span>poly_of_const_def</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_4206..4235"><span>lagrange_basis_polynomial_aux</span></a><span> </span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> 
    </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>card</span><span> </span><span class="skolem"><span>F</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_6210..6215"><span>lagrange_basis_polynomial_aux_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_6646..6655"><span>x.finprod_insert</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_6632..6638"><span>insert</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_6632..6638"><span>insert</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>Pi_I</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_6843..6844"><span>b</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> </span><span>subsetD</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_7061..7062"><span>c</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_6843..6844"><span>b</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_7108..7109"><span>d</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1633..1652"><span>poly_mult_degree_le</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_6843..6844"><span>b</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_7108..7109"><span>d</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_6646..6655"><span>x.finprod_closed</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>Pi_I</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_6843..6844"><span>b</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> </span><span>subsetD</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_7061..7062"><span>c</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_7155..7156"><span>e</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_6632..6638"><span>insert</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_7061..7062"><span>c</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_6210..6215"><span>lagrange_basis_polynomial_aux_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span>insert</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_6632..6638"><span>insert</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Lagrange_Interpolation.INTEG.R.lagrange_basis_polynomial_def|fact"><span class="entity_def" id="Lagrange_Interpolation.INTEG.P.lagrange_basis_polynomial_def|fact"><span class="entity_def" id="Lagrange_Interpolation.ring.lagrange_basis_polynomial_def|fact"><span class="entity_def" id="Lagrange_Interpolation.INTEG.R.lagrange_basis_polynomial_def|thm"><span class="entity_def" id="Lagrange_Interpolation.INTEG.P.lagrange_basis_polynomial_def|thm"><span class="entity_def" id="Lagrange_Interpolation.ring.lagrange_basis_polynomial_def|thm"><span class="entity_def" id="Lagrange_Interpolation.ring.lagrange_basis_polynomial_def_raw|axiom"><span>definition</span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>ring</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="Lagrange_Interpolation.ring.lagrange_basis_polynomial.cong|fact"><span class="entity_def" id="Lagrange_Interpolation.ring.lagrange_basis_polynomial.cong|thm"><span class="entity_def" id="Lagrange_Interpolation.INTEG.R.lagrange_basis_polynomial|const"><span class="entity_def" id="Lagrange_Interpolation.INTEG.P.lagrange_basis_polynomial|const"><span class="entity_def" id="Lagrange_Interpolation.ring.lagrange_basis_polynomial|const"><span class="entity_def" id="offset_7982..8007">lagrange_basis_polynomial</span></span></span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>lagrange_basis_polynomial</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_4206..4235"><span>lagrange_basis_polynomial_aux</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>S</span></span></span></span><span>
    </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="main"><span>(</span></span><span>poly_of_const</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>inv</span></span><span>â</span><span class="free"><span>R</span></span><span>â </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8144..8149">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>field</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> 
    </span><span class="entity_def" id="Lagrange_Interpolation.field.lagrange_one|fact"><span class="entity_def" id="Lagrange_Interpolation.field.lagrange_one|thm"><span class="entity_def" id="offset_8252..8264">lagrange_one</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>eval</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_7982..8007"><span>lagrange_basis_polynomial</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð­</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="Lagrange_Interpolation.field.lagrange_degree|fact"><span class="entity_def" id="Lagrange_Interpolation.field.lagrange_degree|thm"><span class="entity_def" id="offset_8319..8334">lagrange_degree</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_7982..8007"><span>lagrange_basis_polynomial</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="Lagrange_Interpolation.field.lagrange_zero|fact"><span class="entity_def" id="Lagrange_Interpolation.field.lagrange_zero|thm"><span class="entity_def" id="offset_8394..8407">lagrange_zero</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>eval</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_7982..8007"><span>lagrange_basis_polynomial</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="Lagrange_Interpolation.field.lagrange_poly|fact"><span class="entity_def" id="Lagrange_Interpolation.field.lagrange_poly|thm"><span class="entity_def" id="offset_8474..8487">lagrange_poly</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_7982..8007"><span>lagrange_basis_polynomial</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_8560..8561">a</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span>subring</span><span> </span><span class="main"><span>(</span></span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>carrier_is_subring</span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8635..8644">interpret</span></span></span><span> x</span><span class="main"><span>:</span></span><span>ring_hom_cring</span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>p</span></span><span class="main"><span>.</span></span><span> </span><span>eval</span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>eval_cring_hom</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8560..8561"><span>a</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_8759..8765">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>p</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>p</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_4206..4235"><span>lagrange_basis_polynomial_aux</span></a><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_8819..8820">b</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>p</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8759..8765"><span>p_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_5515..5532"><span>lagrange_aux_poly</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_8938..8939">c</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span>eval</span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>S</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8759..8765"><span>p_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_4364..4381"><span>lagrange_aux_eval</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9089..9090">d</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span>a_minus</span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9154..9155">e</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span>finprod</span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>(</span></span><span>a_minus</span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>Units</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>field_Units</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>conjI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>finprod_closed</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_9089..9090"><span>d</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_507..523"><span>finprod_zero_iff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>eval</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_7982..8007"><span>lagrange_basis_polynomial</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð­</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>lagrange_basis_polynomial_def</span></a><span> </span><span>Let_def</span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8759..8765"><span>p_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8635..8644"><span>x.hom_mult</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8819..8820"><span>b</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1197..1221"><span>poly_of_const_in_carrier</span></a><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>Units_inv_closed</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_9154..9155"><span>e</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8938..8939"><span>c</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1483..1501"><span>eval_poly_of_const</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>Units_inv_closed</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_9154..9155"><span>e</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_9154..9155"><span>e</span></a><span> </span><span>Units_r_inv</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_7982..8007"><span>lagrange_basis_polynomial</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>lagrange_basis_polynomial_def</span></a><span> </span><span>Let_def</span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8759..8765"><span>p_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1633..1652"><span>poly_mult_degree_le</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> m</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span>0</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>,</span></span></span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8819..8820"><span>b</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1197..1221"><span>poly_of_const_in_carrier</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>Units_inv_closed</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_9154..9155"><span>e</span></a><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8759..8765"><span>p_def</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_6228..6247"><span>lagrange_aux_degree</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>assms</span></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>1</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>assms</span></a><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span>2</span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>poly_of_const_def</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>eval</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_7982..8007"><span>lagrange_basis_polynomial</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_10213..10214">f</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10232..10233">g</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span>eval</span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span>â</span><span class="free"><span>R</span></span><span>â</span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8759..8765"><span>p_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_4364..4381"><span>lagrange_aux_eval</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>in_mono</span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_10213..10214"><span>f</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>assms</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_507..523"><span>finprod_zero_iff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>assms</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_10213..10214"><span>f</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>assms</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_10213..10214"><span>f</span></a><span> </span><span>in_mono</span><span> </span><span>r_right_minus_eq</span><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> s</span><span class="main"><span>:</span></span><span>ring_hom_cring</span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>p</span></span><span class="main"><span>.</span></span><span> </span><span>eval</span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>eval_cring_hom</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8560..8561"><span>a</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>assms</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_10213..10214"><span>f</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10630..10632">by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_10648..10649">h</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span>eval</span><span> </span><span class="main"><span>(</span></span><span>poly_of_const</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>inv</span></span><span> </span><span>finprod</span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>(</span></span><span>a_minus</span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_10630..10632"><span>s.hom_closed</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1197..1221"><span>poly_of_const_in_carrier</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>Units_inv_closed</span><span class="main"><span class="keyword3"><span>,</span></span></span><span>  </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_9154..9155"><span>e</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>eval</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_7982..8007"><span>lagrange_basis_polynomial</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>lagrange_basis_polynomial_def</span></a><span> </span><span>Let_def</span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8759..8765"><span>p_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_10630..10632"><span>s.hom_mult</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8819..8820"><span>b</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1197..1221"><span>poly_of_const_in_carrier</span></a><span class="main"><span>)</span></span><span>
       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>Units_inv_closed</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_9154..9155"><span>e</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_10232..10233"><span>g</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_10648..10649"><span>h</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> r</span><span class="main"><span>:</span></span><span>cring</span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>carrier_is_subring</span><span> </span><span>domain.univ_poly_is_cring</span><span> </span><span>domain_axioms</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_7982..8007"><span>lagrange_basis_polynomial</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8144..8149"><span>lagrange_basis_polynomial_def</span></a><span> </span><span>Let_def</span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8759..8765"><span>p_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1197..1221"><span>poly_of_const_in_carrier</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span>Units_inv_closed</span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8938..8939"><span>c</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_9154..9155"><span>e</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8819..8820"><span>b</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Lagrange_Interpolation.INTEG.R.interpolate_def|fact"><span class="entity_def" id="Lagrange_Interpolation.INTEG.P.interpolate_def|fact"><span class="entity_def" id="Lagrange_Interpolation.ring.interpolate_def|fact"><span class="entity_def" id="Lagrange_Interpolation.INTEG.R.interpolate_def|thm"><span class="entity_def" id="Lagrange_Interpolation.INTEG.P.interpolate_def|thm"><span class="entity_def" id="Lagrange_Interpolation.ring.interpolate_def|thm"><span class="entity_def" id="Lagrange_Interpolation.ring.interpolate_def_raw|axiom"><span>definition</span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>ring</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="Lagrange_Interpolation.ring.interpolate.cong|fact"><span class="entity_def" id="Lagrange_Interpolation.ring.interpolate.cong|thm"><span class="entity_def" id="Lagrange_Interpolation.INTEG.R.interpolate|const"><span class="entity_def" id="Lagrange_Interpolation.INTEG.P.interpolate|const"><span class="entity_def" id="Lagrange_Interpolation.ring.interpolate|const"><span class="entity_def" id="offset_11466..11477">interpolate</span></span></span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>interpolate</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> 
   </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â</span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>S</span></span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_7982..8007"><span>lagrange_basis_polynomial</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>S</span></span></span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>s</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="main"><span>(</span></span><span>poly_of_const</span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Let </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> be a function and </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> be a finite subset of the domain of the field.
</span><span>Then </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>interpolate</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="free"><span>f</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> will return a polynomial with degree less than </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>S</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>
</span><span>interpolating </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> on </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11848..11855">theorem</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>field</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> 
    </span><span class="entity_def" id="Lagrange_Interpolation.field.interpolate_poly|fact"><span class="entity_def" id="Lagrange_Interpolation.field.interpolate_poly|thm"><span>interpolate_poly</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11466..11477"><span>interpolate</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="Lagrange_Interpolation.field.interpolate_degree|fact"><span class="entity_def" id="Lagrange_Interpolation.field.interpolate_degree|thm"><span>interpolate_degree</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11466..11477"><span>interpolate</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="Lagrange_Interpolation.field.interpolate_eval|fact"><span class="entity_def" id="Lagrange_Interpolation.field.interpolate_eval|thm"><span>interpolate_eval</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>eval</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11466..11477"><span>interpolate</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12166..12175">interpret</span></span></span><span> r</span><span class="main"><span>:</span></span><span>cring</span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>carrier_is_subring</span><span> </span><span>domain.univ_poly_is_cring</span><span> </span><span>domain_axioms</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_12283..12284">a</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_7982..8007"><span>lagrange_basis_polynomial</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8474..8487"><span>lagrange_poly</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11848..11855"><span>assms</span></a><span> </span><span>Diff_iff</span><span> </span><span>finite_Diff</span><span> </span><span>in_mono</span><span> </span><span>insertI1</span><span> </span><span>subset_insertI2</span><span> </span><span>subset_insert_iff</span><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_12476..12477">b</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11848..11855"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_12537..12538">c</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>degree</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_7982..8007"><span>lagrange_basis_polynomial</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>full_types</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8319..8334"><span>lagrange_degree</span></a><span>  </span><span>DiffI</span><span> </span><span>Diff_insert_absorb</span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11848..11855"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11848..11855"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> 
        </span><span>card_Diff_singleton</span><span> </span><span>finite_insert</span><span> </span><span>insert_subset</span><span> </span><span>mk_disjoint_insert</span><span class="main"><span>)</span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11466..11477"><span>interpolate</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11848..11855"><span>interpolate_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_12166..12175"><span>r.finsum_closed</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>Pi_I</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1197..1221"><span>poly_of_const_in_carrier</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_12476..12477"><span>b</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_12283..12284"><span>a</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11466..11477"><span>interpolate</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11848..11855"><span>interpolate_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_3387..3405"><span>poly_sum_degree_le</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11848..11855"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>order_trans</span><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> y</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span>(</span></span></span><span>card</span><span> </span><span class="free"><span class="free"><span>S</span></span></span><span> </span><span class="main"><span class="main"><span>-</span></span></span><span> </span><span class="main"><span class="main"><span>1</span></span></span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="main"><span class="main"><span>+</span></span></span><span> </span><span class="main"><span class="main"><span>0</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1633..1652"><span>poly_mult_degree_le</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_12283..12284"><span>a</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1197..1221"><span>poly_of_const_in_carrier</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_12476..12477"><span>b</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_12537..12538"><span>c</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11848..11855"><span>poly_of_const_def</span></a><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1197..1221"><span>poly_of_const_in_carrier</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_12476..12477"><span>b</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_12283..12284"><span>a</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13383..13384">e</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span>subring</span><span> </span><span class="main"><span>(</span></span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>carrier_is_subring</span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11848..11855"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>eval</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11466..11477"><span>interpolate</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_13537..13538">d</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> s</span><span class="main"><span>:</span></span><span>ring_hom_cring</span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>p</span></span><span class="main"><span>.</span></span><span> </span><span>eval</span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="skolem"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>eval_cring_hom</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_13383..13384"><span>e</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11848..11855"><span>assms</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_13537..13538"><span>d</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13667..13669">by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13685..13686">e</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>â¹</span></span><span>
         </span><span>eval</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_7982..8007"><span>lagrange_basis_polynomial</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span>poly_of_const</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span>
         </span><span class="main"><span>(</span></span><span class="keyword1"><span>if</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>ð¬</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_13667..13669"><span>s.hom_mult</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_12283..12284"><span>a</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1197..1221"><span>poly_of_const_in_carrier</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_12476..12477"><span>b</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1483..1501"><span>eval_poly_of_const</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_12476..12477"><span>b</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>conjI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>impI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8252..8264"><span>lagrange_one</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11848..11855"><span>assms</span></a><span class="main"><span>)</span></span><span>
         </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11848..11855"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11848..11855"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_12476..12477"><span>b</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>impI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_8394..8407"><span>lagrange_zero</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11848..11855"><span>assms</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11848..11855"><span>assms</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_13537..13538"><span>d</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>eval</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11466..11477"><span>interpolate</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â¨</span></span><span class="bound"><span>x</span></span><span class="main"><span>â</span></span><span class="free"><span>S</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>ð¬</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11848..11855"><span>interpolate_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_13667..13669"><span>s.hom_finsum</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>Pi_def</span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_1197..1221"><span>poly_of_const_in_carrier</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_12476..12477"><span>b</span></a><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_12283..12284"><span>a</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>comp_def</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>finsum_cong'</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>Pi_def</span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_12476..12477"><span>b</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_13685..13686"><span>e</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>finsum_singleton</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_13537..13538"><span>d</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11848..11855"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_13537..13538"><span>d</span></a><span> </span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11848..11855"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>eval</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Lagrange_Interpolation.html#offset_11466..11477"><span>interpolate</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre></div><div id='Interpolation_Polynomial_Cardinalities'>ties</title>
</head>


<body>
<div class="head">
<h1>Theory Interpolation_Polynomial_Cardinalities</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>Cardinalities of Interpolation Polynomials</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>This section establishes the cardinalities of the set of polynomials with a degree bound 
</span><span>interpolating a given set of points.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Interpolation_Polynomial_Cardinalities</span><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="Bounded_Degree_Polynomials.html"><span>Bounded_Degree_Polynomials</span></a><span> </span><a href="Lagrange_Interpolation.html"><span>Lagrange_Interpolation</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_303..308">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>ring</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.INTEG.R.poly_add_coeff|fact"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.INTEG.P.poly_add_coeff|fact"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.ring.poly_add_coeff|fact"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.INTEG.R.poly_add_coeff|thm"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.INTEG.P.poly_add_coeff|thm"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.ring.poly_add_coeff|thm"><span class="entity_def" id="offset_319..333">poly_add_coeff</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>coeff</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>coeff</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>coeff</span><span> </span><span class="free"><span>y</span></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>univ_poly_add</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>poly_add_coeff</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_303..308"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>univ_poly_carrier</span><span> </span><span>polynomial_incl</span><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_303..308"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>univ_poly_carrier</span><span> </span><span>polynomial_incl</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_667..672">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>domain</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.domain.poly_neg_coeff|fact"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.domain.poly_neg_coeff|thm"><span class="entity_def" id="offset_685..699">poly_neg_coeff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>coeff</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>â</span></span><span>coeff</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_799..808">interpret</span></span></span><span> x</span><span class="main"><span>:</span></span><span>cring</span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_667..672"><span>assms</span></a><span> </span><span>cring_def</span><span> </span><span>carrier_is_subring</span><span>  </span><span>domain.univ_poly_is_cring</span><span> </span><span>domain_axioms</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_932..933">a</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>ð¬</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_799..808"><span>x.r_right_minus_eq</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_667..672"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>metis</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>ð¬</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>coeff</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>ð¬</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â</span><span class="main"><span>)</span></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>univ_poly_zero</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>coeff</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>coeff</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_932..933"><span>a</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>a_minus_def</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_319..333"><span>poly_add_coeff</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_667..672"><span>assms</span></a><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_667..672"><span>assms</span></a><span> </span><span>univ_poly_carrier</span><span> </span><span>polynomial_incl</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>ð¬</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>coeff</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>coeff</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>local.minus_minus</span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_799..808"><span>x.a_inv_closed</span></a><span> </span><span>sum_zero_eq_neg</span><span> </span><span>coeff_in_carrier</span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_667..672"><span>assms</span></a><span class="main"><span>)</span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1499..1504">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>domain</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.domain.poly_substract_coeff|fact"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.domain.poly_substract_coeff|thm"><span class="entity_def" id="offset_1517..1537">poly_substract_coeff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>coeff</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>coeff</span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>coeff</span><span> </span><span class="free"><span>y</span></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1688..1697">interpret</span></span></span><span> x</span><span class="main"><span>:</span></span><span>cring</span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_1499..1504"><span>assms</span></a><span> </span><span>cring_def</span><span> </span><span>carrier_is_subring</span><span>  </span><span>domain.univ_poly_is_cring</span><span> </span><span>domain_axioms</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>a_minus_def</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_319..333"><span>poly_add_coeff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_1499..1504"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_1688..1697"><span>x.a_inv_closed</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_1499..1504"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_685..699"><span>poly_neg_coeff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_1499..1504"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>A polynomial with more zeros than its degree is the zero polynomial.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2096..2101">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>field</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.field.max_roots|fact"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.field.max_roots|thm"><span class="entity_def" id="offset_2113..2122">max_roots</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>p</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>K</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>card</span><span> </span><span class="free"><span>K</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>eval</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>p</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â</span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ccontr</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>p</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>ð¬</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â</span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_2363..2364">a</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>p</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>[]</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>univ_poly_zero</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><span>roots</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><span>roots</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>K</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_2567..2571">True</span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>is_root</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_2363..2364"><span>a</span></a><span>  </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_2096..2101"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_2096..2101"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>is_ring</span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_2096..2101"><span>is_root_def</span></a><span> </span><span>subsetD</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>set_mset</span><span> </span><span class="main"><span>(</span></span><span>roots</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_2096..2101"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span>roots_mem_iff_is_root</span><span> </span><span>field_def</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>1</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>count</span><span> </span><span class="main"><span>(</span></span><span>roots</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_2567..2571"><span>True</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_2096..2101"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>count</span><span> </span><span class="main"><span>(</span></span><span>mset_set</span><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>mset_set</span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â#</span></span><span> </span><span>roots</span><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>subseteq_mset_def</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>size</span><span> </span><span class="main"><span>(</span></span><span>roots</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>size_mset_mono</span><span> </span><span>size_mset_set</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>size</span><span> </span><span class="main"><span>(</span></span><span>roots</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>degree</span><span> </span><span class="free"><span>p</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_2363..2364"><span>a</span></a><span> </span><span>size_roots_le_degree</span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_2096..2101"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>False</span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_2096..2101"><span>assms</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>leD</span><span> </span><span>less_le_trans</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.INTEG.R.split_poly_def|fact"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.INTEG.P.split_poly_def|fact"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.ring.split_poly_def|fact"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.INTEG.R.split_poly_def|thm"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.INTEG.P.split_poly_def|thm"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.ring.split_poly_def|thm"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.ring.split_poly_def_raw|axiom"><span>definition</span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>ring</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.ring.split_poly.cong|fact"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.ring.split_poly.cong|thm"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.INTEG.R.split_poly|const"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.INTEG.P.split_poly|const"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.ring.split_poly|const"><span class="entity_def" id="offset_3394..3404">split_poly</span></span></span></span></span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>split_poly</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>K</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>restrict</span><span> </span><span class="main"><span>(</span></span><span>eval</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>K</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>Î»</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span>coeff</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span>card</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>K</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>To establish the count of the number of polynomials of degree less than 
</span><span>$n$ interpolating a function $f$ on $K$ where $\lvert K \rvert \leq n$, the function 
</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>split_poly</span></span><span> </span><span class="free"><span>K</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> establishes a bijection between the polynomials of degree less than 
</span><span>$n$ and the values of the polynomials on $K$ in combination with the coefficients of order
</span><span>$\lvert K \rvert$ and greater.
</span><span>
</span><span>For the injectivity: Note that the difference of two polynomials whose coefficients of order
</span><span>$\lvert K \rvert$ and larger agree must have a degree less than $\lvert K \rvert$ and because 
</span><span>their values agree on $k$ points, it must have $\lvert K \rvert$ zeros and hence is the zero 
</span><span>polynomial.
</span><span>
</span><span>For the surjectivty: Let $p$ be a polynomial whose coefficients larger than $\lvert K \rvert$ are 
</span><span>chosen, and all other coefficients be $0$. Now it is possible to find a polynomial $q$ interpolating
</span><span>$f - p$ on $K$ using Lagrange interpolation. Then $p + q$ will interpolate $f$ on $K$ and because
</span><span>the degree of $q$ is less than $\lvert K \rvert$ its coefficients of order $\lvert K \rvert$ will
</span><span>be the same as those of $p$.
</span><span>
</span><span>A tempting question is whether it would be easier to instead establish a bijection between the
</span><span>polynomials of degree less than $n$ and its values on $K \cup K'$ where $K'$ are arbitrarily chosen
</span><span>$n-\lvert K \rvert$ points in the field. This approach is indeed easier, however, it fails for 
</span><span>the case where the size of the field is less than $n$.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4928..4933">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>field</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.field.split_poly_inj|fact"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.field.split_poly_inj|thm"><span class="entity_def" id="offset_4945..4959">split_poly_inj</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>K</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>inj_on</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_3394..3404"><span>split_poly</span></a><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>y</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_5095..5097">a1</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_5135..5137">a2</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_5175..5177">a3</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_3394..3404"><span>split_poly</span></a><span> </span><span class="free"><span>K</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_3394..3404"><span>split_poly</span></a><span> </span><span class="free"><span>K</span></span><span> </span><span class="skolem"><span>y</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5215..5224">interpret</span></span></span><span> x</span><span class="main"><span>:</span></span><span>cring</span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>carrier_is_subring</span><span> </span><span>domain.univ_poly_is_cring</span><span> </span><span>domain_axioms</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5332..5343">x_y_carrier</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_5095..5097"><span>a1</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_5135..5137"><span>a2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span>coeff</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span>card</span><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>coeff</span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span>card</span><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_5175..5177"><span>a3</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_4928..4933"><span>split_poly_def</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>meson</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_5525..5526">b</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span>coeff</span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>+</span></span><span>card</span><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>coeff_in_carrier</span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_5095..5097"><span>a1</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_5135..5137"><span>a2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_1517..1537"><span>poly_substract_coeff</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>card</span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â¨</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>poly_degree_bound_from_coeff</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_5215..5224"><span>x.minus_closed</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_5095..5097"><span>a1</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_5135..5137"><span>a2</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>add.commute</span><span> </span><span>le_iff_add</span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_5525..5526"><span>b</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>eval</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>eval</span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="bound"><span>k</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_5175..5177"><span>a3</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_4928..4933"><span>split_poly_def</span></a><span> </span><span>restrict_def</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>meson</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>eval</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>eval</span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>eval_in_carrier</span><span> </span><span>univ_poly_carrier</span><span> </span><span>polynomial_incl</span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_5095..5097"><span>a1</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_5135..5137"><span>a2</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_4928..4933"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>in_mono</span><span> </span><span>r_right_minus_eq</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>eval</span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>ring_hom_cring.hom_sub</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span>eval_cring_hom</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span>carrier_is_subring</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_4928..4933"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_5095..5097"><span>a1</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_5135..5137"><span>a2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_2113..2122"><span>max_roots</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_5332..5343"><span>x_y_carrier</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_4928..4933"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>y</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_5215..5224"><span>x.r_right_minus_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_5095..5097"><span>a1</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_5135..5137"><span>a2</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6472..6477">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>field</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.field.split_poly_image|fact"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.field.split_poly_image|thm"><span class="entity_def" id="offset_6489..6505">split_poly_image</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>K</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_3394..3404"><span>split_poly</span></a><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span>
        </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>E</sub></span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>Ã</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span>range</span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>k</span></span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span>â</span><span class="free"><span>R</span></span><span>â</span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>subsetI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_6722..6723">e</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>E</sub></span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>Ã</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span>range</span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="main"><span>(</span></span><span class="bound"><span>n</span></span><span class="main"><span>::</span></span><span>nat</span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>k</span></span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_6813..6815">a1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>fst</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span> </span><span class="keyword1"><span>â<span class="hidden">â©</span><sub>E</sub></span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6722..6723"><span>e</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>mem_Times_iff</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>n</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_6903..6905">a2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>snd</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span>range</span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>k</span></span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6722..6723"><span>e</span></a><span> </span><span>mem_Times_iff</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>

  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_7000..7006">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>w</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>w</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>build_poly</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>if</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span>card</span><span> </span><span class="free"><span>K</span></span><span> </span><span class="keyword1"><span>then</span></span><span> </span><span class="main"><span>(</span></span><span>snd</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span>card</span><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>else</span></span><span> </span><span class="main"><span>ð¬</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7106..7112">w_carr</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>w</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7000..7006"><span>w_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>build_poly_poly</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6903..6905"><span>a2</span></a><span> </span><span>PiE_def</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7246..7258">w_eval_range</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>local.eval</span><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_7340..7354">w_eval_range_1</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7375..7384">interpret</span></span></span><span> x</span><span class="main"><span>:</span></span><span>ring_hom_cring</span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>p</span></span><span class="main"><span>.</span></span><span> </span><span>eval</span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>eval_cring_hom</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span>carrier_is_subring</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6472..6477"><span>assms</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7340..7354"><span>w_eval_range_1</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>eval</span><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7375..7384"><span>x.hom_closed</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7106..7112"><span>w_carr</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> r</span><span class="main"><span>:</span></span><span>cring</span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>carrier_is_subring</span><span> </span><span>domain.univ_poly_is_cring</span><span> </span><span>domain_axioms</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_7723..7729">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>y</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>interpolate</span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span>fst</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>eval</span><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_7785..7791">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>r</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>r</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span>â</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>â </span><span class="skolem"><span>w</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7833..7839">y_poly</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7723..7729"><span>y_def</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>interpolate_poly</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6472..6477"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6472..6477"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>image_subsetI</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>minus_closed</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6813..6815"><span>a1</span></a><span> </span><span>PiE_def</span><span> </span><span>Pi_def</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7246..7258"><span>w_eval_range</span></a><span> </span><span>subsetD</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6472..6477"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_8096..8104">y_degree</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>â¤</span></span><span> </span><span>card</span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7723..7729"><span>y_def</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>interpolate_degree</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6472..6477"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6472..6477"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>image_subsetI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>minus_closed</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6813..6815"><span>a1</span></a><span> </span><span>PiE_def</span><span> </span><span>Pi_def</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7246..7258"><span>w_eval_range</span></a><span> </span><span>subsetD</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6472..6477"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_8344..8350">r_poly</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>r</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7785..7791"><span>r_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7833..7839"><span>y_poly</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7106..7112"><span>w_carr</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_8447..8454">coeff_r</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span>coeff</span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>card</span><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>snd</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="bound"><span>k</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>coeff</span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>card</span><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>coeff</span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>card</span><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>coeff</span><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>k</span></span><span class="main"><span>+</span></span><span>card</span><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7785..7791"><span>r_def</span></a><span>  </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_319..333"><span>poly_add_coeff</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7833..7839"><span>y_poly</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7106..7112"><span>w_carr</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>coeff</span><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>k</span></span><span class="main"><span>+</span></span><span>card</span><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>K</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7723..7729"><span>y_def</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6472..6477"><span>interpolate_def</span></a><span> </span><span>univ_poly_zero</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>coeff_length</span><span class="main"><span>)</span></span><span>
       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>One_nat_def</span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6472..6477"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_8096..8104"><span>y_degree</span></a><span> </span><span>bot.extremum</span><span> </span><span>card.empty</span><span> </span><span>card_seteq</span><span> </span><span>le_add2</span><span> 
          </span><span>le_diff_iff</span><span> </span><span>not_less_eq_eq</span><span> </span><span>order.trans</span><span> </span><span>zero_le</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>coeff</span><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>k</span></span><span class="main"><span>+</span></span><span>card</span><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>coeff_in_carrier</span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7106..7112"><span>w_carr</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>snd</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>k</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7000..7006"><span>w_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>build_poly_coeff</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6903..6905"><span>a2</span></a><span> </span><span>Pi_def</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6903..6905"><span>a2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>not_less</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>coeff</span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>card</span><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>snd</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>k</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9311..9317">eval_r</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>eval</span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>fst</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="bound"><span>k</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>k</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_9383..9384">d</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>K</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> s</span><span class="main"><span>:</span></span><span>ring_hom_cring</span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>p</span></span><span class="main"><span>.</span></span><span> </span><span>eval</span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>eval_cring_hom</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span>carrier_is_subring</span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6472..6477"><span>assms</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_9383..9384"><span>d</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9530..9532">by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9549..9555">k_carr</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6472..6477"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_9383..9384"><span>d</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_9608..9620">fst_x_k_carr</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>fst</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span>  </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6813..6815"><span>a1</span></a><span> </span><span>PiE_def</span><span> </span><span>Pi_def</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>eval</span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>eval</span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>eval</span><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="skolem"><span>k</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7785..7791"><span>r_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_9530..9532"><span>s.hom_add</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7833..7839"><span>y_poly</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7106..7112"><span>w_carr</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>fst</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>local.eval</span><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>local.eval</span><span> </span><span class="skolem"><span>w</span></span><span> </span><span class="skolem"><span>k</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7723..7729"><span>y_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>interpolate_eval</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6472..6477"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6472..6477"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> _ </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_9383..9384"><span>d</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>image_subsetI</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7246..7258"><span>w_eval_range</span></a><span> </span><span>subsetD</span><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6472..6477"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_9608..9620"><span>fst_x_k_carr</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>fst</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>k</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_9608..9620"><span>fst_x_k_carr</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_9383..9384"><span>d</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_7246..7258"><span>w_eval_range</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_9549..9555"><span>k_carr</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>a_minus_def</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>a_assoc</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>a_comm</span><span> </span><span>r_neg</span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>eval</span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>fst</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>k</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>r</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>(</span></span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_8344..8350"><span>r_poly</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_3394..3404"><span>split_poly</span></a><span> </span><span class="free"><span>K</span></span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6472..6477"><span>split_poly_def</span></a><span> </span><span>prod_eq_iff</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>conjI</span><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ext</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>restrict_def</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>conjI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_9311..9317"><span>eval_r</span></a><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>PiE_E</span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6813..6815"><span>a1</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>ext</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_8447..8454"><span>coeff_r</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_3394..3404"><span>split_poly</span></a><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>(</span></span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>This is like </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> [</span><span>source</span><span>] </span><span>card_vimage_inj</span><span class="antiquote"><span>}</span></span></span><span> but supports </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span>inj_on</span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span> instead.</span><span>âº</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10822..10827">lemma</span></span></span><span> </span><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.card_vimage_inj_on|fact"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.card_vimage_inj_on|thm"><span>card_vimage_inj_on</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>inj_on</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>-`</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>-`</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_10822..10827"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_10822..10827"><span>assms</span></a><span> </span><span>card_image</span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>inf_le2</span><span> </span><span>inj_on_subset</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11072..11077">lemma</span></span></span><span> </span><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.inv_subsetI|fact"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.inv_subsetI|thm"><span>inv_subsetI</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>C</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><span>-`</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>C</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_11072..11077"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The following establishes the main result of this section: There are $\lvert F \rvert^{n-k}$
</span><span>polynomials of degree less than $n$ interpolating $k \leq n$ points.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11350..11357">theorem</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>field</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.field.interpolating_polynomials_card|fact"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.field.interpolating_polynomials_card|thm"><span class="entity_def" id="offset_11369..11399">interpolating_polynomials_card</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>K</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>Ï</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials|const"><span>bounded_degree_polynomials</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>.</span></span><span> </span><span>eval</span><span> </span><span class="bound"><span>Ï</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="var"><span>?A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="var"><span>?B</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_11622..11628">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>z</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>z</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>restrict</span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>K</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_11658..11664">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>M</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span>range</span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>â§</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span class="bound"><span>k</span></span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_11733..11747">inj_on_bounded</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>inj_on</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_3394..3404"><span>split_poly</span></a><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_4945..4959"><span>split_poly_inj</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_11350..11357"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_11350..11357"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_11861..11862">a</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?A</span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_3394..3404"><span>split_poly</span></a><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>-`</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="skolem"><span>z</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>Ã</span></span><span> </span><span class="skolem"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>subsetI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_11350..11357"><span>split_poly_def</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_11622..11628"><span>z_def</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_11658..11664"><span>M_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>conjI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>restrict_ext</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>conjI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>subsetI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials_def|fact"><span>bounded_degree_polynomials_def</span></a><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>coeff_in_carrier</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>conjI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>allI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span>impI</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><span>coeff_length</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials_def|fact"><span>bounded_degree_polynomials_def</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>force</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials_def|fact"><span>bounded_degree_polynomials_def</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_12337..12339">b1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>â</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>Î»</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span>coeff</span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>card</span><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â¥</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>card</span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â¹</span></span><span> </span><span>coeff</span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>ð¬</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_11658..11664"><span>M_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Nat.le_diff_conv2</span><span> </span><span>Nat.le_imp_diff_is_add</span><span> </span><span>add_leD2</span><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_12514..12515">b</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_3394..3404"><span>split_poly</span></a><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>-`</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="skolem"><span>z</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>Ã</span></span><span> </span><span class="skolem"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="var"><span>?A</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#Interpolation_Polynomial_Cardinalities.inv_subsetI|fact"><span>inv_subsetI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_11350..11357"><span>split_poly_def</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_11622..11628"><span>z_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>conjI</span><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>poly_degree_bound_from_coeff_1</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_12337..12339"><span>b1</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>restrict_apply'</span><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="var"><span>?A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_3394..3404"><span>split_poly</span></a><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>-`</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="skolem"><span>z</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>Ã</span></span><span> </span><span class="skolem"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>â©</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>arg_cong</span><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> f</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>order_antisym</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_11861..11862"><span>a</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_12514..12515"><span>b</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="skolem"><span>z</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>Ã</span></span><span> </span><span class="skolem"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#Interpolation_Polynomial_Cardinalities.card_vimage_inj_on|fact"><span>card_vimage_inj_on</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_11733..11747"><span>inj_on_bounded</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>order_trans</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_6489..6505"><span>split_poly_image</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_11350..11357"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_11350..11357"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>subsetI</span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>mem_Times_iff</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_11622..11628"><span>z_def</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_11658..11664"><span>M_def</span></a><span> </span><span>Pi_def</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_11350..11357"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>card_cartesian_product</span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_11658..11664"><span>M_def</span></a><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.card_mostly_constant_maps|fact"><span>card_mostly_constant_maps</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>A corollary is the classic result~\cite[Theorem 7.15]{shoup2009computational} that there is 
</span><span>exactly one polynomial of degree less than $n$ interpolating $n$ points:</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13530..13539">corollary</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>field</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.field.interpolating_polynomial_one|fact"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.field.interpolating_polynomial_one|thm"><span class="entity_def" id="offset_13551..13579">interpolating_polynomial_one</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>K</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>Ï</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials|const"><span>bounded_degree_polynomials</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>.</span></span><span> </span><span>eval</span><span> </span><span class="bound"><span>Ï</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_11369..11399"><span>interpolating_polynomials_card</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_13530..13539"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_13530..13539"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_13530..13539"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> n</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>0</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>In the case of fields with infinite carriers, it is possible to conclude that there are
</span><span>infinitely many polynomials of degree less than $n$ interpolating $k &lt; n$ points.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_14019..14028">corollary</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>field</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.field.interpolating_polynomial_inf|fact"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.field.interpolating_polynomial_inf|thm"><span>interpolating_polynomial_inf</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>infinite</span><span> </span><span class="main"><span>(</span></span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>K</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><span>`</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>infinite</span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>Ï</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials|const"><span>bounded_degree_polynomials</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>.</span></span><span> </span><span>eval</span><span> </span><span class="bound"><span>Ï</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>infinite</span><span> </span><span class="var"><span>?A</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>Ï</span></span></span><span> </span><span class="main"><span>â</span></span><span> </span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials|const"><span>bounded_degree_polynomials</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>(</span></span><span>card</span><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>â</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>.</span></span><span> </span><span>eval</span><span> </span><span class="bound"><span>Ï</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_13551..13579"><span>interpolating_polynomial_one</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_14019..14028"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_14019..14028"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_14019..14028"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span class="var"><span>?A</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>subsetI</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="Bounded_Degree_Polynomials.html#Bounded_Degree_Polynomials.bounded_degree_polynomials_def|fact"><span>bounded_degree_polynomials_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>linarith</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_14600..14601">a</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?A</span></span><span> </span><span class="main"><span>â </span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="var"><span>?A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span> </span><span class="main"><span>(</span></span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span class="main"><span>^</span></span><span class="free"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_11369..11399"><span>interpolating_polynomials_card</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_14019..14028"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_14019..14028"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_14019..14028"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> n</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>...</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_14019..14028"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_14019..14028"><span>assms</span></a><span class="main"><span>(</span></span><span>5</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_14825..14826">b</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span>card</span><span> </span><span class="var"><span>?A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_14600..14601"><span>a</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_14825..14826"><span>b</span></a><span> </span><span>card_0_eq</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>â¹</span><span>The following is an additional independent result: The evaluation homomorphism is injective
</span><span>for degree one polynomials.</span><span>âº</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15027..15032">lemma</span></span></span><span>  </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span>field</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.field.eval_inj_if_degree_1|fact"><span class="entity_def" id="Interpolation_Polynomial_Cardinalities.field.eval_inj_if_degree_1|thm"><span>eval_inj_if_degree_1</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>p</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="main"><span>(</span></span><span>poly_ring</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>degree</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>inj_on</span><span> </span><span class="main"><span>(</span></span><span>eval</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>inj_onI</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>y</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_15198..15200">a1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_15227..15229">a2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_15256..15258">a3</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>eval</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>eval</span><span> </span><span class="free"><span>p</span></span><span> </span><span class="skolem"><span>y</span></span><span>"</span></span></span><span>

  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>u</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>v</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_15302..15307">p_def</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>p</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>u</span></span><span class="main"><span>,</span></span><span class="skolem"><span>v</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_15027..15032"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="free"><span>p</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>cases</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>tl</span><span> </span><span class="free"><span>p</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>auto</span></span><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_15386..15392">u_carr</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>u</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>ð¬</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_15302..15307"><span>p_def</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_15027..15032"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_15450..15456">v_carr</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>v</span></span><span> </span><span class="main"><span>â</span></span><span> </span><span>carrier</span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_15302..15307"><span>p_def</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_15027..15032"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="skolem"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_15386..15392"><span>u_carr</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_15198..15200"><span>a1</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_15227..15229"><span>a2</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_15256..15258"><span>a3</span></a><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_15450..15456"><span>v_carr</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Interpolation_Polynomial_Cardinalities.html#offset_15302..15307"><span>p_def</span></a><span> </span><span>local.field_Units</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre></div>