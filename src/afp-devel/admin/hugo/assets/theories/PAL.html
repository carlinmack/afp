<div id="PAL">
<div class="head">
<h1>Theory PAL</h1>
</div>
<pre class="source"><span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹Public Announcement Logic (PAL) in HOL›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹An earlier encoding and automation of the wise men puzzle, utilizing a shallow embedding of 
higher-order (multi-)modal logic in HOL, has been presented in \cite{J41,J44}. However, this work did not 
convincingly address the interaction dynamics between the involved agents. Here we therefore extend and adapt 
the universal (meta-)logical reasoning approach of \cite{J41} for public announcement logic (PAL) and 
we demonstrate how it can be utilized to achieve a convincing encoding and automation of the 
wise men puzzle in HOL, so that also the interaction dynamics as given in the scenario is adequately 
addressed. For further background information on the work presented here we refer to \cite{R78,C90}.›</span></span>

<span class="keyword1"><span class="command">theory</span></span> PAL <span class="keyword2"><span class="keyword">imports</span></span> <a href="https://www.cl.cam.ac.uk/research/hvg/Isabelle/dist/library/HOL/HOL/Main.html">Main</a> <span class="keyword2"><span class="keyword">begin</span></span>  <span class="comment1">(* Sebastian Reiche and Christoph Benzmüller, 2021 *)</span>
<span class="keyword1"><span class="command">nitpick_params</span></span><span class="main">[</span>user_axioms<span class="main">,</span>expect<span class="main">=</span>genuine<span class="main">]</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Type i is associated with possible worlds›</span></span>
 <span class="keyword1"><span class="command">typedecl</span></span> i <span class="comment1">(* Type of possible worlds *)</span>
 <span class="keyword1"><span class="command">type_synonym</span></span> σ <span class="main">=</span> <span class="quoted"><span class="quoted">"i<span class="main">⇒</span>bool"</span></span> <span class="comment1">(*Type of world domains *)</span>
 <span class="keyword1"><span class="command">type_synonym</span></span> τ <span class="main">=</span> <span class="quoted"><span class="quoted">"σ<span class="main">⇒</span>i<span class="main">⇒</span>bool"</span></span> <span class="comment1">(* Type of world depended formulas (truth sets) *)</span> 
 <span class="keyword1"><span class="command">type_synonym</span></span> α <span class="main">=</span> <span class="quoted"><span class="quoted">"i<span class="main">⇒</span>i<span class="main">⇒</span>bool"</span></span> <span class="comment1">(* Type of accessibility relations between world *)</span>
 <span class="keyword1"><span class="command">type_synonym</span></span> ρ <span class="main">=</span> <span class="quoted"><span class="quoted">"α<span class="main">⇒</span>bool"</span></span> <span class="comment1">(* Type of groups of agents *)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Some useful relations (for constraining accessibility relations)›</span></span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">reflexive</span><span class="main">::</span><span class="quoted"><span class="quoted">"α<span class="main">⇒</span>bool"</span></span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">reflexive</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="main">≡</span> <span class="main">∀</span><span class="bound">x</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">x</span> <span class="bound">x</span>"</span></span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">symmetric</span><span class="main">::</span><span class="quoted"><span class="quoted">"α<span class="main">⇒</span>bool"</span></span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">symmetric</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="main">≡</span> <span class="main">∀</span><span class="bound">x</span> <span class="bound">y</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">x</span> <span class="bound">y</span> <span class="main">⟶</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">y</span> <span class="bound">x</span>"</span></span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">transitive</span><span class="main">::</span><span class="quoted"><span class="quoted">"α<span class="main">⇒</span>bool"</span></span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">transitive</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="main">≡</span> <span class="main">∀</span><span class="bound">x</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">x</span> <span class="bound">y</span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">y</span> <span class="bound">z</span> <span class="main">⟶</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">x</span> <span class="bound">z</span>"</span></span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">euclidean</span><span class="main">::</span><span class="quoted"><span class="quoted">"α<span class="main">⇒</span>bool"</span></span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">euclidean</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="main">≡</span> <span class="main">∀</span><span class="bound">x</span> <span class="bound">y</span> <span class="bound">z</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">x</span> <span class="bound">y</span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">x</span> <span class="bound">z</span> <span class="main">⟶</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">y</span> <span class="bound">z</span>"</span></span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">intersection_rel</span><span class="main">::</span><span class="quoted"><span class="quoted">"α<span class="main">⇒</span>α<span class="main">⇒</span>α"</span></span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">intersection_rel</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">≡</span> <span class="main">λ</span><span class="bound">u</span> <span class="bound">v</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">u</span> <span class="bound">v</span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="bound">u</span> <span class="bound">v</span>"</span></span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">union_rel</span><span class="main">::</span><span class="quoted"><span class="quoted">"α<span class="main">⇒</span>α<span class="main">⇒</span>α"</span></span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">union_rel</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">≡</span> <span class="main">λ</span><span class="bound">u</span> <span class="bound">v</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">u</span> <span class="bound">v</span> <span class="main">∨</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="bound">u</span> <span class="bound">v</span>"</span></span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">sub_rel</span><span class="main">::</span><span class="quoted"><span class="quoted">"α<span class="main">⇒</span>α<span class="main">⇒</span>bool"</span></span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">sub_rel</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="main">≡</span> <span class="main">∀</span><span class="bound">u</span> <span class="bound">v</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">u</span> <span class="bound">v</span> <span class="main">⟶</span> <span class="free"><span class="bound"><span class="entity">Q</span></span></span> <span class="bound">u</span> <span class="bound">v</span>"</span></span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">inverse_rel</span><span class="main">::</span><span class="quoted"><span class="quoted">"α<span class="main">⇒</span>α"</span></span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">inverse_rel</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="main">≡</span> <span class="main">λ</span><span class="bound">u</span> <span class="bound">v</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">v</span> <span class="bound">u</span>"</span></span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">big_union_rel</span><span class="main">::</span><span class="quoted"><span class="quoted">"ρ<span class="main">⇒</span>α"</span></span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">big_union_rel</span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">≡</span> <span class="main">λ</span><span class="bound">u</span> <span class="bound">v</span><span class="main">.</span> <span class="main">∃</span><span class="bound">R</span><span class="main">.</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="bound">R</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="bound">R</span> <span class="bound">u</span> <span class="bound">v</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">big_intersection_rel</span><span class="main">::</span><span class="quoted"><span class="quoted">"ρ<span class="main">⇒</span>α"</span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">big_intersection_rel</span> <span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="main">≡</span> <span class="main">λ</span><span class="bound">u</span> <span class="bound">v</span><span class="main">.</span> <span class="main">∀</span><span class="bound">R</span><span class="main">.</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">X</span></span></span> <span class="bound">R</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="bound">R</span> <span class="bound">u</span> <span class="bound">v</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹In HOL the transitive closure of a relation can be defined in a single line.›</span></span>
<span class="keyword1"><span class="command">definition</span></span> <span class="entity">tc</span><span class="main">::</span><span class="quoted"><span class="quoted">"α<span class="main">⇒</span>α"</span></span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">tc</span> <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="main">≡</span> <span class="main">λ</span><span class="bound">x</span> <span class="bound">y</span><span class="main">.</span><span class="main">∀</span><span class="bound">Q</span><span class="main">.</span> transitive <span class="bound">Q</span> <span class="main">⟶</span> <span class="main">(</span>sub_rel <span class="free"><span class="bound"><span class="entity">R</span></span></span> <span class="bound">Q</span> <span class="main">⟶</span> <span class="bound">Q</span> <span class="bound">x</span> <span class="bound">y</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Logical connectives for PAL›</span></span>
<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">patom</span><span class="main">::</span><span class="quoted"><span class="quoted">"σ<span class="main">⇒</span>τ"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>_"</span><span class="main">[</span>79<span class="main">]</span>80<span class="main">)</span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free"><span class="hidden">⇧</span><sup>A</sup></span></span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main">≡</span> <span class="main">λ</span><span class="bound">W</span> <span class="bound">w</span><span class="main">.</span> <span class="bound">W</span> <span class="bound">w</span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="bound">w</span>"</span></span>
<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">ptop</span><span class="main">::</span><span class="quoted"><span class="quoted">"τ"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1"><span class="hidden">❙</span><b>⊤</b></span>"</span><span class="main">)</span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="main"><span class="free"><span class="hidden">❙</span><b>⊤</b></span></span> <span class="main">≡</span> <span class="main">λ</span><span class="bound">W</span> <span class="bound">w</span><span class="main">.</span> True"</span></span> 
<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">pneg</span><span class="main">::</span><span class="quoted"><span class="quoted">"τ<span class="main">⇒</span>τ"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1"><span class="hidden">❙</span><b>¬</b></span>_"</span><span class="main">[</span>52<span class="main">]</span>53<span class="main">)</span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="main"><span class="free"><span class="hidden">❙</span><b>¬</b></span></span><span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="main">≡</span> <span class="main">λ</span><span class="bound">W</span> <span class="bound">w</span><span class="main">.</span> <span class="main">¬</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="bound">W</span> <span class="bound">w</span><span class="main">)</span>"</span></span> 
<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">pand</span><span class="main">::</span><span class="quoted"><span class="quoted">"τ<span class="main">⇒</span>τ<span class="main">⇒</span>τ"</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">infixr</span></span><span class="quoted">"<span class="keyword1"><span class="hidden">❙</span><b>∧</b></span>"</span>51<span class="main">)</span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main"><span class="free"><span class="hidden">❙</span><b>∧</b></span></span><span class="free"><span class="bound"><span class="entity">ψ</span></span></span> <span class="main">≡</span> <span class="main">λ</span><span class="bound">W</span> <span class="bound">w</span><span class="main">.</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="bound">W</span> <span class="bound">w</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">ψ</span></span></span> <span class="bound">W</span> <span class="bound">w</span><span class="main">)</span>"</span></span>   
<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">por</span><span class="main">::</span><span class="quoted"><span class="quoted">"τ<span class="main">⇒</span>τ<span class="main">⇒</span>τ"</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">infixr</span></span><span class="quoted">"<span class="keyword1"><span class="hidden">❙</span><b>∨</b></span>"</span>50<span class="main">)</span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main"><span class="free"><span class="hidden">❙</span><b>∨</b></span></span><span class="free"><span class="bound"><span class="entity">ψ</span></span></span> <span class="main">≡</span> <span class="main">λ</span><span class="bound">W</span> <span class="bound">w</span><span class="main">.</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="bound">W</span> <span class="bound">w</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">ψ</span></span></span> <span class="bound">W</span> <span class="bound">w</span><span class="main">)</span>"</span></span>   
<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">pimp</span><span class="main">::</span><span class="quoted"><span class="quoted">"τ<span class="main">⇒</span>τ<span class="main">⇒</span>τ"</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">infixr</span></span><span class="quoted">"<span class="keyword1"><span class="hidden">❙</span><b>→</b></span>"</span>49<span class="main">)</span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main"><span class="free"><span class="hidden">❙</span><b>→</b></span></span><span class="free"><span class="bound"><span class="entity">ψ</span></span></span> <span class="main">≡</span> <span class="main">λ</span><span class="bound">W</span> <span class="bound">w</span><span class="main">.</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="bound">W</span> <span class="bound">w</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">ψ</span></span></span> <span class="bound">W</span> <span class="bound">w</span><span class="main">)</span>"</span></span>  
<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">pequ</span><span class="main">::</span><span class="quoted"><span class="quoted">"τ<span class="main">⇒</span>τ<span class="main">⇒</span>τ"</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">infixr</span></span><span class="quoted">"<span class="keyword1"><span class="hidden">❙</span><b>↔</b></span>"</span>48<span class="main">)</span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main"><span class="free"><span class="hidden">❙</span><b>↔</b></span></span><span class="free"><span class="bound"><span class="entity">ψ</span></span></span> <span class="main">≡</span> <span class="main">λ</span><span class="bound">W</span> <span class="bound">w</span><span class="main">.</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="bound">W</span> <span class="bound">w</span><span class="main">)</span> <span class="main">⟷</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">ψ</span></span></span> <span class="bound">W</span> <span class="bound">w</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">pknow</span><span class="main">::</span><span class="quoted"><span class="quoted">"α<span class="main">⇒</span>τ<span class="main">⇒</span>τ"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1"><span class="hidden">❙</span><b>K</b></span>_ _"</span><span class="main">)</span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free"><span class="hidden">❙</span><b>K</b></span></span> <span class="free"><span class="bound"><span class="entity">r</span></span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="main">≡</span> <span class="main">λ</span><span class="bound">W</span> <span class="bound">w</span><span class="main">.</span><span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="main">(</span><span class="bound">W</span> <span class="bound">v</span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">r</span></span></span> <span class="bound">w</span> <span class="bound">v</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="bound">W</span> <span class="bound">v</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">ppal</span><span class="main">::</span><span class="quoted"><span class="quoted">"τ<span class="main">⇒</span>τ<span class="main">⇒</span>τ"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1"><span class="hidden">❙</span><b>[</b><span class="hidden">❙</span><b>!</b></span>_<span class="keyword1"><span class="hidden">❙</span><b>]</b></span>_"</span><span class="main">)</span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="main"><span class="free"><span class="hidden">❙</span><b>[</b><span class="hidden">❙</span><b>!</b></span></span><span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main"><span class="free"><span class="hidden">❙</span><b>]</b></span></span><span class="free"><span class="bound"><span class="entity">ψ</span></span></span> <span class="main">≡</span> <span class="main">λ</span><span class="bound">W</span> <span class="bound">w</span><span class="main">.</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="bound">W</span> <span class="bound">w</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">ψ</span></span></span> <span class="main">(</span><span class="main">λ</span><span class="bound">z</span><span class="main">.</span> <span class="bound">W</span> <span class="bound">z</span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="bound">W</span> <span class="bound">z</span><span class="main">)</span> <span class="bound">w</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Glogal validity of PAL formulas›</span></span>
<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">pvalid</span><span class="main">::</span><span class="quoted"><span class="quoted">"τ <span class="main">⇒</span> bool"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1"><span class="hidden">❙</span><b>⌊</b></span>_<span class="keyword1"><span class="hidden">❙</span><b>⌋</b></span>"</span><span class="main">[</span>7<span class="main">]</span>8<span class="main">)</span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="main"><span class="free"><span class="hidden">❙</span><b>⌊</b></span></span><span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main"><span class="free"><span class="hidden">❙</span><b>⌋</b></span></span> <span class="main">≡</span> <span class="main">∀</span><span class="bound">W</span><span class="main">.</span><span class="main">∀</span><span class="bound">w</span><span class="main">.</span> <span class="bound">W</span> <span class="bound">w</span> <span class="main">⟶</span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="bound">W</span> <span class="bound">w</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Introducing agent knowledge (K), mutual knowledge (E), distributed knowledge (D) and common knowledge (C).›</span></span>
<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">EVR</span><span class="main">::</span><span class="quoted"><span class="quoted">"ρ<span class="main">⇒</span>α"</span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">EVR</span> <span class="free"><span class="bound"><span class="entity">G</span></span></span> <span class="main">≡</span> big_union_rel <span class="free"><span class="bound"><span class="entity">G</span></span></span>"</span></span>
<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">DIS</span><span class="main">::</span><span class="quoted"><span class="quoted">"ρ<span class="main">⇒</span>α"</span></span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">DIS</span> <span class="free"><span class="bound"><span class="entity">G</span></span></span> <span class="main">≡</span> big_intersection_rel <span class="free"><span class="bound"><span class="entity">G</span></span></span>"</span></span>
<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">agttknows</span><span class="main">::</span><span class="quoted"><span class="quoted">"α<span class="main">⇒</span>τ<span class="main">⇒</span>τ"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1"><span class="hidden">❙</span><b>K</b>⇩</span>_ _"</span><span class="main">)</span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free"><span class="hidden">❙</span><b>K</b>⇩</span></span><span class="free"><span class="bound"><span class="entity">r</span></span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="main">≡</span>  <span class="keyword1"><span class="hidden">❙</span><b>K</b></span> <span class="free"><span class="bound"><span class="entity">r</span></span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span>"</span></span> 
<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">evrknows</span><span class="main">::</span><span class="quoted"><span class="quoted">"ρ<span class="main">⇒</span>τ<span class="main">⇒</span>τ"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1"><span class="hidden">❙</span><b>E</b>⇩</span>_ _"</span><span class="main">)</span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free"><span class="hidden">❙</span><b>E</b>⇩</span></span><span class="free"><span class="bound"><span class="entity">G</span></span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="main">≡</span>  <span class="keyword1"><span class="hidden">❙</span><b>K</b></span> <span class="main">(</span>EVR <span class="free"><span class="bound"><span class="entity">G</span></span></span><span class="main">)</span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span>"</span></span>
<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">disknows</span> <span class="main">::</span> <span class="quoted"><span class="quoted">"ρ<span class="main">⇒</span>τ<span class="main">⇒</span>τ"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1"><span class="hidden">❙</span><b>D</b>⇩</span>_ _"</span><span class="main">)</span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free"><span class="hidden">❙</span><b>D</b>⇩</span></span><span class="free"><span class="bound"><span class="entity">G</span></span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="main">≡</span> <span class="keyword1"><span class="hidden">❙</span><b>K</b></span> <span class="main">(</span>DIS <span class="free"><span class="bound"><span class="entity">G</span></span></span><span class="main">)</span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span>"</span></span>
<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">prck</span><span class="main">::</span><span class="quoted"><span class="quoted">"ρ<span class="main">⇒</span>τ<span class="main">⇒</span>τ<span class="main">⇒</span>τ"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1"><span class="hidden">❙</span><b>C</b>⇩</span>_<span class="keyword1"><span class="hidden">❙</span><b>⦇</b></span>_<span class="keyword1"><span class="hidden">❙</span><b>|</b></span>_<span class="keyword1"><span class="hidden">❙</span><b>⦈</b></span>"</span><span class="main">)</span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free"><span class="hidden">❙</span><b>C</b>⇩</span></span><span class="free"><span class="bound"><span class="entity">G</span></span></span><span class="main"><span class="free"><span class="hidden">❙</span><b>⦇</b></span></span><span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main"><span class="free"><span class="hidden">❙</span><b>|</b></span></span><span class="free"><span class="bound"><span class="entity">ψ</span></span></span><span class="main"><span class="free"><span class="hidden">❙</span><b>⦈</b></span></span> <span class="main">≡</span> <span class="main">λ</span><span class="bound">W</span> <span class="bound">w</span><span class="main">.</span> <span class="main">∀</span><span class="bound">v</span><span class="main">.</span> <span class="main">(</span>tc <span class="main">(</span>intersection_rel <span class="main">(</span>EVR <span class="free"><span class="bound"><span class="entity">G</span></span></span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">u</span> <span class="bound">v</span><span class="main">.</span> <span class="bound">W</span> <span class="bound">v</span> <span class="main">∧</span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="bound">W</span> <span class="bound">v</span><span class="main">)</span><span class="main">)</span> <span class="bound">w</span> <span class="bound">v</span><span class="main">)</span> <span class="main">⟶</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">ψ</span></span></span> <span class="bound">W</span> <span class="bound">v</span><span class="main">)</span>"</span></span>
<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">pcmn</span><span class="main">::</span><span class="quoted"><span class="quoted">"ρ<span class="main">⇒</span>τ<span class="main">⇒</span>τ"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1"><span class="hidden">❙</span><b>C</b>⇩</span>_ _"</span><span class="main">)</span> 
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free"><span class="hidden">❙</span><b>C</b>⇩</span></span><span class="free"><span class="bound"><span class="entity">G</span></span></span> <span class="free"><span class="bound"><span class="entity">φ</span></span></span> <span class="main">≡</span>  <span class="keyword1"><span class="hidden">❙</span><b>C</b>⇩</span><span class="free"><span class="bound"><span class="entity">G</span></span></span><span class="main"><span class="hidden">❙</span><b>⦇</b></span><span class="main"><span class="hidden">❙</span><b>⊤</b></span><span class="main"><span class="hidden">❙</span><b>|</b></span><span class="free"><span class="bound"><span class="entity">φ</span></span></span><span class="main"><span class="hidden">❙</span><b>⦈</b></span>"</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Postulating S5 principles for the agent’s accessibility relations.›</span></span>
<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">S5Agent</span><span class="main">::</span><span class="quoted"><span class="quoted">"α<span class="main">⇒</span>bool"</span></span>
  <span class="keyword2"><span class="keyword">where</span></span>  <span class="quoted"><span class="quoted">"<span class="free">S5Agent</span> <span class="free"><span class="bound"><span class="entity">i</span></span></span> <span class="main">≡</span> reflexive <span class="free"><span class="bound"><span class="entity">i</span></span></span> <span class="main">∧</span> transitive <span class="free"><span class="bound"><span class="entity">i</span></span></span> <span class="main">∧</span> euclidean <span class="free"><span class="bound"><span class="entity">i</span></span></span>"</span></span>
<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">S5Agents</span><span class="main">::</span><span class="quoted"><span class="quoted">"ρ<span class="main">⇒</span>bool"</span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="free">S5Agents</span> <span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="main">≡</span> <span class="main">∀</span><span class="bound">i</span><span class="main">.</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">A</span></span></span> <span class="bound">i</span> <span class="main">⟶</span> S5Agent <span class="bound">i</span><span class="main">)</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Introducing "Defs" as the set of the above definitions; useful for convenient unfolding.›</span></span>
<span class="keyword1"><span class="command">named_theorems</span></span> Defs
<span class="keyword1"><span class="command">declare</span></span> reflexive_def<span class="main">[</span><span class="operator">Defs</span><span class="main">]</span> symmetric_def<span class="main">[</span><span class="operator">Defs</span><span class="main">]</span> transitive_def<span class="main">[</span><span class="operator">Defs</span><span class="main">]</span> 
  euclidean_def<span class="main">[</span><span class="operator">Defs</span><span class="main">]</span> intersection_rel_def<span class="main">[</span><span class="operator">Defs</span><span class="main">]</span> union_rel_def<span class="main">[</span><span class="operator">Defs</span><span class="main">]</span> 
  sub_rel_def<span class="main">[</span><span class="operator">Defs</span><span class="main">]</span> inverse_rel_def<span class="main">[</span><span class="operator">Defs</span><span class="main">]</span> big_union_rel_def<span class="main">[</span><span class="operator">Defs</span><span class="main">]</span> 
  big_intersection_rel_def<span class="main">[</span><span class="operator">Defs</span><span class="main">]</span> tc_def<span class="main">[</span><span class="operator">Defs</span><span class="main">]</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Consistency: nitpick reports a model.›</span></span>
 <span class="keyword1"><span class="command">lemma</span></span> <span class="quoted">True</span> <span class="keyword1"><span class="command">nitpick</span></span> <span class="main">[</span>satisfy<span class="main">]</span> <span class="keyword1"><span class="command">oops</span></span> <span class="comment1">(* model found *)</span>


<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">‹Automating the Wise Men Puzzle›</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Agents are modeled as accessibility relations.›</span></span>
<span class="keyword1"><span class="command">consts</span></span> a<span class="main">::</span><span class="quoted"><span class="quoted">"α"</span></span> b<span class="main">::</span><span class="quoted"><span class="quoted">"α"</span></span> c<span class="main">::</span><span class="quoted"><span class="quoted">"α"</span></span> 
<span class="keyword1"><span class="command">abbreviation</span></span>  <span class="entity">Agent</span><span class="main">::</span><span class="quoted"><span class="quoted">"α<span class="main">⇒</span>bool"</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1">𝒜</span>"</span><span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">"<span class="keyword1"><span class="free">𝒜</span></span> <span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="main">≡</span> <span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="main">=</span> a <span class="main">∨</span> <span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="main">=</span> b <span class="main">∨</span> <span class="free"><span class="bound"><span class="entity">x</span></span></span> <span class="main">=</span> c"</span></span>
<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span>  group_S5<span class="main">:</span> <span class="quoted"><span class="quoted">"S5Agents <span class="keyword1">𝒜</span>"</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Common knowledge: At least one of a, b and c has a white spot.›</span></span>
<span class="keyword1"><span class="command">consts</span></span> ws<span class="main">::</span><span class="quoted"><span class="quoted">"α<span class="main">⇒</span>σ"</span></span> 
<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span> WM1<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main"><span class="hidden">❙</span><b>⌊</b></span><span class="keyword1"><span class="hidden">❙</span><b>C</b>⇩</span><span class="keyword1">𝒜</span> <span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws a <span class="main"><span class="hidden">❙</span><b>∨</b></span> <span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws b <span class="main"><span class="hidden">❙</span><b>∨</b></span> <span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws c<span class="main">)</span><span class="main"><span class="hidden">❙</span><b>⌋</b></span>"</span></span> 

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Common knowledge: If x does not have a white spot then y knows this.›</span></span>
<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  WM2ab<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main"><span class="hidden">❙</span><b>⌊</b></span><span class="keyword1"><span class="hidden">❙</span><b>C</b>⇩</span><span class="keyword1">𝒜</span> <span class="main">(</span><span class="main"><span class="hidden">❙</span><b>¬</b></span><span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws a<span class="main">)</span> <span class="main"><span class="hidden">❙</span><b>→</b></span> <span class="main">(</span><span class="keyword1"><span class="hidden">❙</span><b>K</b>⇩</span>b <span class="main">(</span><span class="main"><span class="hidden">❙</span><b>¬</b></span><span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws a<span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main"><span class="hidden">❙</span><b>⌋</b></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
  WM2ac<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main"><span class="hidden">❙</span><b>⌊</b></span><span class="keyword1"><span class="hidden">❙</span><b>C</b>⇩</span><span class="keyword1">𝒜</span> <span class="main">(</span><span class="main"><span class="hidden">❙</span><b>¬</b></span><span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws a<span class="main">)</span> <span class="main"><span class="hidden">❙</span><b>→</b></span> <span class="main">(</span><span class="keyword1"><span class="hidden">❙</span><b>K</b>⇩</span>c <span class="main">(</span><span class="main"><span class="hidden">❙</span><b>¬</b></span><span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws a<span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main"><span class="hidden">❙</span><b>⌋</b></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
  WM2ba<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main"><span class="hidden">❙</span><b>⌊</b></span><span class="keyword1"><span class="hidden">❙</span><b>C</b>⇩</span><span class="keyword1">𝒜</span> <span class="main">(</span><span class="main"><span class="hidden">❙</span><b>¬</b></span><span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws b<span class="main">)</span> <span class="main"><span class="hidden">❙</span><b>→</b></span> <span class="main">(</span><span class="keyword1"><span class="hidden">❙</span><b>K</b>⇩</span>a <span class="main">(</span><span class="main"><span class="hidden">❙</span><b>¬</b></span><span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws b<span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main"><span class="hidden">❙</span><b>⌋</b></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
  WM2bc<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main"><span class="hidden">❙</span><b>⌊</b></span><span class="keyword1"><span class="hidden">❙</span><b>C</b>⇩</span><span class="keyword1">𝒜</span> <span class="main">(</span><span class="main"><span class="hidden">❙</span><b>¬</b></span><span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws b<span class="main">)</span> <span class="main"><span class="hidden">❙</span><b>→</b></span> <span class="main">(</span><span class="keyword1"><span class="hidden">❙</span><b>K</b>⇩</span>c <span class="main">(</span><span class="main"><span class="hidden">❙</span><b>¬</b></span><span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws b<span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main"><span class="hidden">❙</span><b>⌋</b></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
  WM2ca<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main"><span class="hidden">❙</span><b>⌊</b></span><span class="keyword1"><span class="hidden">❙</span><b>C</b>⇩</span><span class="keyword1">𝒜</span> <span class="main">(</span><span class="main"><span class="hidden">❙</span><b>¬</b></span><span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws c<span class="main">)</span> <span class="main"><span class="hidden">❙</span><b>→</b></span> <span class="main">(</span><span class="keyword1"><span class="hidden">❙</span><b>K</b>⇩</span>a <span class="main">(</span><span class="main"><span class="hidden">❙</span><b>¬</b></span><span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws c<span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main"><span class="hidden">❙</span><b>⌋</b></span>"</span></span> <span class="keyword2"><span class="keyword">and</span></span>
  WM2cb<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main"><span class="hidden">❙</span><b>⌊</b></span><span class="keyword1"><span class="hidden">❙</span><b>C</b>⇩</span><span class="keyword1">𝒜</span> <span class="main">(</span><span class="main"><span class="hidden">❙</span><b>¬</b></span><span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws c<span class="main">)</span> <span class="main"><span class="hidden">❙</span><b>→</b></span> <span class="main">(</span><span class="keyword1"><span class="hidden">❙</span><b>K</b>⇩</span>b <span class="main">(</span><span class="main"><span class="hidden">❙</span><b>¬</b></span><span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws c<span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main"><span class="hidden">❙</span><b>⌋</b></span>"</span></span> 

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Positive introspection principles are implied.›</span></span>
<span class="keyword1" id="PAL-WM2ab'"><span class="command">lemma</span></span> WM2ab'<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main"><span class="hidden">❙</span><b>⌊</b></span><span class="keyword1"><span class="hidden">❙</span><b>C</b>⇩</span><span class="keyword1">𝒜</span> <span class="main">(</span><span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws a<span class="main">)</span> <span class="main"><span class="hidden">❙</span><b>→</b></span> <span class="keyword1"><span class="hidden">❙</span><b>K</b>⇩</span>b <span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws a<span class="main">)</span><span class="main">)</span><span class="main"><span class="hidden">❙</span><b>⌋</b></span>"</span></span> 
  <span class="keyword1"><span class="command">using</span></span> WM2ab group_S5 <span class="keyword1"><span class="command">unfolding</span></span> <span class="dynamic"><span class="dynamic">Defs</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
<span class="keyword1" id="PAL-WM2ac'"><span class="command">lemma</span></span> WM2ac'<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main"><span class="hidden">❙</span><b>⌊</b></span><span class="keyword1"><span class="hidden">❙</span><b>C</b>⇩</span><span class="keyword1">𝒜</span> <span class="main">(</span><span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws a<span class="main">)</span> <span class="main"><span class="hidden">❙</span><b>→</b></span> <span class="keyword1"><span class="hidden">❙</span><b>K</b>⇩</span>c <span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws a<span class="main">)</span><span class="main">)</span><span class="main"><span class="hidden">❙</span><b>⌋</b></span>"</span></span> 
  <span class="keyword1"><span class="command">using</span></span> WM2ac group_S5 <span class="keyword1"><span class="command">unfolding</span></span> <span class="dynamic"><span class="dynamic">Defs</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
<span class="keyword1" id="PAL-WM2ba'"><span class="command">lemma</span></span> WM2ba'<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main"><span class="hidden">❙</span><b>⌊</b></span><span class="keyword1"><span class="hidden">❙</span><b>C</b>⇩</span><span class="keyword1">𝒜</span> <span class="main">(</span><span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws b<span class="main">)</span> <span class="main"><span class="hidden">❙</span><b>→</b></span> <span class="keyword1"><span class="hidden">❙</span><b>K</b>⇩</span>a <span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws b<span class="main">)</span><span class="main">)</span><span class="main"><span class="hidden">❙</span><b>⌋</b></span>"</span></span> 
  <span class="keyword1"><span class="command">using</span></span> WM2ba group_S5 <span class="keyword1"><span class="command">unfolding</span></span> <span class="dynamic"><span class="dynamic">Defs</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
<span class="keyword1" id="PAL-WM2bc'"><span class="command">lemma</span></span> WM2bc'<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main"><span class="hidden">❙</span><b>⌊</b></span><span class="keyword1"><span class="hidden">❙</span><b>C</b>⇩</span><span class="keyword1">𝒜</span> <span class="main">(</span><span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws b<span class="main">)</span> <span class="main"><span class="hidden">❙</span><b>→</b></span> <span class="keyword1"><span class="hidden">❙</span><b>K</b>⇩</span>c <span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws b<span class="main">)</span><span class="main">)</span><span class="main"><span class="hidden">❙</span><b>⌋</b></span>"</span></span> 
  <span class="keyword1"><span class="command">using</span></span> WM2bc group_S5 <span class="keyword1"><span class="command">unfolding</span></span> <span class="dynamic"><span class="dynamic">Defs</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
<span class="keyword1" id="PAL-WM2ca'"><span class="command">lemma</span></span> WM2ca'<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main"><span class="hidden">❙</span><b>⌊</b></span><span class="keyword1"><span class="hidden">❙</span><b>C</b>⇩</span><span class="keyword1">𝒜</span> <span class="main">(</span><span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws c<span class="main">)</span> <span class="main"><span class="hidden">❙</span><b>→</b></span> <span class="keyword1"><span class="hidden">❙</span><b>K</b>⇩</span>a <span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws c<span class="main">)</span><span class="main">)</span><span class="main"><span class="hidden">❙</span><b>⌋</b></span>"</span></span> 
  <span class="keyword1"><span class="command">using</span></span> WM2ca group_S5 <span class="keyword1"><span class="command">unfolding</span></span> <span class="dynamic"><span class="dynamic">Defs</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
<span class="keyword1" id="PAL-WM2cb'"><span class="command">lemma</span></span> WM2cb'<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main"><span class="hidden">❙</span><b>⌊</b></span><span class="keyword1"><span class="hidden">❙</span><b>C</b>⇩</span><span class="keyword1">𝒜</span> <span class="main">(</span><span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws c<span class="main">)</span> <span class="main"><span class="hidden">❙</span><b>→</b></span> <span class="keyword1"><span class="hidden">❙</span><b>K</b>⇩</span>b <span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws c<span class="main">)</span><span class="main">)</span><span class="main"><span class="hidden">❙</span><b>⌋</b></span>"</span></span> 
  <span class="keyword1"><span class="command">using</span></span> WM2cb group_S5 <span class="keyword1"><span class="command">unfolding</span></span> <span class="dynamic"><span class="dynamic">Defs</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Automated solutions of the Wise Men Puzzle.›</span></span>
<span class="keyword1"><span class="command">theorem</span></span> whitespot_c<span class="main">:</span> <span class="quoted"><span class="quoted">"<span class="main"><span class="hidden">❙</span><b>⌊</b></span><span class="main"><span class="hidden">❙</span><b>[</b><span class="hidden">❙</span><b>!</b></span><span class="main"><span class="hidden">❙</span><b>¬</b></span><span class="keyword1"><span class="hidden">❙</span><b>K</b>⇩</span>a<span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws a<span class="main">)</span><span class="main"><span class="hidden">❙</span><b>]</b></span><span class="main">(</span><span class="main"><span class="hidden">❙</span><b>[</b><span class="hidden">❙</span><b>!</b></span><span class="main"><span class="hidden">❙</span><b>¬</b></span><span class="keyword1"><span class="hidden">❙</span><b>K</b>⇩</span>b<span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws b<span class="main">)</span><span class="main"><span class="hidden">❙</span><b>]</b></span><span class="main">(</span><span class="keyword1"><span class="hidden">❙</span><b>K</b>⇩</span>c <span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws c<span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main"><span class="hidden">❙</span><b>⌋</b></span>"</span></span> 
  <span class="keyword1"><span class="command">using</span></span> WM1 WM2ba WM2ca WM2cb <span class="keyword1"><span class="command">unfolding</span></span> <span class="dynamic"><span class="dynamic">Defs</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> <span class="main"><span class="main">(</span></span>verit<span class="main"><span class="main">)</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹For the following, alternative formulation a proof is found by sledgehammer, while the
reconstruction of this proof using trusted methods (often) fails; this hints at further opportunities to
improve the reasoning tools in Isabelle/HOL.›</span></span>
<span class="keyword1"><span class="command">theorem</span></span> whitespot_c'<span class="main">:</span>
  <span class="quoted"><span class="quoted">"<span class="main"><span class="hidden">❙</span><b>⌊</b></span><span class="main"><span class="hidden">❙</span><b>[</b><span class="hidden">❙</span><b>!</b></span><span class="main"><span class="hidden">❙</span><b>¬</b></span><span class="main">(</span><span class="main">(</span><span class="keyword1"><span class="hidden">❙</span><b>K</b>⇩</span>a <span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws a<span class="main">)</span><span class="main">)</span> <span class="main"><span class="hidden">❙</span><b>∨</b></span> <span class="main">(</span><span class="keyword1"><span class="hidden">❙</span><b>K</b>⇩</span>a <span class="main">(</span><span class="main"><span class="hidden">❙</span><b>¬</b></span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws a<span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main"><span class="hidden">❙</span><b>]</b></span><span class="main">(</span><span class="main"><span class="hidden">❙</span><b>[</b><span class="hidden">❙</span><b>!</b></span><span class="main"><span class="hidden">❙</span><b>¬</b></span><span class="main">(</span><span class="main">(</span><span class="keyword1"><span class="hidden">❙</span><b>K</b>⇩</span>b <span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws b<span class="main">)</span><span class="main">)</span> <span class="main"><span class="hidden">❙</span><b>∨</b></span> <span class="main">(</span><span class="keyword1"><span class="hidden">❙</span><b>K</b>⇩</span>b <span class="main">(</span><span class="main"><span class="hidden">❙</span><b>¬</b></span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws b<span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main"><span class="hidden">❙</span><b>]</b></span><span class="main">(</span><span class="keyword1"><span class="hidden">❙</span><b>K</b>⇩</span>c <span class="main">(</span><span class="keyword1"><span class="hidden">⇧</span><sup>A</sup></span>ws c<span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main"><span class="hidden">❙</span><b>⌋</b></span>"</span></span>
  <span class="keyword1"><span class="command">using</span></span> WM1 WM2ab WM2ac WM2ba WM2bc WM2ca WM2cb <span class="keyword1"><span class="command">unfolding</span></span> <span class="dynamic"><span class="dynamic">Defs</span></span> 
   <span class="comment1">― ‹sledgehammer by (smt (verit))›</span>
  <span class="keyword1"><span class="command">oops</span></span>
   
<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">‹Consistency: nitpick reports a model.›</span></span>
<span class="keyword1"><span class="command">lemma</span></span> <span class="quoted">True</span> <span class="keyword1"><span class="command">nitpick</span></span> <span class="main">[</span>satisfy<span class="main">]</span> <span class="keyword1"><span class="command">oops</span></span>  
<span class="keyword2"><span class="keyword">end</span></span>





</pre>
</div>