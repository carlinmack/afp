<div id="Epistemic_Logic">
<div class="head">
<h1>Theory Epistemic_Logic</h1>
</div>
<pre class="source"><span class="comment1">(*
  File:      Epistemic_Logic.thy
  Author:    Asta HalkjÃ¦r From

  This work is a formalization of epistemic logic with countably many agents.
  It includes proofs of soundness and completeness for the axiom system K.
  The completeness proof is based on the textbook "Reasoning About Knowledge"
  by Fagin, Halpern, Moses and Vardi (MIT Press 1995).
*)</span>

<span class="keyword1"><span class="command">theory</span></span> Epistemic_Logic <span class="keyword2"><span class="keyword">imports</span></span> <span class="quoted">"<a href="../../HOL/HOL-Library/Countable.html">HOL-Library.Countable</a>"</span> <span class="keyword2"><span class="keyword">begin</span></span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">â€¹Syntaxâ€º</span></span>

<span class="keyword1"><span class="command">type_synonym</span></span> id <span class="main">=</span> <span class="quoted">string</span>

<span class="keyword1"><span class="command">datatype</span></span> <span class="tfree">'i</span> fm
  <span class="main">=</span> FF <span class="main">(</span><span class="quoted">"<span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="hidden">â™</span><b>âŠ¥</b></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>"</span><span class="main">)</span>
  <span class="main">|</span> Pro <span class="quoted">id</span>
  <span class="main">|</span> Dis <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fmâ€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fmâ€º</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">infixr</span></span> <span class="quoted">"<span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="hidden">â™</span><b>âˆ¨</b></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>"</span> 30<span class="main">)</span>
  <span class="main">|</span> Con <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fmâ€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fmâ€º</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">infixr</span></span> <span class="quoted">"<span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="hidden">â™</span><b>âˆ§</b></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>"</span> 35<span class="main">)</span>
  <span class="main">|</span> Imp <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fmâ€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fmâ€º</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">infixr</span></span> <span class="quoted">"<span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="keyword1"><span class="hidden">â™</span><b>âŸ¶</b></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>"</span> 25<span class="main">)</span>
  <span class="main">|</span> K <span class="tfree"><span class="quoted"><span class="tfree">'i</span></span></span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fmâ€º</span></span>

<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">TT</span> <span class="main">(</span><span class="quoted">"<span class="keyword1"><span class="hidden">â™</span><b>âŠ¤</b></span>"</span><span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">â€¹<span class="free">TT</span> <span class="main">â‰¡</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>

<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">Neg</span> <span class="main">(</span><span class="quoted">"<span class="keyword1"><span class="hidden">â™</span><b>Â¬</b></span> _"</span> <span class="main">[</span>40<span class="main">]</span> 40<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">â€¹<span class="free">Neg</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main">â‰¡</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">â€¹Semanticsâ€º</span></span>

<span class="keyword1"><span class="command">datatype</span></span> <span class="main">(</span><span class="tfree">'i</span><span class="main">,</span> <span class="tfree">'s</span><span class="main">)</span> kripke <span class="main">=</span> Kripke <span class="main">(</span><span class="free"><span class="entity">Ï€</span></span><span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'s</span> <span class="main">â‡’</span> id <span class="main">â‡’</span> boolâ€º</span></span><span class="main">)</span> <span class="main">(</span><span class="free"><span class="entity">ğ’¦</span></span><span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> <span class="main">â‡’</span> <span class="tfree">'s</span> <span class="main">â‡’</span> <span class="tfree">'s</span> setâ€º</span></span><span class="main">)</span>

<span class="keyword1"><span class="command">primrec</span></span> <span class="entity">semantics</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="tfree">'i</span><span class="main">,</span> <span class="tfree">'s</span><span class="main">)</span> kripke <span class="main">â‡’</span> <span class="tfree">'s</span> <span class="main">â‡’</span> <span class="tfree">'i</span> fm <span class="main">â‡’</span> boolâ€º</span></span>
  <span class="main">(</span><span class="quoted">"_<span class="keyword1">,</span> _ <span class="keyword1">âŠ¨</span> _"</span> <span class="main">[</span>50<span class="main">,</span>50<span class="main">]</span> 50<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="bound"><span class="entity">_</span></span></span><span class="main"><span class="free">,</span></span> <span class="main"><span class="bound"><span class="entity">_</span></span></span> <span class="main"><span class="free">âŠ¨</span></span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span><span class="main">)</span> <span class="main">=</span> Falseâ€º</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="free"><span class="bound"><span class="entity">M</span></span></span><span class="main"><span class="free">,</span></span> <span class="free"><span class="bound"><span class="entity">s</span></span></span> <span class="main"><span class="free">âŠ¨</span></span> Pro <span class="free"><span class="bound"><span class="entity">i</span></span></span><span class="main">)</span> <span class="main">=</span> Ï€ <span class="free"><span class="bound"><span class="entity">M</span></span></span> <span class="free"><span class="bound"><span class="entity">s</span></span></span> <span class="free"><span class="bound"><span class="entity">i</span></span></span>â€º</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="free"><span class="bound"><span class="entity">M</span></span></span><span class="main"><span class="free">,</span></span> <span class="free"><span class="bound"><span class="entity">s</span></span></span> <span class="main"><span class="free">âŠ¨</span></span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">M</span></span></span><span class="main"><span class="free">,</span></span> <span class="free"><span class="bound"><span class="entity">s</span></span></span> <span class="main"><span class="free">âŠ¨</span></span> <span class="free"><span class="bound"><span class="entity">p</span></span></span><span class="main">)</span> <span class="main">âˆ¨</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">M</span></span></span><span class="main"><span class="free">,</span></span> <span class="free"><span class="bound"><span class="entity">s</span></span></span> <span class="main"><span class="free">âŠ¨</span></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span><span class="main">)</span><span class="main">)</span>â€º</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="free"><span class="bound"><span class="entity">M</span></span></span><span class="main"><span class="free">,</span></span> <span class="free"><span class="bound"><span class="entity">s</span></span></span> <span class="main"><span class="free">âŠ¨</span></span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">M</span></span></span><span class="main"><span class="free">,</span></span> <span class="free"><span class="bound"><span class="entity">s</span></span></span> <span class="main"><span class="free">âŠ¨</span></span> <span class="free"><span class="bound"><span class="entity">p</span></span></span><span class="main">)</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">M</span></span></span><span class="main"><span class="free">,</span></span> <span class="free"><span class="bound"><span class="entity">s</span></span></span> <span class="main"><span class="free">âŠ¨</span></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span><span class="main">)</span><span class="main">)</span>â€º</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="free"><span class="bound"><span class="entity">M</span></span></span><span class="main"><span class="free">,</span></span> <span class="free"><span class="bound"><span class="entity">s</span></span></span> <span class="main"><span class="free">âŠ¨</span></span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="main">(</span><span class="free"><span class="bound"><span class="entity">M</span></span></span><span class="main"><span class="free">,</span></span> <span class="free"><span class="bound"><span class="entity">s</span></span></span> <span class="main"><span class="free">âŠ¨</span></span> <span class="free"><span class="bound"><span class="entity">p</span></span></span><span class="main">)</span> <span class="main">âŸ¶</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">M</span></span></span><span class="main"><span class="free">,</span></span> <span class="free"><span class="bound"><span class="entity">s</span></span></span> <span class="main"><span class="free">âŠ¨</span></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span><span class="main">)</span><span class="main">)</span>â€º</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="free"><span class="bound"><span class="entity">M</span></span></span><span class="main"><span class="free">,</span></span> <span class="free"><span class="bound"><span class="entity">s</span></span></span> <span class="main"><span class="free">âŠ¨</span></span> K <span class="free"><span class="bound"><span class="entity">i</span></span></span> <span class="free"><span class="bound"><span class="entity">p</span></span></span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="main">âˆ€</span><span class="bound">t</span> <span class="main">âˆˆ</span> ğ’¦ <span class="free"><span class="bound"><span class="entity">M</span></span></span> <span class="free"><span class="bound"><span class="entity">i</span></span></span> <span class="free"><span class="bound"><span class="entity">s</span></span></span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">M</span></span></span><span class="main"><span class="free">,</span></span> <span class="bound">t</span> <span class="main"><span class="free">âŠ¨</span></span> <span class="free"><span class="bound"><span class="entity">p</span></span></span><span class="main">)</span>â€º</span></span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">â€¹Utilityâ€º</span></span>

<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">reflexive</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="tfree">'i</span><span class="main">,</span> <span class="tfree">'s</span><span class="main">)</span> kripke <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">â€¹<span class="free">reflexive</span> <span class="free"><span class="bound"><span class="entity">M</span></span></span> <span class="main">â‰¡</span> <span class="main">âˆ€</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">s</span> <span class="main">âˆˆ</span> ğ’¦ <span class="free"><span class="bound"><span class="entity">M</span></span></span> <span class="bound">i</span> <span class="bound">s</span>â€º</span></span>

<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">symmetric</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="tfree">'i</span><span class="main">,</span> <span class="tfree">'s</span><span class="main">)</span> kripke <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">â€¹<span class="free">symmetric</span> <span class="free"><span class="bound"><span class="entity">M</span></span></span> <span class="main">â‰¡</span> <span class="main">âˆ€</span><span class="bound">i</span> <span class="bound">s</span> <span class="bound">t</span><span class="main">.</span> <span class="bound">t</span> <span class="main">âˆˆ</span> ğ’¦ <span class="free"><span class="bound"><span class="entity">M</span></span></span> <span class="bound">i</span> <span class="bound">s</span> <span class="main">âŸ·</span> <span class="bound">s</span> <span class="main">âˆˆ</span> ğ’¦ <span class="free"><span class="bound"><span class="entity">M</span></span></span> <span class="bound">i</span> <span class="bound">t</span>â€º</span></span>

<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">transitive</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="tfree">'i</span><span class="main">,</span> <span class="tfree">'s</span><span class="main">)</span> kripke <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">â€¹<span class="free">transitive</span> <span class="free"><span class="bound"><span class="entity">M</span></span></span> <span class="main">â‰¡</span> <span class="main">âˆ€</span><span class="bound">i</span> <span class="bound">s</span> <span class="bound">t</span> <span class="bound">u</span><span class="main">.</span> <span class="bound">t</span> <span class="main">âˆˆ</span> ğ’¦ <span class="free"><span class="bound"><span class="entity">M</span></span></span> <span class="bound">i</span> <span class="bound">s</span> <span class="main">âˆ§</span> <span class="bound">u</span> <span class="main">âˆˆ</span> ğ’¦ <span class="free"><span class="bound"><span class="entity">M</span></span></span> <span class="bound">i</span> <span class="bound">t</span> <span class="main">âŸ¶</span> <span class="bound">u</span> <span class="main">âˆˆ</span> ğ’¦ <span class="free"><span class="bound"><span class="entity">M</span></span></span> <span class="bound">i</span> <span class="bound">s</span>â€º</span></span>

<span class="keyword1" id="Epistemic_Logic-Imp_intro"><span class="command">lemma</span></span> Imp_intro<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="free">M</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> <span class="free">p</span> <span class="main">âŸ¹</span> <span class="free">M</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> <span class="free">q</span><span class="main">)</span> <span class="main">âŸ¹</span> <span class="free">M</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> Imp <span class="free">p</span> <span class="free">q</span>â€º</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">â€¹S5 Axiomsâ€º</span></span>

<span class="keyword1"><span class="command">theorem</span></span> distribution<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="free">M</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> <span class="main">(</span>K <span class="free">i</span> <span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> K <span class="free">i</span> <span class="main">(</span><span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="free">q</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> K <span class="free">i</span> <span class="free">q</span><span class="main">)</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> Imp_intro<span class="main">)</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">M</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> <span class="main">(</span>K <span class="free">i</span> <span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> K <span class="free">i</span> <span class="main">(</span><span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="free">q</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">M</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> K <span class="free">i</span> <span class="free">p</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">M</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> K <span class="free">i</span> <span class="main">(</span><span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="free">q</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">t</span> <span class="main">âˆˆ</span> ğ’¦ <span class="free">M</span> <span class="free">i</span> <span class="free">s</span><span class="main">.</span> <span class="free">M</span><span class="main">,</span> <span class="bound">t</span> <span class="main">âŠ¨</span> <span class="free">p</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">t</span> <span class="main">âˆˆ</span> ğ’¦ <span class="free">M</span> <span class="free">i</span> <span class="free">s</span><span class="main">.</span> <span class="free">M</span><span class="main">,</span> <span class="bound">t</span> <span class="main">âŠ¨</span> <span class="main">(</span><span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="free">q</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">t</span> <span class="main">âˆˆ</span> ğ’¦ <span class="free">M</span> <span class="free">i</span> <span class="free">s</span><span class="main">.</span> <span class="free">M</span><span class="main">,</span> <span class="bound">t</span> <span class="main">âŠ¨</span> <span class="free">q</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">M</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> K <span class="free">i</span> <span class="free">q</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> generalization<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> valid<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="main">(</span><span class="bound">M</span> <span class="main">::</span> <span class="main">(</span><span class="tfree">'i</span><span class="main">,</span> <span class="tfree">'s</span><span class="main">)</span> kripke<span class="main">)</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">M</span><span class="main">,</span> <span class="bound">s</span> <span class="main">âŠ¨</span> <span class="free">p</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="free">M</span> <span class="main">::</span> <span class="main">(</span><span class="tfree">'i</span><span class="main">,</span> <span class="tfree">'s</span><span class="main">)</span> kripke<span class="main">)</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> K <span class="free">i</span> <span class="free">p</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">t</span> <span class="main">âˆˆ</span> ğ’¦ <span class="free">M</span> <span class="free">i</span> <span class="free">s</span><span class="main">.</span> <span class="free">M</span><span class="main">,</span> <span class="bound">t</span> <span class="main">âŠ¨</span> <span class="free">p</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> valid <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">M</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> K <span class="free">i</span> <span class="free">p</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> truth<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹reflexive <span class="free">M</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">M</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> <span class="main">(</span>K <span class="free">i</span> <span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="free">p</span><span class="main">)</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> Imp_intro<span class="main">)</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">M</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> K <span class="free">i</span> <span class="free">p</span>â€º</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">t</span> <span class="main">âˆˆ</span> ğ’¦ <span class="free">M</span> <span class="free">i</span> <span class="free">s</span><span class="main">.</span> <span class="free">M</span><span class="main">,</span> <span class="bound">t</span> <span class="main">âŠ¨</span> <span class="free">p</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">s</span> <span class="main">âˆˆ</span> ğ’¦ <span class="free">M</span> <span class="free">i</span> <span class="free">s</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹reflexive <span class="free">M</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">M</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> <span class="free">p</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> pos_introspection<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹transitive <span class="free">M</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">M</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> <span class="main">(</span>K <span class="free">i</span> <span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> K <span class="free">i</span> <span class="main">(</span>K <span class="free">i</span> <span class="free">p</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> Imp_intro<span class="main">)</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">M</span><span class="main">,</span><span class="free">s</span> <span class="main">âŠ¨</span> K <span class="free">i</span> <span class="free">p</span>â€º</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">t</span> <span class="main">âˆˆ</span> ğ’¦ <span class="free">M</span> <span class="free">i</span> <span class="free">s</span><span class="main">.</span> <span class="free">M</span><span class="main">,</span> <span class="bound">t</span> <span class="main">âŠ¨</span> <span class="free">p</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">t</span> <span class="main">âˆˆ</span> ğ’¦ <span class="free">M</span> <span class="free">i</span> <span class="free">s</span><span class="main">.</span> <span class="main">âˆ€</span><span class="bound">u</span> <span class="main">âˆˆ</span> ğ’¦ <span class="free">M</span> <span class="free">i</span> <span class="bound">t</span><span class="main">.</span> <span class="free">M</span><span class="main">,</span> <span class="bound">u</span> <span class="main">âŠ¨</span> <span class="free">p</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹transitive <span class="free">M</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">t</span> <span class="main">âˆˆ</span> ğ’¦ <span class="free">M</span> <span class="free">i</span> <span class="free">s</span><span class="main">.</span> <span class="free">M</span><span class="main">,</span> <span class="bound">t</span> <span class="main">âŠ¨</span> K <span class="free">i</span> <span class="free">p</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">M</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> K <span class="free">i</span> <span class="main">(</span>K <span class="free">i</span> <span class="free">p</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> neg_introspection<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹symmetric <span class="free">M</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹transitive <span class="free">M</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">M</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> K <span class="free">i</span> <span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> K <span class="free">i</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> K <span class="free">i</span> <span class="free">p</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> Imp_intro<span class="main">)</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">M</span><span class="main">,</span><span class="free">s</span> <span class="main">âŠ¨</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span>K <span class="free">i</span> <span class="free">p</span><span class="main">)</span>â€º</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">u</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">u</span> <span class="main">âˆˆ</span> ğ’¦ <span class="free">M</span> <span class="free">i</span> <span class="free">s</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">(</span><span class="free">M</span><span class="main">,</span> <span class="skolem">u</span> <span class="main">âŠ¨</span> <span class="free">p</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">t</span> <span class="main">âˆˆ</span> ğ’¦ <span class="free">M</span> <span class="free">i</span> <span class="free">s</span><span class="main">.</span> <span class="skolem">u</span> <span class="main">âˆˆ</span> ğ’¦ <span class="free">M</span> <span class="free">i</span> <span class="bound">t</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">u</span> <span class="main">âˆˆ</span> ğ’¦ <span class="free">M</span> <span class="free">i</span> <span class="free">s</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹symmetric <span class="free">M</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹transitive <span class="free">M</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">t</span> <span class="main">âˆˆ</span> ğ’¦ <span class="free">M</span> <span class="free">i</span> <span class="free">s</span><span class="main">.</span> <span class="free">M</span><span class="main">,</span> <span class="bound">t</span> <span class="main">âŠ¨</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> K <span class="free">i</span> <span class="free">p</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">M</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> K <span class="free">i</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> K <span class="free">i</span> <span class="free">p</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">â€¹Axiom System Kâ€º</span></span>

<span class="keyword1"><span class="command">primrec</span></span> <span class="entity">eval</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span>id <span class="main">â‡’</span> bool<span class="main">)</span> <span class="main">â‡’</span> <span class="main">(</span><span class="tfree">'i</span> fm <span class="main">â‡’</span> bool<span class="main">)</span> <span class="main">â‡’</span> <span class="tfree">'i</span> fm <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">â€¹<span class="free">eval</span> <span class="main"><span class="bound"><span class="entity">_</span></span></span> <span class="main"><span class="bound"><span class="entity">_</span></span></span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span> <span class="main">=</span> Falseâ€º</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">â€¹<span class="free">eval</span> <span class="free"><span class="bound"><span class="entity">g</span></span></span> <span class="main"><span class="bound"><span class="entity">_</span></span></span> <span class="main">(</span>Pro <span class="free"><span class="bound"><span class="entity">i</span></span></span><span class="main">)</span> <span class="main">=</span> <span class="free"><span class="bound"><span class="entity">g</span></span></span> <span class="free"><span class="bound"><span class="entity">i</span></span></span>â€º</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">â€¹<span class="free">eval</span> <span class="free"><span class="bound"><span class="entity">g</span></span></span> <span class="free"><span class="bound"><span class="entity">h</span></span></span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="free">eval</span> <span class="free"><span class="bound"><span class="entity">g</span></span></span> <span class="free"><span class="bound"><span class="entity">h</span></span></span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main">âˆ¨</span> <span class="free">eval</span> <span class="free"><span class="bound"><span class="entity">g</span></span></span> <span class="free"><span class="bound"><span class="entity">h</span></span></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span><span class="main">)</span>â€º</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">â€¹<span class="free">eval</span> <span class="free"><span class="bound"><span class="entity">g</span></span></span> <span class="free"><span class="bound"><span class="entity">h</span></span></span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="free">eval</span> <span class="free"><span class="bound"><span class="entity">g</span></span></span> <span class="free"><span class="bound"><span class="entity">h</span></span></span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main">âˆ§</span> <span class="free">eval</span> <span class="free"><span class="bound"><span class="entity">g</span></span></span> <span class="free"><span class="bound"><span class="entity">h</span></span></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span><span class="main">)</span>â€º</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">â€¹<span class="free">eval</span> <span class="free"><span class="bound"><span class="entity">g</span></span></span> <span class="free"><span class="bound"><span class="entity">h</span></span></span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="free">eval</span> <span class="free"><span class="bound"><span class="entity">g</span></span></span> <span class="free"><span class="bound"><span class="entity">h</span></span></span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main">âŸ¶</span> <span class="free">eval</span> <span class="free"><span class="bound"><span class="entity">g</span></span></span> <span class="free"><span class="bound"><span class="entity">h</span></span></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span><span class="main">)</span>â€º</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">â€¹<span class="free">eval</span> <span class="main"><span class="bound"><span class="entity">_</span></span></span> <span class="free"><span class="bound"><span class="entity">h</span></span></span> <span class="main">(</span>K <span class="free"><span class="bound"><span class="entity">i</span></span></span> <span class="free"><span class="bound"><span class="entity">p</span></span></span><span class="main">)</span> <span class="main">=</span> <span class="free"><span class="bound"><span class="entity">h</span></span></span> <span class="main">(</span>K <span class="free"><span class="bound"><span class="entity">i</span></span></span> <span class="free"><span class="bound"><span class="entity">p</span></span></span><span class="main">)</span>â€º</span></span>

<span class="keyword1"><span class="command">abbreviation</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">tautology</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main">â‰¡</span> <span class="main">âˆ€</span><span class="bound">g</span> <span class="bound">h</span><span class="main">.</span> eval <span class="bound">g</span> <span class="bound">h</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span>â€º</span></span>

<span class="keyword1"><span class="command">inductive</span></span> <span class="entity">SystemK</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fm <span class="main">â‡’</span> boolâ€º</span></span> <span class="main">(</span><span class="quoted">"<span class="keyword1">âŠ¢</span> _"</span> <span class="main">[</span>50<span class="main">]</span> 50<span class="main">)</span> <span class="keyword2"><span class="keyword">where</span></span>
  A1<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹tautology <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main">âŸ¹</span> <span class="main"><span class="free">âŠ¢</span></span> <span class="free"><span class="bound"><span class="entity">p</span></span></span>â€º</span></span>
<span class="main">|</span> A2<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main"><span class="free">âŠ¢</span></span> <span class="main">(</span>K <span class="free"><span class="bound"><span class="entity">i</span></span></span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> K <span class="free"><span class="bound"><span class="entity">i</span></span></span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> K <span class="free"><span class="bound"><span class="entity">i</span></span></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span><span class="main">)</span>â€º</span></span>
<span class="main">|</span> R1<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main"><span class="free">âŠ¢</span></span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main">âŸ¹</span> <span class="main"><span class="free">âŠ¢</span></span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span><span class="main">)</span> <span class="main">âŸ¹</span> <span class="main"><span class="free">âŠ¢</span></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span>â€º</span></span>
<span class="main">|</span> R2<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main"><span class="free">âŠ¢</span></span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main">âŸ¹</span> <span class="main"><span class="free">âŠ¢</span></span> K <span class="free"><span class="bound"><span class="entity">i</span></span></span> <span class="free"><span class="bound"><span class="entity">p</span></span></span>â€º</span></span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">â€¹Soundnessâ€º</span></span>

<span class="keyword1" id="Epistemic_Logic-eval_semantics"><span class="command">lemma</span></span> eval_semantics<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹eval <span class="main">(</span><span class="free">pi</span> <span class="free">s</span><span class="main">)</span> <span class="main">(</span><span class="main">Î»</span><span class="bound">q</span><span class="main">.</span> Kripke <span class="free">pi</span> <span class="free">r</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> <span class="bound">q</span><span class="main">)</span> <span class="free">p</span> <span class="main">=</span> <span class="main">(</span>Kripke <span class="free">pi</span> <span class="free">r</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> <span class="free">p</span><span class="main">)</span>â€º</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">p</span></span><span class="main">)</span> <span class="operator">simp_all</span>

<span class="keyword1"><span class="command">theorem</span></span> tautology<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹tautology <span class="free">p</span> <span class="main">âŸ¹</span> <span class="free">M</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> <span class="free">p</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹tautology <span class="free">p</span>â€º</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹eval <span class="main">(</span><span class="skolem">g</span> <span class="free">s</span><span class="main">)</span> <span class="main">(</span><span class="main">Î»</span><span class="bound">q</span><span class="main">.</span> Kripke <span class="skolem">g</span> <span class="skolem">r</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> <span class="bound">q</span><span class="main">)</span> <span class="free">p</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">g</span> <span class="skolem">r</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹Kripke <span class="skolem">g</span> <span class="skolem">r</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> <span class="free">p</span>â€º</span></span> <span class="keyword2"><span class="keyword">for</span></span> <span class="skolem">g</span> <span class="skolem">r</span>
    <span class="keyword1"><span class="command">using</span></span> eval_semantics <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">M</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> <span class="free">p</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> kripke.collapse<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> soundness<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="free">p</span> <span class="main">âŸ¹</span> <span class="free">M</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> <span class="free">p</span>â€º</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">p</span></span> <span class="quasi_keyword">arbitrary</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="free">s</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> SystemK.induct<span class="main">)</span> <span class="main">(</span><span class="operator">simp_all</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> tautology<span class="main">)</span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">â€¹Derived rulesâ€º</span></span>

<span class="keyword1" id="Epistemic_Logic-K_FFI"><span class="command">lemma</span></span> K_FFI<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="main">(</span><span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span><span class="main">)</span>â€º</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> A1<span class="main">)</span>

<span class="keyword1"><span class="command">primrec</span></span> <span class="entity">conjoin</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fm list <span class="main">â‡’</span> <span class="tfree">'i</span> fm <span class="main">â‡’</span> <span class="tfree">'i</span> fmâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">â€¹<span class="free">conjoin</span> <span class="main">[]</span> <span class="free"><span class="bound"><span class="entity">q</span></span></span> <span class="main">=</span> <span class="free"><span class="bound"><span class="entity">q</span></span></span>â€º</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">â€¹<span class="free">conjoin</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main">#</span> <span class="free"><span class="bound"><span class="entity">ps</span></span></span><span class="main">)</span> <span class="free"><span class="bound"><span class="entity">q</span></span></span> <span class="main">=</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="free">conjoin</span> <span class="free"><span class="bound"><span class="entity">ps</span></span></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span><span class="main">)</span>â€º</span></span>

<span class="keyword1"><span class="command">primrec</span></span> <span class="entity">imply</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fm list <span class="main">â‡’</span> <span class="tfree">'i</span> fm <span class="main">â‡’</span> <span class="tfree">'i</span> fmâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">â€¹<span class="free">imply</span> <span class="main">[]</span> <span class="free"><span class="bound"><span class="entity">q</span></span></span> <span class="main">=</span> <span class="free"><span class="bound"><span class="entity">q</span></span></span>â€º</span></span>
<span class="main">|</span> <span class="quoted"><span class="quoted">â€¹<span class="free">imply</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main">#</span> <span class="free"><span class="bound"><span class="entity">ps</span></span></span><span class="main">)</span> <span class="free"><span class="bound"><span class="entity">q</span></span></span> <span class="main">=</span> <span class="main">(</span><span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="free">imply</span> <span class="free"><span class="bound"><span class="entity">ps</span></span></span> <span class="free"><span class="bound"><span class="entity">q</span></span></span><span class="main">)</span>â€º</span></span>

<span class="keyword1" id="Epistemic_Logic-K_imply_head"><span class="command">lemma</span></span> K_imply_head<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span><span class="free">p</span> <span class="main">#</span> <span class="free">ps</span><span class="main">)</span> <span class="free">p</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹tautology <span class="main">(</span>imply <span class="main">(</span><span class="free">p</span> <span class="main">#</span> <span class="free">ps</span><span class="main">)</span> <span class="free">p</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">ps</span></span><span class="main">)</span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">using</span></span> A1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Epistemic_Logic-K_imply_Cons"><span class="command">lemma</span></span> K_imply_Cons<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="free">ps</span> <span class="free">q</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span><span class="free">p</span> <span class="main">#</span> <span class="free">ps</span><span class="main">)</span> <span class="free">q</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹tautology <span class="main">(</span>imply <span class="free">ps</span> <span class="free">q</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="main">(</span><span class="free">p</span> <span class="main">#</span> <span class="free">ps</span><span class="main">)</span> <span class="free">q</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="main">(</span>imply <span class="free">ps</span> <span class="free">q</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="main">(</span><span class="free">p</span> <span class="main">#</span> <span class="free">ps</span><span class="main">)</span> <span class="free">q</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> A1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">using</span></span> assms R1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Epistemic_Logic-K_imply_member"><span class="command">lemma</span></span> K_imply_member<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="free">p</span> <span class="main">âˆˆ</span> set <span class="free">ps</span> <span class="main">âŸ¹</span> <span class="main">âŠ¢</span> imply <span class="free">ps</span> <span class="free">p</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">ps</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span> Nil
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Cons <span class="skolem">a</span> <span class="skolem">ps</span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">cases</span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">a</span> <span class="main">=</span> <span class="free">p</span>â€º</span></span><span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> True
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
      <span class="keyword1"><span class="command">using</span></span> Cons K_imply_head <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> False
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
      <span class="keyword1"><span class="command">using</span></span> Cons K_imply_Cons <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Epistemic_Logic-K_right_mp"><span class="command">lemma</span></span> K_right_mp<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="free">ps</span> <span class="free">p</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="free">ps</span> <span class="main">(</span><span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="free">q</span><span class="main">)</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="free">ps</span> <span class="free">q</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹tautology <span class="main">(</span>imply <span class="free">ps</span> <span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="free">ps</span> <span class="main">(</span><span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="free">q</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="free">ps</span> <span class="free">q</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">ps</span></span><span class="main">)</span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="main">(</span>imply <span class="free">ps</span> <span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="free">ps</span> <span class="main">(</span><span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="free">q</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="free">ps</span> <span class="free">q</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> A1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">using</span></span> assms R1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Epistemic_Logic-tautology_imply_superset"><span class="command">lemma</span></span> tautology_imply_superset<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹set <span class="free">ps</span> <span class="main">âŠ†</span> set <span class="free">qs</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹tautology <span class="main">(</span>imply <span class="free">ps</span> <span class="free">r</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="free">qs</span> <span class="free">r</span><span class="main">)</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> tautology <span class="main">(</span>imply <span class="free">ps</span> <span class="free">r</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="free">qs</span> <span class="free">r</span><span class="main">)</span>â€º</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">g</span></span> <span class="skolem"><span class="skolem">h</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> eval <span class="skolem">g</span> <span class="skolem">h</span> <span class="main">(</span>imply <span class="free">ps</span> <span class="free">r</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="free">qs</span> <span class="free">r</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹eval <span class="skolem">g</span> <span class="skolem">h</span> <span class="main">(</span>imply <span class="free">ps</span> <span class="free">r</span><span class="main">)</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> eval <span class="skolem">g</span> <span class="skolem">h</span> <span class="main">(</span>imply <span class="free">qs</span> <span class="free">r</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">consider</span></span> <span class="main">(</span>np<span class="main">)</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">p</span> <span class="main">âˆˆ</span> set <span class="free">ps</span><span class="main">.</span> <span class="main">Â¬</span> eval <span class="skolem">g</span> <span class="skolem">h</span> <span class="bound">p</span>â€º</span></span> <span class="main">|</span> <span class="main">(</span>r<span class="main">)</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">p</span> <span class="main">âˆˆ</span> set <span class="free">ps</span><span class="main">.</span> eval <span class="skolem">g</span> <span class="skolem">h</span> <span class="bound">p</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹eval <span class="skolem">g</span> <span class="skolem">h</span> <span class="free">r</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">ps</span></span><span class="main">)</span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">cases</span>
    <span class="keyword3"><span class="command">case</span></span> np
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">p</span> <span class="main">âˆˆ</span> set <span class="free">qs</span><span class="main">.</span> <span class="main">Â¬</span> eval <span class="skolem">g</span> <span class="skolem">h</span> <span class="bound">p</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹set <span class="free">ps</span> <span class="main">âŠ†</span> set <span class="free">qs</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹eval <span class="skolem">g</span> <span class="skolem">h</span> <span class="main">(</span>imply <span class="free">qs</span> <span class="free">r</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">qs</span></span><span class="main">)</span> <span class="operator">simp_all</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> eval <span class="skolem">g</span> <span class="skolem">h</span> <span class="main">(</span>imply <span class="free">qs</span> <span class="free">r</span><span class="main">)</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> r
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹eval <span class="skolem">g</span> <span class="skolem">h</span> <span class="main">(</span>imply <span class="free">qs</span> <span class="free">r</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">qs</span></span><span class="main">)</span> <span class="operator">simp_all</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> eval <span class="skolem">g</span> <span class="skolem">h</span> <span class="main">(</span>imply <span class="free">qs</span> <span class="free">r</span><span class="main">)</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Epistemic_Logic-tautology_imply"><span class="command">lemma</span></span> tautology_imply<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹tautology <span class="free">q</span> <span class="main">âŸ¹</span> tautology <span class="main">(</span>imply <span class="free">ps</span> <span class="free">q</span><span class="main">)</span>â€º</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">ps</span></span><span class="main">)</span> <span class="operator">simp_all</span>

<span class="keyword1"><span class="command">theorem</span></span> K_imply_weaken<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="free">ps</span> <span class="free">q</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹set <span class="free">ps</span> <span class="main">âŠ†</span> set <span class="free">ps'</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="free">ps'</span> <span class="free">q</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹tautology <span class="main">(</span>imply <span class="free">ps</span> <span class="free">q</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="free">ps'</span> <span class="free">q</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹set <span class="free">ps</span> <span class="main">âŠ†</span> set <span class="free">ps'</span>â€º</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">ps</span></span> <span class="quasi_keyword">arbitrary</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="free">ps'</span></span><span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> Nil
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="skolem">ps'</span></span><span class="main">)</span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Cons <span class="skolem">a</span> <span class="skolem">G</span><span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">using</span></span> tautology_imply_superset <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="main">(</span>imply <span class="free">ps</span> <span class="free">q</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="free">ps'</span> <span class="free">q</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> A1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="free">ps</span> <span class="free">q</span>â€º</span></span> R1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Epistemic_Logic-imply_append"><span class="command">lemma</span></span> imply_append<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹imply <span class="main">(</span><span class="free">ps</span> <span class="main">@</span> <span class="free">ps'</span><span class="main">)</span> <span class="free">q</span> <span class="main">=</span> imply <span class="free">ps</span> <span class="main">(</span>imply <span class="free">ps'</span> <span class="free">q</span><span class="main">)</span>â€º</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">ps</span></span><span class="main">)</span> <span class="operator">simp_all</span>

<span class="keyword1" id="Epistemic_Logic-K_ImpI"><span class="command">lemma</span></span> K_ImpI<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span><span class="free">p</span> <span class="main">#</span> <span class="free">G</span><span class="main">)</span> <span class="free">q</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="free">G</span> <span class="main">(</span><span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="free">q</span><span class="main">)</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹set <span class="main">(</span><span class="free">p</span> <span class="main">#</span> <span class="free">G</span><span class="main">)</span> <span class="main">âŠ†</span> set <span class="main">(</span><span class="free">G</span> <span class="main">@</span> <span class="main">[</span><span class="free">p</span><span class="main">]</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span><span class="free">G</span> <span class="main">@</span> <span class="main">[</span><span class="free">p</span><span class="main">]</span><span class="main">)</span> <span class="free">q</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms K_imply_weaken <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="free">G</span> <span class="main">(</span>imply <span class="main">[</span><span class="free">p</span><span class="main">]</span> <span class="free">q</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> imply_append <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Epistemic_Logic-cut"><span class="command">lemma</span></span> cut<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="free">G</span> <span class="free">p</span> <span class="main">âŸ¹</span> <span class="main">âŠ¢</span> imply <span class="main">(</span><span class="free">p</span> <span class="main">#</span> <span class="free">G</span><span class="main">)</span> <span class="free">q</span> <span class="main">âŸ¹</span> <span class="main">âŠ¢</span> imply <span class="free">G</span> <span class="free">q</span>â€º</span></span>
  <span class="keyword1"><span class="command">using</span></span> K_ImpI K_right_mp <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1" id="Epistemic_Logic-K_Boole"><span class="command">lemma</span></span> K_Boole<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span><span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span> <span class="main">#</span> <span class="free">G</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span> <span class="main">âŸ¹</span> <span class="main">âŠ¢</span> imply <span class="free">G</span> <span class="free">p</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span><span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span> <span class="main">#</span> <span class="free">G</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="free">G</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> K_ImpI <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹tautology <span class="main">(</span>imply <span class="free">G</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="free">G</span> <span class="free">p</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">G</span></span><span class="main">)</span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="main">(</span>imply <span class="free">G</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="free">G</span> <span class="free">p</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> A1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">using</span></span> R1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Epistemic_Logic-K_DisE"><span class="command">lemma</span></span> K_DisE<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span><span class="free">A</span> <span class="main">#</span> <span class="free">G</span><span class="main">)</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span><span class="free">B</span> <span class="main">#</span> <span class="free">G</span><span class="main">)</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="free">G</span> <span class="main">(</span><span class="free">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="free">B</span><span class="main">)</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="free">G</span> <span class="free">C</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹tautology <span class="main">(</span>imply <span class="main">(</span><span class="free">A</span> <span class="main">#</span> <span class="free">G</span><span class="main">)</span> <span class="free">C</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="main">(</span><span class="free">B</span> <span class="main">#</span> <span class="free">G</span><span class="main">)</span> <span class="free">C</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="free">G</span> <span class="main">(</span><span class="free">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="free">B</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="free">G</span> <span class="free">C</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">G</span></span><span class="main">)</span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="main">(</span>imply <span class="main">(</span><span class="free">A</span> <span class="main">#</span> <span class="free">G</span><span class="main">)</span> <span class="free">C</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="main">(</span><span class="free">B</span> <span class="main">#</span> <span class="free">G</span><span class="main">)</span> <span class="free">C</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="free">G</span> <span class="main">(</span><span class="free">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="free">B</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="free">G</span> <span class="free">C</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> A1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">using</span></span> assms R1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Epistemic_Logic-K_conjoin_imply"><span class="command">lemma</span></span> K_conjoin_imply<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> conjoin <span class="free">G</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="free">G</span> <span class="free">p</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹tautology <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> conjoin <span class="free">G</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="free">G</span> <span class="free">p</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">G</span></span><span class="main">)</span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> conjoin <span class="free">G</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="free">G</span> <span class="free">p</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> A1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">using</span></span> assms R1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Epistemic_Logic-K_distrib_K_imp"><span class="command">lemma</span></span> K_distrib_K_imp<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> K <span class="free">i</span> <span class="main">(</span>imply <span class="free">G</span> <span class="free">q</span><span class="main">)</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span>map <span class="main">(</span>K <span class="free">i</span><span class="main">)</span> <span class="free">G</span><span class="main">)</span> <span class="main">(</span>K <span class="free">i</span> <span class="free">q</span><span class="main">)</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="main">(</span>K <span class="free">i</span> <span class="main">(</span>imply <span class="free">G</span> <span class="free">q</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="main">(</span>map <span class="main">(</span>K <span class="free">i</span><span class="main">)</span> <span class="free">G</span><span class="main">)</span> <span class="main">(</span>K <span class="free">i</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">G</span></span><span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> Nil
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> A1<span class="main">)</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Cons <span class="skolem">a</span> <span class="skolem">G</span><span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="main">(</span>K <span class="free">i</span> <span class="skolem">a</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> K <span class="free">i</span> <span class="main">(</span>imply <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="free">q</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> K <span class="free">i</span> <span class="main">(</span>imply <span class="skolem">G</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> A2<span class="main">)</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span>
      <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="main">(</span><span class="main">(</span>K <span class="free">i</span> <span class="skolem">a</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> K <span class="free">i</span> <span class="main">(</span>imply <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="free">q</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> K <span class="free">i</span> <span class="main">(</span>imply <span class="skolem">G</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span>
        <span class="main">(</span>K <span class="free">i</span> <span class="main">(</span>imply <span class="skolem">G</span> <span class="free">q</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="main">(</span>map <span class="main">(</span>K <span class="free">i</span><span class="main">)</span> <span class="skolem">G</span><span class="main">)</span> <span class="main">(</span>K <span class="free">i</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span>
        <span class="main">(</span>K <span class="free">i</span> <span class="skolem">a</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> K <span class="free">i</span> <span class="main">(</span>imply <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="free">q</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="main">(</span>map <span class="main">(</span>K <span class="free">i</span><span class="main">)</span> <span class="skolem">G</span><span class="main">)</span> <span class="main">(</span>K <span class="free">i</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> A1<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="main">(</span>K <span class="free">i</span> <span class="skolem">a</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> K <span class="free">i</span> <span class="main">(</span>imply <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="free">q</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="main">(</span>map <span class="main">(</span>K <span class="free">i</span><span class="main">)</span> <span class="skolem">G</span><span class="main">)</span> <span class="main">(</span>K <span class="free">i</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> Cons R1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span>
      <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="main">(</span><span class="main">(</span>K <span class="free">i</span> <span class="skolem">a</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> K <span class="free">i</span> <span class="main">(</span>imply <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="free">q</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="main">(</span>map <span class="main">(</span>K <span class="free">i</span><span class="main">)</span> <span class="skolem">G</span><span class="main">)</span> <span class="main">(</span>K <span class="free">i</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span>
        <span class="main">(</span>K <span class="free">i</span> <span class="main">(</span>imply <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="free">q</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> K <span class="free">i</span> <span class="skolem">a</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="main">(</span>map <span class="main">(</span>K <span class="free">i</span><span class="main">)</span> <span class="skolem">G</span><span class="main">)</span> <span class="main">(</span>K <span class="free">i</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> A1<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="main">(</span>K <span class="free">i</span> <span class="main">(</span>imply <span class="main">(</span><span class="skolem">a</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="free">q</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> K <span class="free">i</span> <span class="skolem">a</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> imply <span class="main">(</span>map <span class="main">(</span>K <span class="free">i</span><span class="main">)</span> <span class="skolem">G</span><span class="main">)</span> <span class="main">(</span>K <span class="free">i</span> <span class="free">q</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> R1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">using</span></span> assms R1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">â€¹Consistencyâ€º</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">consistency</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fm set set <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">â€¹<span class="free">consistency</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">â‰¡</span> <span class="main">âˆ€</span><span class="bound">S</span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">.</span>
    <span class="main">(</span><span class="main">âˆ€</span><span class="bound">p</span><span class="main">.</span> <span class="main">Â¬</span> <span class="main">(</span>Pro <span class="bound">p</span> <span class="main">âˆˆ</span> <span class="bound">S</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> Pro <span class="bound">p</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="bound">S</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆ§</span>
    <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span> <span class="main">âˆ‰</span> <span class="bound">S</span> <span class="main">âˆ§</span>
    <span class="main">(</span><span class="main">âˆ€</span><span class="bound">Z</span><span class="main">.</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="bound">Z</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="bound">S</span> <span class="main">âŸ¶</span> <span class="bound">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="bound">Z</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">âˆ§</span>
    <span class="main">(</span><span class="main">âˆ€</span><span class="bound">A</span> <span class="bound">B</span><span class="main">.</span> <span class="main">(</span><span class="bound">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="bound">B</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="bound">S</span> <span class="main">âŸ¶</span> <span class="bound">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="bound">A</span><span class="main">,</span> <span class="bound">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">âˆ§</span>
    <span class="main">(</span><span class="main">âˆ€</span><span class="bound">A</span> <span class="bound">B</span><span class="main">.</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="bound">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="bound">B</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="bound">S</span> <span class="main">âŸ¶</span> <span class="bound">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="bound">A</span><span class="main">,</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="bound">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">âˆ§</span>
    <span class="main">(</span><span class="main">âˆ€</span><span class="bound">A</span> <span class="bound">B</span><span class="main">.</span> <span class="main">(</span><span class="bound">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="bound">B</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="bound">S</span> <span class="main">âŸ¶</span> <span class="bound">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="bound">A</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">âˆ¨</span> <span class="bound">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="bound">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">âˆ§</span>
    <span class="main">(</span><span class="main">âˆ€</span><span class="bound">A</span> <span class="bound">B</span><span class="main">.</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="bound">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="bound">B</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="bound">S</span> <span class="main">âŸ¶</span> <span class="bound">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="bound">A</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">âˆ¨</span> <span class="bound">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="bound">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">âˆ§</span>
    <span class="main">(</span><span class="main">âˆ€</span><span class="bound">A</span> <span class="bound">B</span><span class="main">.</span> <span class="main">(</span><span class="bound">A</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="bound">B</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="bound">S</span> <span class="main">âŸ¶</span> <span class="bound">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="bound">A</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">âˆ¨</span> <span class="bound">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="bound">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">âˆ§</span>
    <span class="main">(</span><span class="main">âˆ€</span><span class="bound">A</span> <span class="bound">B</span><span class="main">.</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="bound">A</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="bound">B</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="bound">S</span> <span class="main">âŸ¶</span> <span class="bound">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="bound">A</span><span class="main">,</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="bound">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">âˆ§</span>
    <span class="main">(</span><span class="main">âˆ€</span><span class="bound">A</span><span class="main">.</span> tautology <span class="bound">A</span> <span class="main">âŸ¶</span> <span class="bound">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="bound">A</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span> <span class="main">âˆ§</span>
    <span class="main">(</span><span class="main">âˆ€</span><span class="bound">A</span> <span class="bound">i</span><span class="main">.</span> <span class="main">Â¬</span> <span class="main">(</span>K <span class="bound">i</span> <span class="bound">A</span> <span class="main">âˆˆ</span> <span class="bound">S</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> K <span class="bound">i</span> <span class="bound">A</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="bound">S</span><span class="main">)</span><span class="main">)</span>â€º</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">â€¹Closure under subsetsâ€º</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">close</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fm set set <span class="main">â‡’</span> <span class="tfree">'i</span> fm set setâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">â€¹<span class="free">close</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">â‰¡</span> <span class="main">{</span><span class="bound">S</span><span class="main">.</span> <span class="main">âˆƒ</span><span class="bound">S'</span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">.</span> <span class="bound">S</span> <span class="main">âŠ†</span> <span class="bound">S'</span><span class="main">}</span>â€º</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">subset_closed</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'a</span> set set <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">â€¹<span class="free">subset_closed</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">â‰¡</span> <span class="main">(</span><span class="main">âˆ€</span><span class="bound">S'</span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">.</span> <span class="main">âˆ€</span><span class="bound">S</span><span class="main">.</span> <span class="bound">S</span> <span class="main">âŠ†</span> <span class="bound">S'</span> <span class="main">âŸ¶</span> <span class="bound">S</span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span>â€º</span></span>

<span class="keyword1" id="Epistemic_Logic-subset_in_close"><span class="command">lemma</span></span> subset_in_close<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">S'</span> <span class="main">âŠ†</span> <span class="free">S</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">S</span> <span class="main">âˆª</span> <span class="free">x</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">S'</span> <span class="main">âˆª</span> <span class="free">x</span> <span class="main">âˆˆ</span> close <span class="free">C</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">S</span> <span class="main">âˆª</span> <span class="free">x</span> <span class="main">âˆˆ</span> close <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> close_def <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">S</span> <span class="main">âˆª</span> <span class="free">x</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> close_def <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">S'</span> <span class="main">âŠ†</span> <span class="free">S</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> close_consistency<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">C</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fm set setâ€º</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="main">(</span>close <span class="free">C</span><span class="main">)</span>â€º</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> consistency_def
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">intro</span> ballI allI impI conjI<span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">S'</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fm setâ€º</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âˆˆ</span> close <span class="free">C</span>â€º</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">S</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> close_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">p</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">(</span>Pro <span class="skolem">p</span> <span class="main">âˆˆ</span> <span class="skolem">S</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> Pro <span class="skolem">p</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">(</span>Pro <span class="skolem">p</span> <span class="main">âˆˆ</span> <span class="skolem">S'</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> Pro <span class="skolem">p</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S'</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span> <span class="main">âˆ‰</span> <span class="skolem">S</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span> <span class="main">âˆ‰</span> <span class="skolem">S'</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">Z</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">Z</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S'</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">Z</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">Z</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">Z</span><span class="main">}</span> <span class="main">âˆˆ</span> close <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span> subset_in_close <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">B</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S'</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> close <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span> subset_in_close <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">B</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S'</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">,</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">,</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> close <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span> subset_in_close <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">B</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S'</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> close <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span> subset_in_close <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">B</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S'</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span> <span class="main">âˆ¨</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">}</span> <span class="main">âˆˆ</span> close <span class="free">C</span> <span class="main">âˆ¨</span> <span class="skolem">S'</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> close <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span> subset_in_close <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">B</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S'</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span> <span class="main">âˆ¨</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">}</span> <span class="main">âˆˆ</span> close <span class="free">C</span> <span class="main">âˆ¨</span> <span class="skolem">S'</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> close <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span> subset_in_close <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">B</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S'</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span> <span class="main">âˆ¨</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">}</span> <span class="main">âˆˆ</span> close <span class="free">C</span> <span class="main">âˆ¨</span> <span class="skolem">S'</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> close <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span> subset_in_close <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fmâ€º</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹tautology <span class="skolem">A</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">}</span> <span class="main">âˆˆ</span> close <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span> subset_in_close <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">i</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">(</span>K <span class="skolem">i</span> <span class="skolem">A</span> <span class="main">âˆˆ</span> <span class="skolem">S</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> K <span class="skolem">i</span> <span class="skolem">A</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">(</span>K <span class="skolem">i</span> <span class="skolem">A</span> <span class="main">âˆˆ</span> <span class="skolem">S'</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> K <span class="skolem">i</span> <span class="skolem">A</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S'</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>

<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> close_closed<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹subset_closed <span class="main">(</span>close <span class="free">C</span><span class="main">)</span>â€º</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> close_def subset_closed_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1"><span class="command">theorem</span></span> close_subset<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="free">C</span> <span class="main">âŠ†</span> close <span class="free">C</span>â€º</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> close_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">â€¹Finite characterâ€º</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">finite_char</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'a</span> set set <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">â€¹<span class="free">finite_char</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">â‰¡</span> <span class="main">(</span><span class="main">âˆ€</span><span class="bound">S</span><span class="main">.</span> <span class="bound">S</span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">=</span> <span class="main">(</span><span class="main">âˆ€</span><span class="bound">S'</span><span class="main">.</span> finite <span class="bound">S'</span> <span class="main">âŸ¶</span> <span class="bound">S'</span> <span class="main">âŠ†</span> <span class="bound">S</span> <span class="main">âŸ¶</span> <span class="bound">S'</span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">)</span><span class="main">)</span>â€º</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">mk_finite_char</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'a</span> set set <span class="main">â‡’</span> <span class="tfree">'a</span> set setâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">â€¹<span class="free">mk_finite_char</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">â‰¡</span> <span class="main">{</span><span class="bound">S</span><span class="main">.</span> <span class="main">âˆ€</span><span class="bound">S'</span><span class="main">.</span> finite <span class="bound">S'</span> <span class="main">âŸ¶</span> <span class="bound">S'</span> <span class="main">âŠ†</span> <span class="bound">S</span> <span class="main">âŸ¶</span> <span class="bound">S'</span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">}</span>â€º</span></span>

<span class="keyword1"><span class="command">theorem</span></span> finite_char<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹finite_char <span class="main">(</span>mk_finite_char <span class="free">C</span><span class="main">)</span>â€º</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> finite_char_def mk_finite_char_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1"><span class="command">theorem</span></span> finite_char_closed<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹finite_char <span class="free">C</span> <span class="main">âŸ¹</span> subset_closed <span class="free">C</span>â€º</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> finite_char_def subset_closed_def
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">intro</span> ballI allI impI<span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">S</span> <span class="skolem">S'</span>
  <span class="keyword3"><span class="command">assume</span></span> *<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">S</span><span class="main">.</span> <span class="main">(</span><span class="bound">S</span> <span class="main">âˆˆ</span> <span class="free">C</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="main">âˆ€</span><span class="bound">S'</span><span class="main">.</span> finite <span class="bound">S'</span> <span class="main">âŸ¶</span> <span class="bound">S'</span> <span class="main">âŠ†</span> <span class="bound">S</span> <span class="main">âŸ¶</span> <span class="bound">S'</span> <span class="main">âˆˆ</span> <span class="free">C</span><span class="main">)</span>â€º</span></span>
    <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âŠ†</span> <span class="skolem">S'</span>â€º</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">S'</span><span class="main">.</span> finite <span class="bound">S'</span> <span class="main">âŸ¶</span> <span class="bound">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span> <span class="main">âŸ¶</span> <span class="bound">S'</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> * <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> finite_char_subset<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹subset_closed <span class="free">C</span> <span class="main">âŸ¹</span> <span class="free">C</span> <span class="main">âŠ†</span> mk_finite_char <span class="free">C</span>â€º</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> mk_finite_char_def subset_closed_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1"><span class="command">theorem</span></span> finite_consistency<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">C</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fm set setâ€º</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹subset_closed <span class="free">C</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="main">(</span>mk_finite_char <span class="free">C</span><span class="main">)</span>â€º</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> consistency_def
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">intro</span> ballI allI impI conjI<span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">S</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆˆ</span> mk_finite_char <span class="free">C</span>â€º</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> finc<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound"><span class="bound">S'</span></span> <span class="main">âŠ†</span> <span class="skolem">S</span><span class="main">.</span> finite <span class="bound">S'</span> <span class="main">âŸ¶</span> <span class="bound">S'</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> mk_finite_char_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">S'</span> <span class="main">âˆˆ</span> <span class="free">C</span><span class="main">.</span> <span class="main">âˆ€</span><span class="bound"><span class="bound">S</span></span> <span class="main">âŠ†</span> <span class="bound">S'</span><span class="main">.</span> <span class="bound">S</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹subset_closed <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> subset_closed_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> sc<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">S'</span> <span class="bound">x</span><span class="main">.</span> <span class="bound">S'</span> <span class="main">âˆª</span> <span class="bound">x</span> <span class="main">âˆˆ</span> <span class="free">C</span> <span class="main">âŸ¶</span> <span class="main">(</span><span class="main">âˆ€</span><span class="bound"><span class="bound">S</span></span> <span class="main">âŠ†</span> <span class="bound">S'</span> <span class="main">âˆª</span> <span class="bound">x</span><span class="main">.</span> <span class="bound">S</span> <span class="main">âˆˆ</span> <span class="free">C</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">i</span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">(</span>Pro <span class="skolem">i</span> <span class="main">âˆˆ</span> <span class="skolem">S</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> Pro <span class="skolem">i</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹Pro <span class="skolem">i</span> <span class="main">âˆˆ</span> <span class="skolem">S</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> Pro <span class="skolem">i</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">{</span>Pro <span class="skolem">i</span><span class="main">,</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> Pro <span class="skolem">i</span><span class="main">)</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> finc <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span> <span class="main">âˆ‰</span> <span class="skolem">S</span>â€º</span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">{</span><span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> finc <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
  <span class="keyword1"><span class="command">qed</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">Z</span>
    <span class="keyword3"><span class="command">assume</span></span> *<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">Z</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">Z</span><span class="main">}</span> <span class="main">âˆˆ</span> mk_finite_char <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> mk_finite_char_def
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">intro</span> allI impI CollectI<span class="main">)</span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">S'</span>
      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?S'</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">-</span> <span class="main">{</span><span class="skolem">Z</span><span class="main">}</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">Z</span><span class="main">}</span>â€º</span></span>

      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">Z</span><span class="main">}</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">S'</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> * <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="var">?S'</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">S'</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> finc <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">Z</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> sc <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">B</span>
    <span class="keyword3"><span class="command">assume</span></span> *<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> mk_finite_char <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> mk_finite_char_def
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">intro</span> allI impI CollectI<span class="main">)</span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">S'</span>
      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?S'</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">-</span> <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">B</span><span class="main">}</span>â€º</span></span>

      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="skolem">B</span><span class="main">}</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">S'</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> * <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="var">?S'</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">S'</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> finc <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> sc <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">B</span>
    <span class="keyword3"><span class="command">assume</span></span> *<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">,</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> mk_finite_char <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> mk_finite_char_def
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">intro</span> allI impI CollectI<span class="main">)</span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">S'</span>
      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?S'</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">-</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">,</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">}</span>â€º</span></span>

      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">,</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">S'</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> * <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="var">?S'</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">S'</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> finc <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">,</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> sc <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">B</span>
    <span class="keyword3"><span class="command">assume</span></span> *<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> mk_finite_char <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> mk_finite_char_def
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">intro</span> allI impI CollectI<span class="main">)</span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">S'</span>
      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?S'</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">-</span> <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">}</span>â€º</span></span>

      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">S'</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> * <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="var">?S'</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">S'</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> finc <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> sc <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">B</span>
    <span class="keyword3"><span class="command">assume</span></span> *<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">}</span> <span class="main">âˆˆ</span> mk_finite_char <span class="free">C</span> <span class="main">âˆ¨</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> mk_finite_char <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="var">?thesis</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Sa</span></span> <span class="skolem"><span class="skolem">Sb</span></span>
        <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sa</span> <span class="main">âŠ†</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">}</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">Sa</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sa</span> <span class="main">âˆ‰</span> <span class="free">C</span>â€º</span></span>
          <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sb</span> <span class="main">âŠ†</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">Sb</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sb</span> <span class="main">âˆ‰</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> mk_finite_char_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?S'</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">Sa</span> <span class="main">-</span> <span class="main">{</span><span class="skolem">A</span><span class="main">}</span><span class="main">)</span> <span class="main">âˆª</span> <span class="main">(</span><span class="skolem">Sb</span> <span class="main">-</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span><span class="main">)</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">B</span><span class="main">}</span>â€º</span></span>

      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sa</span> <span class="main">âŠ†</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">}</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sb</span> <span class="main">âŠ†</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span>â€º</span></span> * <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="var">?S'</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">Sa</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">Sb</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> finc <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span> <span class="main">âˆ¨</span> <span class="var">?S'</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sa</span> <span class="main">âˆˆ</span> <span class="free">C</span> <span class="main">âˆ¨</span> <span class="skolem">Sb</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> sc <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sa</span> <span class="main">âˆ‰</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sb</span> <span class="main">âˆ‰</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">B</span>
    <span class="keyword3"><span class="command">assume</span></span> *<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">}</span> <span class="main">âˆˆ</span> mk_finite_char <span class="free">C</span> <span class="main">âˆ¨</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> mk_finite_char <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="var">?thesis</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Sa</span></span> <span class="skolem"><span class="skolem">Sb</span></span>
        <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sa</span> <span class="main">âŠ†</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">}</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">Sa</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sa</span> <span class="main">âˆ‰</span> <span class="free">C</span>â€º</span></span>
          <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sb</span> <span class="main">âŠ†</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">Sb</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sb</span> <span class="main">âˆ‰</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> mk_finite_char_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?S'</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">Sa</span> <span class="main">-</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">}</span><span class="main">)</span> <span class="main">âˆª</span> <span class="main">(</span><span class="skolem">Sb</span> <span class="main">-</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span><span class="main">)</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">}</span>â€º</span></span>

      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sa</span> <span class="main">âŠ†</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">}</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sb</span> <span class="main">âŠ†</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span>â€º</span></span> * <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="var">?S'</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">Sa</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">Sb</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> finc <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span> <span class="main">âˆ¨</span> <span class="var">?S'</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sa</span> <span class="main">âˆˆ</span> <span class="free">C</span> <span class="main">âˆ¨</span> <span class="skolem">Sb</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> sc <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sa</span> <span class="main">âˆ‰</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sb</span> <span class="main">âˆ‰</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">B</span>
    <span class="keyword3"><span class="command">assume</span></span> *<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">}</span> <span class="main">âˆˆ</span> mk_finite_char <span class="free">C</span> <span class="main">âˆ¨</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> mk_finite_char <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="var">?thesis</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">Sa</span></span> <span class="skolem"><span class="skolem">Sb</span></span>
        <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sa</span> <span class="main">âŠ†</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">}</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">Sa</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sa</span> <span class="main">âˆ‰</span> <span class="free">C</span>â€º</span></span>
          <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sb</span> <span class="main">âŠ†</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">Sb</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sb</span> <span class="main">âˆ‰</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> mk_finite_char_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?S'</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">Sa</span> <span class="main">-</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">}</span><span class="main">)</span> <span class="main">âˆª</span> <span class="main">(</span><span class="skolem">Sb</span> <span class="main">-</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span><span class="main">)</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">B</span><span class="main">}</span>â€º</span></span>

      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sa</span> <span class="main">âŠ†</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">}</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sb</span> <span class="main">âŠ†</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span>â€º</span></span> * <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="var">?S'</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">Sa</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">Sb</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> finc <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span> <span class="main">âˆ¨</span> <span class="var">?S'</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sa</span> <span class="main">âˆˆ</span> <span class="free">C</span> <span class="main">âˆ¨</span> <span class="skolem">Sb</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> sc <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sa</span> <span class="main">âˆ‰</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">Sb</span> <span class="main">âˆ‰</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fmâ€º</span></span>
    <span class="keyword3"><span class="command">assume</span></span> *<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹tautology <span class="skolem">A</span>â€º</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">}</span> <span class="main">âˆˆ</span> mk_finite_char <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> mk_finite_char_def
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">intro</span> allI impI CollectI<span class="main">)</span>
      <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">S'</span>
      <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?S'</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">-</span> <span class="main">{</span><span class="skolem">A</span><span class="main">}</span>â€º</span></span>

      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">}</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">S'</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âŠ†</span> <span class="skolem">S</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> * <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="var">?S'</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">S'</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> finc <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S'</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> * <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> sc <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">i</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆˆ</span> mk_finite_char <span class="free">C</span>â€º</span></span>
    <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">(</span>K <span class="skolem">i</span> <span class="skolem">A</span> <span class="main">âˆˆ</span> <span class="skolem">S</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> K <span class="skolem">i</span> <span class="skolem">A</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹K <span class="skolem">i</span> <span class="skolem">A</span> <span class="main">âˆˆ</span> <span class="skolem">S</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> K <span class="skolem">i</span> <span class="skolem">A</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">{</span>K <span class="skolem">i</span> <span class="skolem">A</span><span class="main">,</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> K <span class="skolem">i</span> <span class="skolem">A</span><span class="main">)</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> finc <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">qed</span></span> <span class="keyword1"><span class="command">}</span></span>

<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">â€¹Maximal extensionâ€º</span></span>

<span class="keyword1"><span class="command">instantiation</span></span> fm <span class="main">::</span> <span class="main">(</span><span class="quoted">countable</span><span class="main">)</span> <span class="quoted">countable</span> <span class="keyword2"><span class="keyword">begin</span></span>
<span class="keyword1"><span class="command">instance</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">countable_datatype</span>
<span class="keyword2"><span class="keyword">end</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">is_chain</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span>nat <span class="main">â‡’</span> <span class="tfree">'a</span> set<span class="main">)</span> <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">â€¹<span class="free">is_chain</span> <span class="free"><span class="bound"><span class="entity">f</span></span></span> <span class="main">â‰¡</span> <span class="main">âˆ€</span><span class="bound">n</span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">f</span></span></span> <span class="bound">n</span> <span class="main">âŠ†</span> <span class="free"><span class="bound"><span class="entity">f</span></span></span> <span class="main">(</span>Suc <span class="bound">n</span><span class="main">)</span>â€º</span></span>

<span class="keyword1" id="Epistemic_Logic-is_chainD"><span class="command">lemma</span></span> is_chainD<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹is_chain <span class="free">f</span> <span class="main">âŸ¹</span> <span class="free">x</span> <span class="main">âˆˆ</span> <span class="free">f</span> <span class="free">m</span> <span class="main">âŸ¹</span> <span class="free">x</span> <span class="main">âˆˆ</span> <span class="free">f</span> <span class="main">(</span><span class="free">m</span> <span class="main">+</span> <span class="free">n</span><span class="main">)</span>â€º</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">n</span></span><span class="main">)</span> <span class="main">(</span><span class="operator">auto</span> <span class="quasi_keyword">simp</span><span class="main"><span class="main">:</span></span> is_chain_def<span class="main">)</span>

<span class="keyword1" id="Epistemic_Logic-is_chainD'"><span class="command">lemma</span></span> is_chainD'<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹is_chain <span class="free">f</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">x</span> <span class="main">âˆˆ</span> <span class="free">f</span> <span class="free">m</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">m</span> <span class="main">â‰¤</span> <span class="free">k</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">x</span> <span class="main">âˆˆ</span> <span class="free">f</span> <span class="free">k</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">n</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">k</span> <span class="main">=</span> <span class="free">m</span> <span class="main">+</span> <span class="skolem">n</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">m</span> <span class="main">â‰¤</span> <span class="free">k</span>â€º</span></span> le_iff_add
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">x</span> <span class="main">âˆˆ</span> <span class="free">f</span> <span class="free">k</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹is_chain <span class="free">f</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">x</span> <span class="main">âˆˆ</span> <span class="free">f</span> <span class="free">m</span>â€º</span></span> is_chainD
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Epistemic_Logic-chain_index"><span class="command">lemma</span></span> chain_index<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹is_chain <span class="free">f</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="free">F</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">F</span> <span class="main">âŠ†</span> <span class="main">(</span><span class="main">â‹ƒ</span><span class="bound">n</span><span class="main">.</span> <span class="free">f</span> <span class="bound">n</span><span class="main">)</span> <span class="main">âŸ¹</span> <span class="main">âˆƒ</span><span class="bound">n</span><span class="main">.</span> <span class="free">F</span> <span class="main">âŠ†</span> <span class="free">f</span> <span class="bound">n</span>â€º</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="free">F</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">F</span></span> <span class="quasi_keyword">rule</span><span class="main"><span class="main">:</span></span> finite_induct<span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span> empty
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>insert <span class="skolem">x</span> <span class="skolem">F</span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">n</span><span class="main">.</span> <span class="skolem">F</span> <span class="main">âŠ†</span> <span class="free">f</span> <span class="bound">n</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">m</span><span class="main">.</span> <span class="skolem">x</span> <span class="main">âˆˆ</span> <span class="free">f</span> <span class="bound">m</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">F</span> <span class="main">âŠ†</span> <span class="main">(</span><span class="main">â‹ƒ</span><span class="bound">x</span><span class="main">.</span> <span class="free">f</span> <span class="bound">x</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹is_chain <span class="free">f</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">n</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem"><span class="skolem">m</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">F</span> <span class="main">âŠ†</span> <span class="free">f</span> <span class="skolem">n</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">x</span> <span class="main">âˆˆ</span> <span class="free">f</span> <span class="skolem">m</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">m</span> <span class="main">â‰¤</span> max <span class="skolem">n</span> <span class="skolem">m</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">n</span> <span class="main">â‰¤</span> max <span class="skolem">n</span> <span class="skolem">m</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">x</span> <span class="main">âˆˆ</span> <span class="free">f</span> <span class="main">(</span>max <span class="skolem">n</span> <span class="skolem">m</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_chainD' <span class="quoted"><span class="quoted">â€¹is_chain <span class="free">f</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">x</span> <span class="main">âˆˆ</span> <span class="free">f</span> <span class="skolem">m</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">m</span> <span class="main">â‰¤</span> max <span class="skolem">n</span> <span class="skolem">m</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">F</span> <span class="main">âŠ†</span> <span class="free">f</span> <span class="main">(</span>max <span class="skolem">n</span> <span class="skolem">m</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> is_chainD' <span class="quoted"><span class="quoted">â€¹is_chain <span class="free">f</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">F</span> <span class="main">âŠ†</span> <span class="free">f</span> <span class="skolem">n</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">n</span> <span class="main">â‰¤</span> max <span class="skolem">n</span> <span class="skolem">m</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Epistemic_Logic-chain_union_closed'"><span class="command">lemma</span></span> chain_union_closed'<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹is_chain <span class="free">f</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">n</span><span class="main">.</span> <span class="free">f</span> <span class="bound">n</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">S'</span> <span class="main">âˆˆ</span> <span class="free">C</span><span class="main">.</span> <span class="main">âˆ€</span><span class="bound"><span class="bound">S</span></span> <span class="main">âŠ†</span> <span class="bound">S'</span><span class="main">.</span> <span class="bound">S</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="free">S'</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">S'</span> <span class="main">âŠ†</span> <span class="main">(</span><span class="main">â‹ƒ</span><span class="bound">n</span><span class="main">.</span> <span class="free">f</span> <span class="bound">n</span><span class="main">)</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">S'</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">n</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">S'</span> <span class="main">âŠ†</span> <span class="free">f</span> <span class="skolem">n</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> chain_index <span class="quoted"><span class="quoted">â€¹is_chain <span class="free">f</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="free">S'</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">S'</span> <span class="main">âŠ†</span> <span class="main">(</span><span class="main">â‹ƒ</span><span class="bound">n</span><span class="main">.</span> <span class="free">f</span> <span class="bound">n</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">f</span> <span class="skolem">n</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">n</span><span class="main">.</span> <span class="free">f</span> <span class="bound">n</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">S'</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">S'</span> <span class="main">âˆˆ</span> <span class="free">C</span><span class="main">.</span> <span class="main">âˆ€</span><span class="bound"><span class="bound">S</span></span> <span class="main">âŠ†</span> <span class="bound">S'</span><span class="main">.</span> <span class="bound">S</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Epistemic_Logic-chain_union_closed"><span class="command">lemma</span></span> chain_union_closed<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹finite_char <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹is_chain <span class="free">f</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">n</span><span class="main">.</span> <span class="free">f</span> <span class="bound">n</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main">â‹ƒ</span><span class="bound">n</span><span class="main">.</span> <span class="free">f</span> <span class="bound">n</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹subset_closed <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> finite_char_closed <span class="quoted"><span class="quoted">â€¹finite_char <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">S'</span> <span class="main">âˆˆ</span> <span class="free">C</span><span class="main">.</span> <span class="main">âˆ€</span><span class="bound"><span class="bound">S</span></span> <span class="main">âŠ†</span> <span class="bound">S'</span><span class="main">.</span> <span class="bound">S</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> subset_closed_def
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">S'</span><span class="main">.</span> finite <span class="bound">S'</span> <span class="main">âŸ¶</span> <span class="bound">S'</span> <span class="main">âŠ†</span> <span class="main">(</span><span class="main">â‹ƒ</span><span class="bound">n</span><span class="main">.</span> <span class="free">f</span> <span class="bound">n</span><span class="main">)</span> <span class="main">âŸ¶</span> <span class="bound">S'</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> chain_union_closed' assms
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main">(</span><span class="main">â‹ƒ</span><span class="bound">n</span><span class="main">.</span> <span class="free">f</span> <span class="bound">n</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">C</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="main">âˆ€</span><span class="bound">S'</span><span class="main">.</span> finite <span class="bound">S'</span> <span class="main">âŸ¶</span> <span class="bound">S'</span> <span class="main">âŠ†</span> <span class="main">(</span><span class="main">â‹ƒ</span><span class="bound">n</span><span class="main">.</span> <span class="free">f</span> <span class="bound">n</span><span class="main">)</span> <span class="main">âŸ¶</span> <span class="bound">S'</span> <span class="main">âˆˆ</span> <span class="free">C</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹finite_char <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> finite_char_def
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">primrec</span></span> <span class="entity">extend</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fm set <span class="main">â‡’</span> <span class="tfree">'i</span> fm set set <span class="main">â‡’</span> <span class="main">(</span>nat <span class="main">â‡’</span> <span class="tfree">'i</span> fm<span class="main">)</span> <span class="main">â‡’</span> nat <span class="main">â‡’</span> <span class="tfree">'i</span> fm setâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">â€¹<span class="free">extend</span> <span class="free"><span class="bound"><span class="entity">S</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">f</span></span></span> <span class="main">0</span> <span class="main">=</span> <span class="free"><span class="bound"><span class="entity">S</span></span></span>â€º</span></span> <span class="main">|</span>
  <span class="quoted"><span class="quoted">â€¹<span class="free">extend</span> <span class="free"><span class="bound"><span class="entity">S</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">f</span></span></span> <span class="main">(</span>Suc <span class="free"><span class="bound"><span class="entity">n</span></span></span><span class="main">)</span> <span class="main">=</span>
    <span class="main">(</span><span class="keyword1">if</span> <span class="free">extend</span> <span class="free"><span class="bound"><span class="entity">S</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">f</span></span></span> <span class="free"><span class="bound"><span class="entity">n</span></span></span> <span class="main">âˆª</span> <span class="main">{</span><span class="free"><span class="bound"><span class="entity">f</span></span></span> <span class="free"><span class="bound"><span class="entity">n</span></span></span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span>
     <span class="keyword1">then</span> <span class="free">extend</span> <span class="free"><span class="bound"><span class="entity">S</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">f</span></span></span> <span class="free"><span class="bound"><span class="entity">n</span></span></span> <span class="main">âˆª</span> <span class="main">{</span><span class="free"><span class="bound"><span class="entity">f</span></span></span> <span class="free"><span class="bound"><span class="entity">n</span></span></span><span class="main">}</span>
     <span class="keyword1">else</span> <span class="free">extend</span> <span class="free"><span class="bound"><span class="entity">S</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">f</span></span></span> <span class="free"><span class="bound"><span class="entity">n</span></span></span><span class="main">)</span>â€º</span></span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">Extend</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fm set <span class="main">â‡’</span> <span class="tfree">'i</span> fm set set <span class="main">â‡’</span> <span class="main">(</span>nat <span class="main">â‡’</span> <span class="tfree">'i</span> fm<span class="main">)</span> <span class="main">â‡’</span> <span class="tfree">'i</span> fm setâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">â€¹<span class="free">Extend</span> <span class="free"><span class="bound"><span class="entity">S</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">f</span></span></span> <span class="main">â‰¡</span> <span class="main">â‹ƒ</span><span class="bound">n</span><span class="main">.</span> extend <span class="free"><span class="bound"><span class="entity">S</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">f</span></span></span> <span class="bound">n</span>â€º</span></span>

<span class="keyword1" id="Epistemic_Logic-is_chain_extend"><span class="command">lemma</span></span> is_chain_extend<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹is_chain <span class="main">(</span>extend <span class="free">S</span> <span class="free">C</span> <span class="free">f</span><span class="main">)</span>â€º</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> is_chain_def<span class="main">)</span> <span class="operator">blast</span>

<span class="keyword1" id="Epistemic_Logic-extend_in_C"><span class="command">lemma</span></span> extend_in_C<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span> <span class="main">âŸ¹</span> <span class="free">S</span> <span class="main">âˆˆ</span> <span class="free">C</span> <span class="main">âŸ¹</span> extend <span class="free">S</span> <span class="free">C</span> <span class="free">f</span> <span class="free">n</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">n</span></span><span class="main">)</span> <span class="operator">simp_all</span>

<span class="keyword1"><span class="command">theorem</span></span> Extend_in_C<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span> <span class="main">âŸ¹</span> finite_char <span class="free">C</span> <span class="main">âŸ¹</span> <span class="free">S</span> <span class="main">âˆˆ</span> <span class="free">C</span> <span class="main">âŸ¹</span> Extend <span class="free">S</span> <span class="free">C</span> <span class="free">f</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
  <span class="keyword1"><span class="command">using</span></span> chain_union_closed is_chain_extend extend_in_C <span class="keyword1"><span class="command">unfolding</span></span> Extend_def
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1"><span class="command">theorem</span></span> Extend_subset<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="free">S</span> <span class="main">âŠ†</span> Extend <span class="free">S</span> <span class="free">C</span> <span class="free">f</span>â€º</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Extend_def <span class="keyword1"><span class="command">using</span></span> Union_upper extend.simps<span class="main">(</span>1<span class="main">)</span> range_eqI
  <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>

<span class="keyword1"><span class="command">definition</span></span> <span class="entity">maximal</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'a</span> set <span class="main">â‡’</span> <span class="tfree">'a</span> set set <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">â€¹<span class="free">maximal</span> <span class="free"><span class="bound"><span class="entity">S</span></span></span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">â‰¡</span> <span class="main">âˆ€</span><span class="bound">S'</span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">.</span> <span class="free"><span class="bound"><span class="entity">S</span></span></span> <span class="main">âŠ†</span> <span class="bound">S'</span> <span class="main">âŸ¶</span> <span class="free"><span class="bound"><span class="entity">S</span></span></span> <span class="main">=</span> <span class="bound">S'</span>â€º</span></span>

<span class="keyword1"><span class="command">theorem</span></span> Extend_maximal<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">y</span> <span class="main">::</span> <span class="tfree">'i</span> fm<span class="main">.</span> <span class="main">âˆƒ</span><span class="bound">n</span><span class="main">.</span> <span class="bound">y</span> <span class="main">=</span> <span class="free">f</span> <span class="bound">n</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹finite_char <span class="free">C</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="main">(</span>Extend <span class="free">S</span> <span class="free">C</span> <span class="free">f</span><span class="main">)</span> <span class="free">C</span>â€º</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> maximal_def Extend_def
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">intro</span> ballI impI<span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">S'</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main">â‹ƒ</span><span class="bound">x</span><span class="main">.</span> extend <span class="free">S</span> <span class="free">C</span> <span class="free">f</span> <span class="bound">x</span><span class="main">)</span> <span class="main">âŠ†</span> <span class="skolem">S'</span>â€º</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="main">(</span><span class="main">â‹ƒ</span><span class="bound">x</span><span class="main">.</span> extend <span class="free">S</span> <span class="free">C</span> <span class="free">f</span> <span class="bound">x</span><span class="main">)</span>â€º</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="skolem">S'</span> <span class="main">âŠ†</span> <span class="main">(</span><span class="main">â‹ƒ</span><span class="bound">x</span><span class="main">.</span> extend <span class="free">S</span> <span class="free">C</span> <span class="free">f</span> <span class="bound">x</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">z</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">z</span> <span class="main">âˆˆ</span> <span class="skolem">S'</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">z</span> <span class="main">âˆ‰</span> <span class="main">(</span><span class="main">â‹ƒ</span><span class="bound">x</span><span class="main">.</span> extend <span class="free">S</span> <span class="free">C</span> <span class="free">f</span> <span class="bound">x</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">n</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">z</span> <span class="main">=</span> <span class="free">f</span> <span class="skolem">n</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">y</span><span class="main">.</span> <span class="main">âˆƒ</span><span class="bound">n</span><span class="main">.</span> <span class="bound">y</span> <span class="main">=</span> <span class="free">f</span> <span class="bound">n</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹extend <span class="free">S</span> <span class="free">C</span> <span class="free">f</span> <span class="skolem">n</span> <span class="main">âˆª</span> <span class="main">{</span><span class="free">f</span> <span class="skolem">n</span><span class="main">}</span> <span class="main">âŠ†</span> <span class="skolem">S'</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main">â‹ƒ</span><span class="bound">x</span><span class="main">.</span> extend <span class="free">S</span> <span class="free">C</span> <span class="free">f</span> <span class="bound">x</span><span class="main">)</span> <span class="main">âŠ†</span> <span class="skolem">S'</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">z</span> <span class="main">=</span> <span class="free">f</span> <span class="skolem">n</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">z</span> <span class="main">âˆˆ</span> <span class="skolem">S'</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹subset_closed <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹finite_char <span class="free">C</span>â€º</span></span> finite_char_closed
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">S'</span> <span class="main">âˆˆ</span> <span class="free">C</span><span class="main">.</span> <span class="main">âˆ€</span><span class="bound"><span class="bound">S</span></span> <span class="main">âŠ†</span> <span class="bound">S'</span><span class="main">.</span> <span class="bound">S</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> subset_closed_def
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound"><span class="bound">S</span></span> <span class="main">âŠ†</span> <span class="skolem">S'</span><span class="main">.</span> <span class="bound">S</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S'</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹extend <span class="free">S</span> <span class="free">C</span> <span class="free">f</span> <span class="skolem">n</span> <span class="main">âˆª</span> <span class="main">{</span><span class="free">f</span> <span class="skolem">n</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹extend <span class="free">S</span> <span class="free">C</span> <span class="free">f</span> <span class="skolem">n</span> <span class="main">âˆª</span> <span class="main">{</span><span class="free">f</span> <span class="skolem">n</span><span class="main">}</span> <span class="main">âŠ†</span> <span class="skolem">S'</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">z</span> <span class="main">âˆˆ</span> extend <span class="free">S</span> <span class="free">C</span> <span class="free">f</span> <span class="main">(</span>Suc <span class="skolem">n</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">z</span> <span class="main">âˆ‰</span> <span class="main">(</span><span class="main">â‹ƒ</span><span class="bound">x</span><span class="main">.</span> extend <span class="free">S</span> <span class="free">C</span> <span class="free">f</span> <span class="bound">x</span><span class="main">)</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">z</span> <span class="main">=</span> <span class="free">f</span> <span class="skolem">n</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">z</span> <span class="main">âˆ‰</span> <span class="main">(</span><span class="main">â‹ƒ</span><span class="bound">x</span><span class="main">.</span> extend <span class="free">S</span> <span class="free">C</span> <span class="free">f</span> <span class="bound">x</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main">â‹ƒ</span><span class="bound">x</span><span class="main">.</span> extend <span class="free">S</span> <span class="free">C</span> <span class="free">f</span> <span class="bound">x</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">S'</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">â€¹K consistencyâ€º</span></span>

<span class="keyword1"><span class="command">theorem</span></span> K_consistency<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹consistency <span class="main">{</span>set <span class="bound">G</span> <span class="main">|</span> <span class="bound">G</span><span class="main">.</span> <span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="bound">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span><span class="main">}</span>â€º</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> consistency_def
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">intro</span> conjI ballI allI impI notI<span class="main">)</span>
  <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">S</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fm setâ€º</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆˆ</span> <span class="main">{</span>set <span class="bound">G</span> <span class="main">|</span> <span class="bound">G</span><span class="main">.</span> <span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="bound">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span><span class="main">}</span>â€º</span></span> <span class="main">(</span><span class="keyword2"><span class="keyword">is</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆˆ</span> <span class="var">?C</span>â€º</span></span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">G</span></span> <span class="keyword2"><span class="keyword">where</span></span> *<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">=</span> set <span class="skolem">G</span>â€º</span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">i</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹Pro <span class="skolem">i</span> <span class="main">âˆˆ</span> <span class="skolem">S</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> Pro <span class="skolem">i</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main">(</span>Pro <span class="skolem">i</span><span class="main">)</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> Pro <span class="skolem">i</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> K_imply_member * <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> K_FFI K_right_mp <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> K_imply_member * <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">Z</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">Z</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">Z</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> K_imply_member * <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="main">(</span><span class="skolem">Z</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> K_ImpI K_right_mp <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">Z</span><span class="main">}</span> <span class="main">=</span> set <span class="main">(</span><span class="skolem">Z</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> * <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">Z</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="var">?C</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">B</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">B</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> K_imply_member * <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="main">(</span><span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">A</span><span class="main">)</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="main">(</span><span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">B</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> A1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span><span class="main"><span class="keyword3">+</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="skolem">A</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="skolem">B</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> K_right_mp K_imply_head R1 <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> imply.simps<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="main">(</span><span class="skolem">A</span> <span class="main">#</span> <span class="skolem">B</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> K_imply_Cons <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span> cut <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="skolem">B</span><span class="main">}</span> <span class="main">=</span> set <span class="main">(</span><span class="skolem">A</span> <span class="main">#</span> <span class="skolem">B</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> * <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="var">?C</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">B</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span><span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">)</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> * K_imply_Cons K_imply_member <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span><span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">)</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp_all</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> A1 tautology_imply<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span><span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">)</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> K_right_mp <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>

    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="main">(</span><span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">)</span> <span class="main">#</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span> cut <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">,</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span> <span class="main">=</span> set <span class="main">(</span><span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">)</span> <span class="main">#</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> * <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">,</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="var">?C</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">B</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span><span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">)</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> * K_imply_member K_imply_Cons <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span>
      <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span><span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">A</span><span class="main">)</span>â€º</span></span>
      <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp_all</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> A1 tautology_imply<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span><span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="skolem">A</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> K_right_mp <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>

    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="main">(</span><span class="skolem">A</span> <span class="main">#</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span> cut <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span> <span class="main">=</span> set <span class="main">(</span><span class="skolem">A</span> <span class="main">#</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> * <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">,</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="var">?C</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">B</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">B</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> * K_imply_member <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>

    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main">âˆ€</span><span class="bound">G'</span><span class="main">.</span> set <span class="bound">G'</span> <span class="main">=</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">}</span> <span class="main">âŸ¶</span> <span class="main">âŠ¢</span> imply <span class="bound">G'</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span><span class="main">)</span>â€º</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main">âˆ€</span><span class="bound">G'</span><span class="main">.</span> set <span class="bound">G'</span> <span class="main">=</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span> <span class="main">âŸ¶</span> <span class="main">âŠ¢</span> imply <span class="bound">G'</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span><span class="skolem">A</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span><span class="skolem">B</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> * <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Un_insert_right list.simps<span class="main"><span class="main">(</span></span>15<span class="main"><span class="main">)</span></span> sup_bot.right_neutral<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">B</span><span class="main">)</span>â€º</span></span> K_DisE <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="var">?C</span> <span class="main">âˆ¨</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="var">?C</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">B</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> * K_imply_member <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> A1 tautology_imply<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main">(</span><span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> K_right_mp <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main">âˆ€</span><span class="bound">G'</span><span class="main">.</span> set <span class="bound">G'</span> <span class="main">=</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">}</span> <span class="main">âŸ¶</span> <span class="main">âŠ¢</span> imply <span class="bound">G'</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span><span class="main">)</span>â€º</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main">âˆ€</span><span class="bound">G'</span><span class="main">.</span> set <span class="bound">G'</span> <span class="main">=</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âŸ¶</span> <span class="main">âŠ¢</span> imply <span class="bound">G'</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span><span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">)</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span><span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> * <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Un_insert_right list.simps<span class="main"><span class="main">(</span></span>15<span class="main"><span class="main">)</span></span> sup_bot.right_neutral<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> K_DisE <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main">(</span><span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">)</span><span class="main">)</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="var">?C</span> <span class="main">âˆ¨</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="var">?C</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">B</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">B</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> * K_imply_member <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main">(</span><span class="main">(</span><span class="skolem">A</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">B</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">B</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> A1 tautology_imply<span class="main">)</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main">(</span><span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">B</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> K_right_mp <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

    <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main">âˆ€</span><span class="bound">G'</span><span class="main">.</span> set <span class="bound">G'</span> <span class="main">=</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">}</span> <span class="main">âŸ¶</span> <span class="main">âŠ¢</span> imply <span class="bound">G'</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span><span class="main">)</span>â€º</span></span>
        <span class="keyword2"><span class="keyword">and</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main">âˆ€</span><span class="bound">G'</span><span class="main">.</span> set <span class="bound">G'</span> <span class="main">=</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span> <span class="main">âŸ¶</span> <span class="main">âŠ¢</span> imply <span class="bound">G'</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span><span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">)</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span><span class="skolem">B</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> * <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> Un_insert_right list.simps<span class="main"><span class="main">(</span></span>15<span class="main"><span class="main">)</span></span> sup_bot.right_neutral<span class="main">)</span><span class="main"><span class="keyword3">+</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> K_DisE <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main">(</span><span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">B</span><span class="main">)</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">A</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="var">?C</span> <span class="main">âˆ¨</span> <span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">B</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="var">?C</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fmâ€º</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹tautology <span class="skolem">A</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="skolem">A</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> tautology_imply A1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span><span class="skolem">A</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span> <span class="main">âŸ¹</span> <span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> cut <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">}</span> <span class="main">=</span> set <span class="main">(</span><span class="skolem">A</span> <span class="main">#</span> <span class="skolem">G</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> * <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">A</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="var">?C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">A</span> <span class="skolem">i</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹K <span class="skolem">i</span> <span class="skolem">A</span> <span class="main">âˆˆ</span> <span class="skolem">S</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> K <span class="skolem">i</span> <span class="skolem">A</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">S</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main">(</span>K <span class="skolem">i</span> <span class="skolem">A</span><span class="main">)</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> K <span class="skolem">i</span> <span class="skolem">A</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> K_imply_member * <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> K_FFI K_right_mp <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="skolem">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>

<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> K_finite_consistency<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹consistency <span class="main">(</span>mk_finite_char <span class="main">(</span>close <span class="main">{</span>set <span class="bound">G</span> <span class="main">|</span> <span class="bound">G</span><span class="main">.</span> <span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="bound">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span><span class="main">}</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
  <span class="keyword1"><span class="command">using</span></span> K_consistency finite_consistency close_closed close_consistency <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1"><span class="command">theorem</span></span> K_concrete_finite_consistency<span class="main">:</span>
  <span class="keyword2"><span class="keyword">defines</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">C</span> <span class="main">â‰¡</span> mk_finite_char <span class="main">(</span>close <span class="main">{</span>set <span class="bound">G</span> <span class="main">|</span> <span class="bound">G</span><span class="main">.</span> <span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="bound">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span><span class="main">}</span><span class="main">)</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹set <span class="free">G</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="free">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> C_def mk_finite_char_def close_def
  <span class="keyword1"><span class="command">using</span></span> K_imply_weaken <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">â€¹Model existenceâ€º</span></span>

<span class="keyword1" id="Epistemic_Logic-at_least_one_in_maximal"><span class="command">lemma</span></span> at_least_one_in_maximal<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="free">V</span> <span class="free">C</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">p</span> <span class="main">âˆˆ</span> <span class="free">V</span> <span class="main">âˆ¨</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="free">p</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span> <span class="main">âˆ¨</span> <span class="free">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">(</span><span class="free">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="free">p</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span> <span class="main">âˆ¨</span> <span class="free">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">}</span> <span class="main">âˆ‰</span> <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> consistency_def maximal_def
      <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> hide_lams<span class="main"><span class="main">)</span></span> insert_iff subset_iff sup.absorb_iff1 sup.cobounded1<span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
      <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> consistency_def maximal_def
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="free">V</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> maximal_def
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Epistemic_Logic-at_most_one_in_maximal"><span class="command">lemma</span></span> at_most_one_in_maximal<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="free">V</span> <span class="free">C</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">(</span><span class="free">p</span> <span class="main">âˆˆ</span> <span class="free">V</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span><span class="main">)</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">p</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span> FF
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
    <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Pro <span class="skolem">x</span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
    <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Dis <span class="skolem">p</span> <span class="skolem">q</span><span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">q</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">p</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span> <span class="main">âˆ¨</span> <span class="free">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">,</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">p</span> <span class="main">âˆˆ</span> <span class="free">V</span> <span class="main">âˆ¨</span> <span class="skolem">q</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="free">V</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> maximal_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span><span class="main"><span class="keyword3">+</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
      <span class="keyword1"><span class="command">using</span></span> Dis <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Con <span class="skolem">p</span> <span class="skolem">q</span><span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">q</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">p</span><span class="main">,</span> <span class="skolem">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span> <span class="main">âˆ¨</span> <span class="free">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">p</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">q</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span> <span class="main">âˆ¨</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="free">V</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> maximal_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span><span class="main"><span class="keyword3">+</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
      <span class="keyword1"><span class="command">using</span></span> Con <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Imp <span class="skolem">p</span> <span class="skolem">q</span><span class="main">)</span>
  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">q</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span> <span class="main">âˆ¨</span> <span class="free">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">p</span><span class="main">,</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp_all</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span> <span class="main">âˆ¨</span> <span class="skolem">q</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">p</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="free">V</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> maximal_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span><span class="main"><span class="keyword3">+</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
      <span class="keyword1"><span class="command">using</span></span> Imp <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>K <span class="skolem">i</span> <span class="skolem">p</span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> exactly_one_in_maximal<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="free">V</span> <span class="free">C</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="free">p</span> <span class="main">âˆˆ</span> <span class="free">V</span><span class="main">)</span> <span class="main">â‰ </span> <span class="main">(</span><span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span><span class="main">)</span>â€º</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms at_least_one_in_maximal at_most_one_in_maximal <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

<span class="keyword1"><span class="command">theorem</span></span> conjuncts_in_maximal<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="free">V</span> <span class="free">C</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="free">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span> <span class="main">âŸ·</span> <span class="free">p</span> <span class="main">âˆˆ</span> <span class="free">V</span> <span class="main">âˆ§</span> <span class="free">q</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="free">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="free">p</span><span class="main">,</span> <span class="free">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="free">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">p</span> <span class="main">âˆˆ</span> <span class="free">V</span> <span class="main">âˆ§</span> <span class="free">q</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="free">V</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> maximal_def
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">p</span> <span class="main">âˆˆ</span> <span class="free">V</span> <span class="main">âˆ§</span> <span class="free">q</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span>
  <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="free">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="free">q</span><span class="main">)</span> <span class="main">âˆ‰</span> <span class="free">V</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="free">q</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> at_least_one_in_maximal assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span> <span class="main">âˆ¨</span> <span class="free">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span> <span class="main">âˆ¨</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="free">V</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> maximal_def
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">p</span> <span class="main">âˆˆ</span> <span class="free">V</span> <span class="main">âˆ§</span> <span class="free">q</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span> assms at_most_one_in_maximal
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> consequent_in_maximal<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="free">V</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">p</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="free">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">q</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">consider</span></span> <span class="main">(</span>np<span class="main">)</span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="main">|</span> <span class="main">(</span>q<span class="main">)</span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="free">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="free">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">metis</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="operator">cases</span>
    <span class="keyword3"><span class="command">case</span></span> np
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="free">V</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> maximal_def
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
      <span class="keyword1"><span class="command">using</span></span> assms at_most_one_in_maximal
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> q
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="free">V</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> maximal_def
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Epistemic_Logic-K_not_neg_in_consistency"><span class="command">lemma</span></span> K_not_neg_in_consistency<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span> <span class="main">âŸ¹</span> <span class="main">{</span><span class="free">p</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="main">{</span>set <span class="bound">G</span> <span class="main">|</span> <span class="bound">G</span><span class="main">.</span> <span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="bound">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span><span class="main">}</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span>â€º</span></span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹set <span class="main">[</span><span class="free">p</span><span class="main">]</span> <span class="main">=</span> <span class="main">{</span><span class="free">p</span><span class="main">}</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹imply <span class="main">[</span><span class="free">p</span><span class="main">]</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span> <span class="main">=</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Epistemic_Logic-K_inconsistent_neg"><span class="command">lemma</span></span> K_inconsistent_neg<span class="main">:</span>
  <span class="keyword2"><span class="keyword">defines</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">C</span> <span class="main">â‰¡</span> mk_finite_char <span class="main">(</span>close <span class="main">{</span>set <span class="bound">G</span> <span class="main">|</span> <span class="bound">G</span><span class="main">.</span> <span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="bound">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span><span class="main">}</span><span class="main">)</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">{</span><span class="free">p</span><span class="main">}</span> <span class="main">âˆ‰</span> <span class="free">C</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span>â€º</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> C_def mk_finite_char_def close_def
  <span class="keyword1"><span class="command">using</span></span> K_not_neg_in_consistency <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>

<span class="keyword1" id="Epistemic_Logic-conjuncts_in_consistency"><span class="command">lemma</span></span> conjuncts_in_consistency<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹subset_closed <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="free">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="free">p</span><span class="main">,</span> <span class="free">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?S</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹<span class="free">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="free">q</span><span class="main">}</span>â€º</span></span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="free">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="var">?S</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="free">p</span><span class="main">,</span> <span class="free">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="free">p</span><span class="main">,</span> <span class="free">q</span><span class="main">}</span> <span class="main">âŠ†</span> <span class="var">?S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="free">p</span><span class="main">,</span> <span class="free">q</span><span class="main">}</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="free">p</span><span class="main">,</span> <span class="free">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹subset_closed <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> subset_closed_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Epistemic_Logic-conjoined_in_consistency"><span class="command">lemma</span></span> conjoined_in_consistency<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹subset_closed <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">S</span> <span class="main">âˆª</span> <span class="main">{</span>conjoin <span class="free">ps</span> <span class="free">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">S</span> <span class="main">âˆª</span> set <span class="free">ps</span> <span class="main">âˆª</span> <span class="main">{</span><span class="free">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
  <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">S</span> <span class="main">âˆª</span> <span class="main">{</span>conjoin <span class="free">ps</span> <span class="free">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">ps</span></span> <span class="quasi_keyword">arbitrary</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="free">S</span></span><span class="main">)</span>
  <span class="keyword3"><span class="command">case</span></span> Nil
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹subset_closed <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> subset_closed_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Cons <span class="skolem">p</span> <span class="skolem">ps</span><span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">p</span><span class="main">,</span> conjoin <span class="skolem">ps</span> <span class="free">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms conjuncts_in_consistency <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">S</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">p</span><span class="main">}</span> <span class="main">âˆª</span> <span class="main">{</span>conjoin <span class="skolem">ps</span> <span class="free">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> insert_is_Un sup_assoc<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
    <span class="keyword1"><span class="command">using</span></span> Cons <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Epistemic_Logic-inconsistent_conjoin"><span class="command">lemma</span></span> inconsistent_conjoin<span class="main">:</span>
  <span class="keyword2"><span class="keyword">defines</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">C</span> <span class="main">â‰¡</span> mk_finite_char <span class="main">(</span>close <span class="main">{</span>set <span class="bound">G</span> <span class="main">|</span> <span class="bound">G</span><span class="main">.</span> <span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="bound">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span><span class="main">}</span><span class="main">)</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹set <span class="free">G</span> <span class="main">âˆª</span> <span class="main">{</span><span class="free">p</span><span class="main">}</span> <span class="main">âˆ‰</span> <span class="free">C</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> conjoin <span class="free">G</span> <span class="free">p</span><span class="main">)</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> C_def <span class="keyword1"><span class="command">using</span></span> K_finite_consistency <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹subset_closed <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> C_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> finite_char finite_char_closed<span class="main">)</span>

  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> conjoin <span class="free">G</span> <span class="free">p</span><span class="main">)</span>â€º</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">{</span>conjoin <span class="free">G</span> <span class="free">p</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> C_def <span class="keyword1"><span class="command">using</span></span> K_inconsistent_neg <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹set <span class="free">G</span> <span class="main">âˆª</span> <span class="main">{</span><span class="free">p</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> conjoined_in_consistency <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹subset_closed <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
    <span class="keyword1"><span class="command">using</span></span> assms<span class="main">(</span>2<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> K_in_maximal<span class="main">:</span>
  <span class="keyword2"><span class="keyword">defines</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">C</span> <span class="main">â‰¡</span> mk_finite_char <span class="main">(</span>close <span class="main">{</span>set <span class="bound">G</span> <span class="main">|</span> <span class="bound">G</span><span class="main">.</span> <span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="bound">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span><span class="main">}</span><span class="main">)</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="free">p</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="free">V</span> <span class="free">C</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">p</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> C_def <span class="keyword1"><span class="command">using</span></span> K_finite_consistency <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹subset_closed <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> C_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> finite_char finite_char_closed<span class="main">)</span>

  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="main">(</span><span class="free">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> A1<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="free">p</span>â€º</span></span> R1 <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> ccontr<span class="main">)</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">p</span> <span class="main">âˆ‰</span> <span class="free">V</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> at_least_one_in_maximal <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="free">V</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹set <span class="main">[</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">]</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹subset_closed <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> subset_closed_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> C_def K_concrete_finite_consistency <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
      <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1" id="Epistemic_Logic-exists_finite_inconsistent"><span class="command">lemma</span></span> exists_finite_inconsistent<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">C</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fm set setâ€º</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹finite_char <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">}</span> <span class="main">âˆ‰</span> <span class="free">C</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆƒ</span><span class="bound">W</span><span class="main">.</span> <span class="bound">W</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">}</span> <span class="main">âŠ†</span> <span class="free">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">}</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span> <span class="main">âˆ‰</span> <span class="bound">W</span> <span class="main">âˆ§</span> finite <span class="bound">W</span> <span class="main">âˆ§</span> <span class="bound">W</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">}</span> <span class="main">âˆ‰</span> <span class="free">C</span>â€º</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms <span class="keyword1"><span class="command">unfolding</span></span> finite_char_def
  <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">smt</span> Un_insert_right Un_subset_iff finite_insert inf_sup_ord<span class="main"><span class="main">(</span></span>4<span class="main"><span class="main">)</span></span>
      mk_disjoint_insert sup_bot.comm_neutral sup_ge1<span class="main">)</span>

<span class="keyword1"><span class="command">theorem</span></span> exists_maximal_superset<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">C</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="tfree">'i</span> <span class="main">::</span> countable<span class="main">)</span> fm set setâ€º</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹finite_char <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">obtains</span></span> <span class="free">W</span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âŠ†</span> <span class="free">W</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹ <span class="free">W</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="free">W</span> <span class="free">C</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?W</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹Extend <span class="free">V</span> <span class="free">C</span> from_natâ€º</span></span>

  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âŠ†</span> <span class="var">?W</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> Extend_subset <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?W</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms Extend_in_C <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="var">?W</span> <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> assms Extend_maximal
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> from_nat_to_nat<span class="main">)</span>
  <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">using</span></span> that <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">type_synonym</span></span> <span class="tfree">'i</span> s_max <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fm setâ€º</span></span>

<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">pi</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> s_max <span class="main">â‡’</span> id <span class="main">â‡’</span> boolâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">â€¹<span class="free">pi</span> <span class="free"><span class="bound"><span class="entity">s</span></span></span> <span class="free"><span class="bound"><span class="entity">i</span></span></span> <span class="main">â‰¡</span> Pro <span class="free"><span class="bound"><span class="entity">i</span></span></span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">s</span></span></span>â€º</span></span>

<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">partition</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fm set <span class="main">â‡’</span> <span class="tfree">'i</span> <span class="main">â‡’</span> <span class="tfree">'i</span> fm setâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">â€¹<span class="free">partition</span> <span class="free"><span class="bound"><span class="entity">V</span></span></span> <span class="free"><span class="bound"><span class="entity">i</span></span></span> <span class="main">â‰¡</span> <span class="main">{</span><span class="bound">p</span><span class="main">.</span> K <span class="free"><span class="bound"><span class="entity">i</span></span></span> <span class="bound">p</span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">V</span></span></span><span class="main">}</span>â€º</span></span>

<span class="keyword1"><span class="command">abbreviation</span></span> <span class="entity">reach</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="tfree">'i</span> fm set set <span class="main">â‡’</span> <span class="tfree">'i</span> <span class="main">â‡’</span> <span class="tfree">'i</span> s_max <span class="main">â‡’</span> <span class="tfree">'i</span> s_max setâ€º</span></span> <span class="keyword2"><span class="keyword">where</span></span>
  <span class="quoted"><span class="quoted">â€¹<span class="free">reach</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="free"><span class="bound"><span class="entity">i</span></span></span> <span class="free"><span class="bound"><span class="entity">V</span></span></span> <span class="main">â‰¡</span> <span class="main">{</span><span class="bound">W</span><span class="main">.</span> partition <span class="free"><span class="bound"><span class="entity">V</span></span></span> <span class="free"><span class="bound"><span class="entity">i</span></span></span> <span class="main">âŠ†</span> <span class="bound">W</span> <span class="main">âˆ§</span> <span class="bound">W</span> <span class="main">âˆˆ</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span> <span class="main">âˆ§</span> maximal <span class="bound">W</span> <span class="free"><span class="bound"><span class="entity">C</span></span></span><span class="main">}</span>â€º</span></span>

<span class="keyword1"><span class="command">theorem</span></span> model_existence<span class="main">:</span>
  <span class="keyword2"><span class="keyword">fixes</span></span> <span class="free">p</span> <span class="main">::</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="tfree">'i</span> <span class="main">::</span> countable<span class="main">)</span> fmâ€º</span></span>
  <span class="keyword2"><span class="keyword">defines</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">C</span> <span class="main">â‰¡</span> mk_finite_char <span class="main">(</span>close <span class="main">{</span>set <span class="bound">G</span> <span class="main">|</span> <span class="bound">G</span><span class="main">.</span> <span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="bound">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span><span class="main">}</span><span class="main">)</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="free">V</span> <span class="free">C</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="free">p</span> <span class="main">âˆˆ</span> <span class="free">V</span> <span class="main">âŸ·</span> Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="free">V</span> <span class="main">âŠ¨</span> <span class="free">p</span><span class="main">)</span> <span class="main">âˆ§</span>
    <span class="main">(</span><span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="free">V</span> <span class="main">âŸ·</span> Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="free">V</span> <span class="main">âŠ¨</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="operator">-</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> C_def <span class="keyword1"><span class="command">using</span></span> K_finite_consistency <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹finite_char <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> C_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> finite_char<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹subset_closed <span class="free">C</span>â€º</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> C_def <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> finite_char finite_char_closed<span class="main">)</span>

  <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?thesis</span></span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="free">V</span> <span class="free">C</span>â€º</span></span>
  <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="free">p</span></span> <span class="quasi_keyword">arbitrary</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="free">V</span></span><span class="main">)</span>
    <span class="keyword3"><span class="command">case</span></span> FF
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">intro</span> conjI impI iffI<span class="main">)</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted">False</span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span> <span class="keyword1"><span class="command">..</span></span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
      <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>
      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span> <span class="main">âˆ‰</span> <span class="skolem">V</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> at_least_one_in_maximal FF <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Pro <span class="skolem">i</span><span class="main">)</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">intro</span> conjI impI iffI<span class="main">)</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹Pro <span class="skolem">i</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹pi <span class="skolem">V</span> <span class="skolem">i</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="skolem">V</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> Pro <span class="skolem">i</span>â€º</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> Pro <span class="skolem">i</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹Pro <span class="skolem">i</span> <span class="main">âˆ‰</span> <span class="skolem">V</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">(</span>pi <span class="skolem">V</span> <span class="skolem">i</span><span class="main">)</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="skolem">V</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> Pro <span class="skolem">i</span>â€º</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> Pro <span class="skolem">i</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹Pro <span class="skolem">i</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">next</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> Pro <span class="skolem">i</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹Pro <span class="skolem">i</span> <span class="main">âˆ‰</span> <span class="skolem">V</span>â€º</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> Pro <span class="skolem">i</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> at_least_one_in_maximal Pro <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">qed</span></span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Dis <span class="skolem">p</span> <span class="skolem">q</span><span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span> <span class="main">âŸ¶</span> Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> <span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">q</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">p</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span> <span class="main">âˆ¨</span> <span class="skolem">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">consider</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">p</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span> <span class="main">|</span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">q</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="skolem">V</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> maximal_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> <span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">q</span><span class="main">)</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> Dis <span class="keyword1"><span class="command">by</span></span> <span class="operator">cases</span> <span class="operator">simp_all</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">q</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span> <span class="main">âŸ¶</span> Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">q</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">q</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">,</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="skolem">V</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> maximal_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ¨</b></span> <span class="skolem">q</span><span class="main">)</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> Dis <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">using</span></span> at_least_one_in_maximal Dis <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Con <span class="skolem">p</span> <span class="skolem">q</span><span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span> <span class="main">âŸ¶</span> Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> <span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">q</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">p</span><span class="main">,</span> <span class="skolem">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">p</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">q</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="skolem">V</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> maximal_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span><span class="main"><span class="keyword3">+</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> <span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">q</span><span class="main">)</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> Con <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">q</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span> <span class="main">âŸ¶</span> Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">q</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">q</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span> <span class="main">âˆ¨</span> <span class="skolem">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">consider</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span> <span class="main">|</span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="skolem">V</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> maximal_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âˆ§</b></span> <span class="skolem">q</span><span class="main">)</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> Con <span class="keyword1"><span class="command">by</span></span> <span class="operator">cases</span> <span class="operator">simp_all</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">using</span></span> at_least_one_in_maximal Con <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Imp <span class="skolem">p</span> <span class="skolem">q</span><span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span> <span class="main">âŸ¶</span> Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> <span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">q</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span> <span class="main">âˆ¨</span> <span class="skolem">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">consider</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span> <span class="main">|</span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">q</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="skolem">V</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> maximal_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> <span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">q</span><span class="main">)</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> Imp <span class="keyword1"><span class="command">by</span></span> <span class="operator">cases</span> <span class="operator">simp_all</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">q</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span> <span class="main">âŸ¶</span> Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">q</span><span class="main">)</span>â€º</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">q</span><span class="main">)</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">V</span> <span class="main">âˆª</span> <span class="main">{</span><span class="skolem">p</span><span class="main">,</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">q</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> consistency_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">p</span> <span class="main">âˆˆ</span> <span class="skolem">V</span> <span class="main">âˆ§</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">q</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="skolem">V</span> <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">unfolding</span></span> maximal_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="main">(</span><span class="skolem">p</span> <span class="main"><span class="hidden">â™</span><b>âŸ¶</b></span> <span class="skolem">q</span><span class="main">)</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> Imp <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">using</span></span> at_least_one_in_maximal Imp <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
  <span class="keyword1"><span class="command">next</span></span>
    <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>K <span class="skolem">i</span> <span class="skolem">p</span><span class="main">)</span>
    <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹K <span class="skolem">i</span> <span class="skolem">p</span> <span class="main">âˆˆ</span> <span class="skolem">V</span> <span class="main">âŸ¶</span> Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> K <span class="skolem">i</span> <span class="skolem">p</span>â€º</span></span>
    <span class="keyword1"><span class="command">proof</span></span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹K <span class="skolem">i</span> <span class="skolem">p</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">W</span> <span class="main">âˆˆ</span> reach <span class="free">C</span> <span class="skolem">i</span> <span class="skolem">V</span><span class="main">.</span> <span class="skolem">p</span> <span class="main">âˆˆ</span> <span class="bound">W</span> <span class="main">âˆ§</span> <span class="bound">W</span> <span class="main">âˆˆ</span> <span class="free">C</span> <span class="main">âˆ§</span> maximal <span class="bound">W</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">W</span> <span class="main">âˆˆ</span> reach <span class="free">C</span> <span class="skolem">i</span> <span class="skolem">V</span><span class="main">.</span> Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="bound">W</span> <span class="main">âŠ¨</span> <span class="skolem">p</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> K <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> K <span class="skolem">i</span> <span class="skolem">p</span>â€º</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span>Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> K <span class="skolem">i</span> <span class="skolem">p</span><span class="main">)</span> <span class="main">âŸ¶</span> K <span class="skolem">i</span> <span class="skolem">p</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
    <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">intro</span> allI impI<span class="main">)</span>
      <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> K <span class="skolem">i</span> <span class="skolem">p</span>â€º</span></span>

      <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹partition <span class="skolem">V</span> <span class="skolem">i</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">}</span> <span class="main">âˆ‰</span> <span class="free">C</span>â€º</span></span>
      <span class="keyword1"><span class="command">proof</span></span>
        <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹partition <span class="skolem">V</span> <span class="skolem">i</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">}</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">W</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹partition <span class="skolem">V</span> <span class="skolem">i</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">}</span> <span class="main">âŠ†</span> <span class="skolem">W</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">W</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="skolem">W</span> <span class="free">C</span>â€º</span></span>
          <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹finite_char <span class="free">C</span>â€º</span></span> exists_maximal_superset <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">W</span> <span class="main">âŠ¨</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span>â€º</span></span>
          <span class="keyword1"><span class="command">using</span></span> K <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹finite_char <span class="free">C</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
        <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">W</span> <span class="main">âˆˆ</span> reach <span class="free">C</span> <span class="skolem">i</span> <span class="skolem">V</span>â€º</span></span>
          <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹partition <span class="skolem">V</span> <span class="skolem">i</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">}</span> <span class="main">âŠ†</span> <span class="skolem">W</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">W</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="skolem">W</span> <span class="free">C</span>â€º</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
        <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> K <span class="skolem">i</span> <span class="skolem">p</span>â€º</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
          <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> K <span class="skolem">i</span> <span class="skolem">p</span>â€º</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">qed</span></span>

      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">W</span></span> <span class="keyword2"><span class="keyword">where</span></span>
        <span class="quoted"><span class="quoted">â€¹<span class="skolem">W</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">}</span> <span class="main">âŠ†</span> partition <span class="skolem">V</span> <span class="skolem">i</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">}</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">)</span> <span class="main">âˆ‰</span> <span class="skolem">W</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">W</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">W</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">}</span> <span class="main">âˆ‰</span> <span class="free">C</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹finite_char <span class="free">C</span>â€º</span></span> exists_finite_inconsistent <span class="keyword1"><span class="command">by</span></span> <span class="operator">force</span>

      <span class="keyword3"><span class="command">obtain</span></span> <span class="skolem"><span class="skolem">L</span></span> <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted">â€¹set <span class="skolem">L</span> <span class="main">=</span> <span class="skolem">W</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹finite <span class="skolem">W</span>â€º</span></span> finite_list <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> conjoin <span class="skolem">L</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">)</span><span class="main">)</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> inconsistent_conjoin <span class="quoted"><span class="quoted">â€¹<span class="skolem">W</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">}</span> <span class="main">âˆ‰</span> <span class="free">C</span>â€º</span></span> C_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="skolem">L</span> <span class="skolem">p</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> K_conjoin_imply <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> K <span class="skolem">i</span> <span class="main">(</span>imply <span class="skolem">L</span> <span class="skolem">p</span><span class="main">)</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> R2 <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="main">(</span>map <span class="main">(</span>K <span class="skolem">i</span><span class="main">)</span> <span class="skolem">L</span><span class="main">)</span> <span class="main">(</span>K <span class="skolem">i</span> <span class="skolem">p</span><span class="main">)</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> K_distrib_K_imp <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹imply <span class="main">(</span>map <span class="main">(</span>K <span class="skolem">i</span><span class="main">)</span> <span class="skolem">L</span><span class="main">)</span> <span class="main">(</span>K <span class="skolem">i</span> <span class="skolem">p</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> K_in_maximal K.prems<span class="main">(</span>1<span class="main">,</span> 2<span class="main">)</span> <span class="keyword1"><span class="command">unfolding</span></span> C_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
      <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹K <span class="skolem">i</span> <span class="skolem">p</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
        <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹set <span class="skolem">L</span> <span class="main">=</span> <span class="skolem">W</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">W</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">}</span> <span class="main">âŠ†</span> partition <span class="skolem">V</span> <span class="skolem">i</span> <span class="main">âˆª</span> <span class="main">{</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">}</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="skolem">p</span><span class="main">)</span> <span class="main">âˆ‰</span> <span class="skolem">W</span>â€º</span></span>
      <span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="skolem">L</span></span> <span class="quasi_keyword">arbitrary</span><span class="main"><span class="main">:</span></span> <span class="quoted"><span class="skolem">W</span></span><span class="main">)</span>
        <span class="keyword3"><span class="command">case</span></span> Nil
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
      <span class="keyword1"><span class="command">next</span></span>
        <span class="keyword3"><span class="command">case</span></span> <span class="main">(</span>Cons <span class="skolem">a</span> <span class="skolem">L</span><span class="main">)</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹K <span class="skolem">i</span> <span class="skolem">a</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹imply <span class="main">(</span>map <span class="main">(</span>K <span class="skolem">i</span><span class="main">)</span> <span class="skolem">L</span><span class="main">)</span> <span class="main">(</span>K <span class="skolem">i</span> <span class="skolem">p</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
          <span class="keyword1"><span class="command">using</span></span> Cons<span class="main">(</span>2<span class="main">)</span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">V</span> <span class="main">âˆˆ</span> <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="skolem">V</span> <span class="free">C</span>â€º</span></span> consequent_in_maximal <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
        <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
          <span class="keyword1"><span class="command">using</span></span> Cons <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
      <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">qed</span></span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span>Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> K <span class="skolem">i</span> <span class="skolem">p</span><span class="main">)</span> <span class="main">âŸ¶</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> K <span class="skolem">i</span> <span class="skolem">p</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> K.prems<span class="main">(</span>1<span class="main">)</span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="skolem">V</span> <span class="free">C</span>â€º</span></span> at_least_one_in_maximal calculation<span class="main">(</span>1<span class="main">)</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">moreover</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> K <span class="skolem">i</span> <span class="skolem">p</span><span class="main">)</span> <span class="main">âˆˆ</span> <span class="skolem">V</span> <span class="main">âŸ¶</span> Kripke pi <span class="main">(</span>reach <span class="free">C</span><span class="main">)</span><span class="main">,</span> <span class="skolem">V</span> <span class="main">âŠ¨</span> <span class="main"><span class="hidden">â™</span><b>Â¬</b></span> K <span class="skolem">i</span> <span class="skolem">p</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> K.prems<span class="main">(</span>1<span class="main">)</span> <span class="quoted"><span class="quoted">â€¹consistency <span class="free">C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="skolem">V</span> <span class="free">C</span>â€º</span></span> calculation<span class="main">(</span>2<span class="main">)</span> exactly_one_in_maximal <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>
    <span class="keyword1"><span class="command">ultimately</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="var"><span class="quoted"><span class="var">?case</span></span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">qed</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="plain_text">â€¹Completenessâ€º</span></span>

<span class="keyword1" id="Epistemic_Logic-imply_completeness"><span class="command">lemma</span></span> imply_completeness<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> valid<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="main">(</span><span class="bound">M</span> <span class="main">::</span> <span class="main">(</span><span class="tfree">'i</span><span class="main">,</span> <span class="main">(</span><span class="tfree">'i</span> <span class="main">::</span> countable<span class="main">)</span> fm set<span class="main">)</span> kripke<span class="main">)</span> <span class="bound">s</span><span class="main">.</span>
    list_all <span class="main">(</span><span class="main">Î»</span><span class="bound">q</span><span class="main">.</span> <span class="bound">M</span><span class="main">,</span> <span class="bound">s</span> <span class="main">âŠ¨</span> <span class="bound">q</span><span class="main">)</span> <span class="free">G</span> <span class="main">âŸ¶</span> <span class="bound">M</span><span class="main">,</span> <span class="bound">s</span> <span class="main">âŠ¨</span> <span class="free">p</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> imply <span class="free">G</span> <span class="free">p</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span> <span class="main">(</span><span class="operator">rule</span> K_Boole<span class="main"><span class="keyword3">,</span></span> <span class="operator">rule</span> ccontr<span class="main">)</span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="main">(</span><span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span> <span class="main">#</span> <span class="free">G</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span>

  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?S</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹set <span class="main">(</span><span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span> <span class="main">#</span> <span class="free">G</span><span class="main">)</span>â€º</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?C</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹mk_finite_char <span class="main">(</span>close <span class="main">{</span>set <span class="bound">G</span> <span class="main">|</span> <span class="bound">G</span><span class="main">.</span> <span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="bound">G</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span><span class="main">}</span><span class="main">)</span>â€º</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?V</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹Extend <span class="var">?S</span> <span class="var">?C</span> from_natâ€º</span></span>
  <span class="keyword1"><span class="command">let</span></span> <span class="var"><span class="quoted"><span class="var">?M</span></span></span> <span class="main">=</span> <span class="quoted"><span class="quoted">â€¹Kripke pi <span class="main">(</span>reach <span class="var">?C</span><span class="main">)</span>â€º</span></span>

  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹consistency <span class="var">?C</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> K_finite_consistency<span class="main">)</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹subset_closed <span class="var">?C</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> finite_char finite_char_closed <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹finite_char <span class="var">?C</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> finite_char <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?S</span> <span class="main">âˆˆ</span> <span class="var">?C</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">Â¬</span> <span class="main">âŠ¢</span> imply <span class="main">(</span><span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span> <span class="main">#</span> <span class="free">G</span><span class="main">)</span> <span class="main"><span class="hidden">â™</span><b>âŠ¥</b></span>â€º</span></span> close_closed close_subset finite_char_subset
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">fast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?V</span> <span class="main">âˆˆ</span> <span class="var">?C</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> Extend_in_C K_finite_consistency <span class="quoted"><span class="quoted">â€¹finite_char <span class="var">?C</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

  <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="bound">y</span> <span class="main">::</span> <span class="tfree">'i</span> fm<span class="main">.</span> <span class="main">âˆƒ</span><span class="bound">n</span><span class="main">.</span> <span class="bound">y</span> <span class="main">=</span> from_nat <span class="bound">n</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">metis</span> from_nat_to_nat<span class="main">)</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="var">?V</span> <span class="var">?C</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> Extend_maximal <span class="quoted"><span class="quoted">â€¹finite_char <span class="var">?C</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>

  <span class="keyword1"><span class="command">{</span></span> <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span>
    <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">x</span> <span class="main">âˆˆ</span> <span class="var">?S</span>â€º</span></span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="skolem">x</span> <span class="main">âˆˆ</span> <span class="var">?V</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> Extend_subset <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
    <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?M</span><span class="main">,</span> <span class="var">?V</span> <span class="main">âŠ¨</span> <span class="skolem">x</span>â€º</span></span>
      <span class="keyword1"><span class="command">using</span></span> model_existence <span class="quoted"><span class="quoted">â€¹<span class="var">?V</span> <span class="main">âˆˆ</span> <span class="var">?C</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹maximal <span class="var">?V</span> <span class="var">?C</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span> <span class="keyword1"><span class="command">}</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?M</span><span class="main">,</span> <span class="var">?V</span> <span class="main">âŠ¨</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span>â€º</span></span> <span class="quoted"><span class="quoted">â€¹list_all <span class="main">(</span><span class="main">Î»</span><span class="bound">p</span><span class="main">.</span> <span class="var">?M</span><span class="main">,</span> <span class="var">?V</span> <span class="main">âŠ¨</span> <span class="bound">p</span><span class="main">)</span> <span class="free">G</span>â€º</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> list_all_def <span class="keyword1"><span class="command">by</span></span> <span class="operator">fastforce</span><span class="main"><span class="keyword3">+</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?M</span><span class="main">,</span> <span class="var">?V</span> <span class="main">âŠ¨</span> <span class="free">p</span>â€º</span></span>
    <span class="keyword1"><span class="command">using</span></span> valid <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted">False</span>
    <span class="keyword1"><span class="command">using</span></span> <span class="quoted"><span class="quoted">â€¹<span class="var">?M</span><span class="main">,</span> <span class="var">?V</span> <span class="main">âŠ¨</span> <span class="main">(</span><span class="main"><span class="hidden">â™</span><b>Â¬</b></span> <span class="free">p</span><span class="main">)</span>â€º</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">simp</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">theorem</span></span> completeness<span class="main">:</span>
  <span class="keyword2"><span class="keyword">assumes</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âˆ€</span><span class="main">(</span><span class="bound">M</span> <span class="main">::</span> <span class="main">(</span><span class="tfree">'i</span> <span class="main">::</span> countable<span class="main">,</span> <span class="tfree">'i</span> fm set<span class="main">)</span> kripke<span class="main">)</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">M</span><span class="main">,</span> <span class="bound">s</span> <span class="main">âŠ¨</span> <span class="free">p</span>â€º</span></span>
  <span class="keyword2"><span class="keyword">shows</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="free">p</span>â€º</span></span>
  <span class="keyword1"><span class="command">using</span></span> assms imply_completeness<span class="main">[</span><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> G<span class="main"><span class="main">=</span></span><span class="quoted"><span class="quoted">â€¹<span class="main">[]</span>â€º</span></span><span class="main">]</span> <span class="keyword1"><span class="command">by</span></span> <span class="operator">auto</span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">â€¹Main Resultâ€º</span></span> <span class="comment1">â€• â€¹System K is sound and completeâ€º</span>

<span class="keyword1"><span class="command">abbreviation</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">valid</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span> <span class="main">â‰¡</span> <span class="main">âˆ€</span><span class="main">(</span><span class="bound">M</span> <span class="main">::</span> <span class="main">(</span>nat<span class="main">,</span> nat s_max<span class="main">)</span> kripke<span class="main">)</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">M</span><span class="main">,</span> <span class="bound">s</span> <span class="main">âŠ¨</span> <span class="free"><span class="bound"><span class="entity">p</span></span></span>â€º</span></span>

<span class="keyword1"><span class="command">theorem</span></span> main<span class="main">:</span> <span class="quoted"><span class="quoted">â€¹valid <span class="free">p</span> <span class="main">âŸ·</span> <span class="main">âŠ¢</span> <span class="free">p</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹valid <span class="free">p</span>â€º</span></span>
  <span class="keyword1"><span class="command">with</span></span> completeness <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="free">p</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="operator">blast</span>
<span class="keyword1"><span class="command">next</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="free">p</span>â€º</span></span>
  <span class="keyword1"><span class="command">with</span></span> soundness <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹valid <span class="free">p</span>â€º</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="main">(</span><span class="operator">intro</span> allI<span class="main">)</span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">corollary</span></span> <span class="quoted"><span class="quoted">â€¹valid <span class="free">p</span> <span class="main">âŸ¶</span> <span class="free">M</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> <span class="free">p</span>â€º</span></span>
<span class="keyword1"><span class="command">proof</span></span>
  <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted">â€¹valid <span class="free">p</span>â€º</span></span>
  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted">â€¹<span class="main">âŠ¢</span> <span class="free">p</span>â€º</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> main <span class="keyword1"><span class="command">.</span></span>
  <span class="keyword1"><span class="command">with</span></span> soundness <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted">â€¹<span class="free">M</span><span class="main">,</span> <span class="free">s</span> <span class="main">âŠ¨</span> <span class="free">p</span>â€º</span></span> <span class="keyword1"><span class="command">.</span></span>
<span class="keyword1"><span class="command">qed</span></span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="plain_text">â€¹Acknowledgementsâ€º</span></span>

<span class="keyword1"><span class="command">text</span></span> <span class="quoted"><span class="plain_text">â€¹
The definition of a consistency property, subset closure, finite character and maximally consistent
sets is based on work by Berghofer, but has been adapted from first-order logic to epistemic logic.

  <span class="antiquoted"><span class="antiquoted">â–ª</span></span> Stefan Berghofer:
  First-Order Logic According to Fitting.
  <span class="antiquoted"><span class="antiquoted"><span class="operator"><span class="operator">ğŸŒ</span></span>â€¹https://www.isa-afp.org/entries/FOL-Fitting.shtmlâ€º</span></span>
â€º</span></span>

<span class="keyword2"><span class="keyword">end</span></span>
</pre>
</div>